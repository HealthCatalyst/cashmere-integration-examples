/**
 * @fileoverview added by tsickle
 * Generated from: lib/accordion/accordion.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, EventEmitter, HostBinding, Input, Output, ViewEncapsulation } from '@angular/core';
import { animate, state, style, transition, trigger } from '@angular/animations';
import { parseBooleanAttribute } from '../util';
/** @type {?} */
const supportedAligns = ['left', 'right'];
/**
 * @param {?} inputStr
 * @return {?}
 */
export function validateAlignInput(inputStr) {
    if (supportedAligns.indexOf(inputStr) < 0) {
        throw Error('Unsupported accordion alignment value: ' + inputStr);
    }
}
/**
 * Parent component that can have a `<hc-accordion-toolbar>` and content that is collapsable
 */
export class AccordionComponent {
    constructor() {
        this._animationDisabled = false;
        this._currentlyAnimating = false;
        this._hideToolbar = false;
        this._toolbarTrigger = true;
        this._triggerAlign = 'left';
        this.__isOpen = false;
        /**
         * Allows for two-way binding of the `open` property
         */
        this.openChange = new EventEmitter();
        /**
         * Event emitted when accordion is opened.
         */
        this.opened = new EventEmitter();
        /**
         * Event emitted when accordion has started to open.
         */
        this.openStart = new EventEmitter();
        /**
         * Event emitted when accordion is closed.
         */
        this.closed = new EventEmitter();
        /**
         * Event emitted when accordion has started to close.
         */
        this.closeStart = new EventEmitter();
        this._hostClass = true;
    }
    /**
     * Side the accordion trigger is attached to: `left` or `right`
     * @return {?}
     */
    get triggerAlign() {
        return this._triggerAlign;
    }
    /**
     * @param {?} alignType
     * @return {?}
     */
    set triggerAlign(alignType) {
        validateAlignInput(alignType);
        this._triggerAlign = alignType;
    }
    /**
     * Whether the entire width of the accordion bar is clickable, or only the down arrow button; default = true
     * @return {?}
     */
    get toolbarTrigger() {
        return this._toolbarTrigger;
    }
    /**
     * @param {?} doTrigger
     * @return {?}
     */
    set toolbarTrigger(doTrigger) {
        this._toolbarTrigger = parseBooleanAttribute(doTrigger);
    }
    /**
     * Hide toolbar.
     * @return {?}
     */
    get hideToolbar() {
        return this._hideToolbar;
    }
    /**
     * @param {?} hide
     * @return {?}
     */
    set hideToolbar(hide) {
        this._hideToolbar = parseBooleanAttribute(hide);
    }
    /**
     * Whether the accordion is opened.
     * @return {?}
     */
    get open() {
        return this.__isOpen;
    }
    /**
     * @param {?} opened
     * @return {?}
     */
    set open(opened) {
        this.toggle(parseBooleanAttribute(opened));
    }
    /**
     * @return {?}
     */
    get _alignment() {
        return this.triggerAlign === 'right' ? 'hc-align-right' : '';
    }
    /**
     * @return {?}
     */
    get _pointer() {
        return this.toolbarTrigger === true ? 'hc-toolbar-pointer' : '';
    }
    /**
     * @return {?}
     */
    get _openState() {
        if (this.__isOpen) {
            return this._animationDisabled ? 'open-instant' : 'open';
        }
        return 'void';
    }
    /**
     * @param {?} event
     * @return {?}
     */
    _animationStart(event) {
        this._currentlyAnimating = true;
        const { fromState, toState } = event;
        if (fromState === 'void' && toState === 'open') {
            this.openStart.emit();
        }
        else if (fromState === 'open' && toState === 'void') {
            this.closeStart.emit();
        }
    }
    /**
     * @param {?} event
     * @return {?}
     */
    _animationEnd(event) {
        this._currentlyAnimating = false;
        const { fromState, toState } = event;
        if (fromState === 'void' && toState === 'open') {
            this.opened.emit();
        }
        else if (fromState === 'open' && toState === 'void') {
            this.closed.emit();
        }
    }
    /**
     * @return {?}
     */
    get _isOpened() {
        return this.__isOpen && !this._currentlyAnimating;
    }
    /**
     * @return {?}
     */
    get _isOpening() {
        return this.__isOpen && this._currentlyAnimating;
    }
    /**
     * @return {?}
     */
    get _isClosed() {
        return !this.__isOpen && !this._currentlyAnimating;
    }
    /**
     * @return {?}
     */
    get _isClosing() {
        return !this.__isOpen && this._currentlyAnimating;
    }
    /**
     * @return {?}
     */
    ngAfterContentInit() {
        this._animationDisabled = false;
    }
    /**
     * @param {?} event
     * @param {?} toolbarClick
     * @return {?}
     */
    _triggerClick(event, toolbarClick) {
        if ((toolbarClick && this.toolbarTrigger) || !toolbarClick) {
            event.stopPropagation();
            this.toggle();
        }
    }
    /**
     * Opens accordion.
     * @return {?}
     */
    toggleOpen() {
        return this.toggle(true);
    }
    /**
     * Closes accordion.
     * @return {?}
     */
    toggleClose() {
        return this.toggle(false);
    }
    /**
     * Toggle this accordion.
     * @param {?=} isOpen
     * @return {?}
     */
    toggle(isOpen = !this.open) {
        if (!this._currentlyAnimating) {
            this.__isOpen = isOpen;
            this.openChange.emit(isOpen);
        }
    }
}
AccordionComponent.decorators = [
    { type: Component, args: [{
                selector: 'hc-accordion',
                template: "<div class=\"hc-accordion-toolbar-wrapper\" [ngClass]=\"[_pointer, _alignment]\" (click)=\"_triggerClick($event, true)\" *ngIf=\"!hideToolbar\">\n    <button type=\"button\" class=\"hc-accordion-trigger\" (click)=\"_triggerClick($event, false)\"></button>\n    <ng-content select=\"hc-accordion-toolbar\"></ng-content>\n</div>\n\n<div class=\"hc-accordion-collapse\"\n     [@openState]=\"_openState\"\n     (@openState.start)=\"_animationStart($event)\"\n     (@openState.done)=\"_animationEnd($event)\">\n    <div class=\"hc-accordion-content\">\n        <ng-content></ng-content>\n    </div>\n</div>\n",
                exportAs: 'hcAccordion',
                animations: [
                    trigger('openState', [
                        state('open, open-instant', style({
                            height: '*'
                        })),
                        state('void', style({
                            height: '0px',
                            visibility: 'hidden'
                        })),
                        transition('void => open-instant', animate('0ms')),
                        transition('void <=> open', animate('400ms ease'))
                    ])
                ],
                encapsulation: ViewEncapsulation.None,
                styles: [".hc-accordion{display:block;background:0 0;color:currentColor;box-sizing:border-box}.hc-accordion-toolbar-wrapper{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;flex-wrap:nowrap}.hc-accordion-toolbar-wrapper.hc-toolbar-pointer{cursor:pointer}.hc-accordion-trigger{background:0 0;border:none;color:#00bfff;cursor:pointer;height:50px;outline:0;padding:0;position:relative;width:50px}.hc-accordion-trigger::after{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNi45NzgiIGhlaWdodD0iMTcuMzE5IiB2aWV3Qm94PSIwIDAgMjYuOTc4IDE3LjMxOSI+CiAgPGRlZnM+CiAgICA8c3R5bGU+CiAgICAgIC5jbHMtMSB7CiAgICAgICAgZmlsbDogIzAwYWVmZjsKICAgICAgfQogICAgPC9zdHlsZT4KICA8L2RlZnM+CiAgPHBhdGggaWQ9IlBhdGhfNSIgZGF0YS1uYW1lPSJQYXRoIDUiIGNsYXNzPSJjbHMtMSIgZD0iTTI4LjE3NS0xMi4xODhhMS4wODEsMS4wODEsMCwwLDAsMC0xLjUyM0wyNS40LTE2LjQ3M2ExLjA2MSwxLjA2MSwwLDAsMC0xLjUwNywwTDE1LTcuNTg0bC04Ljg5LTguODlhMS4wNjEsMS4wNjEsMCwwLDAtMS41MDcsMEwxLjgyNS0xMy43MTFhMS4wODEsMS4wODEsMCwwLDAsMCwxLjUyM0wxNC4yNDcuMjE4YTEuMDYxLDEuMDYxLDAsMCwwLDEuNTA3LDBaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMS41MTEgMTYuNzg3KSIvPgo8L3N2Zz4K);background-repeat:no-repeat;background-size:contain;box-sizing:border-box;content:'';display:block;height:8.5px;margin-top:2px;pointer-events:none;-webkit-transform:rotate(180deg);transform:rotate(180deg);-webkit-transition:-webkit-transform .5s cubic-bezier(.25,.8,.25,1);transition:transform .5s cubic-bezier(.25,.8,.25,1);transition:transform .5s cubic-bezier(.25,.8,.25,1),-webkit-transform .5s cubic-bezier(.25,.8,.25,1);width:13px}.hc-accordion-closed .hc-accordion-trigger::after,.hc-accordion-closing .hc-accordion-trigger::after{-webkit-transform:rotate(0);transform:rotate(0)}.hc-accordion-toolbar-wrapper.hc-align-right .hc-accordion-trigger{-webkit-box-align:center;align-items:center;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;margin-left:auto;-webkit-box-ordinal-group:2;order:1}.hc-accordion-collapse{display:block;overflow:hidden}.hc-accordion-toolbar{-webkit-box-align:center;align-items:center;box-sizing:border-box;display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;flex-wrap:nowrap;padding:0 10px;white-space:nowrap;width:100%}.hc-accordion-toolbar-wrapper.hc-align-right .hc-accordion-toolbar{-webkit-box-ordinal-group:1;order:0}.hc-accordion-content{outline:0;padding:12px}"]
            }] }
];
AccordionComponent.propDecorators = {
    triggerAlign: [{ type: Input }],
    toolbarTrigger: [{ type: Input }],
    hideToolbar: [{ type: Input }],
    open: [{ type: Input }],
    openChange: [{ type: Output }],
    opened: [{ type: Output }],
    openStart: [{ type: Output }],
    closed: [{ type: Output }],
    closeStart: [{ type: Output }],
    _hostClass: [{ type: HostBinding, args: ['class.hc-accordion',] }],
    _isOpened: [{ type: HostBinding, args: ['class.hc-accordion-opened',] }],
    _isOpening: [{ type: HostBinding, args: ['class.hc-accordion-opening',] }],
    _isClosed: [{ type: HostBinding, args: ['class.hc-accordion-closed',] }],
    _isClosing: [{ type: HostBinding, args: ['class.hc-accordion-closing',] }]
};
if (false) {
    /**
     * @type {?}
     * @private
     */
    AccordionComponent.prototype._animationDisabled;
    /**
     * @type {?}
     * @private
     */
    AccordionComponent.prototype._currentlyAnimating;
    /**
     * @type {?}
     * @private
     */
    AccordionComponent.prototype._hideToolbar;
    /**
     * @type {?}
     * @private
     */
    AccordionComponent.prototype._toolbarTrigger;
    /**
     * @type {?}
     * @private
     */
    AccordionComponent.prototype._triggerAlign;
    /**
     * @type {?}
     * @private
     */
    AccordionComponent.prototype.__isOpen;
    /**
     * Allows for two-way binding of the `open` property
     * @type {?}
     */
    AccordionComponent.prototype.openChange;
    /**
     * Event emitted when accordion is opened.
     * @type {?}
     */
    AccordionComponent.prototype.opened;
    /**
     * Event emitted when accordion has started to open.
     * @type {?}
     */
    AccordionComponent.prototype.openStart;
    /**
     * Event emitted when accordion is closed.
     * @type {?}
     */
    AccordionComponent.prototype.closed;
    /**
     * Event emitted when accordion has started to close.
     * @type {?}
     */
    AccordionComponent.prototype.closeStart;
    /** @type {?} */
    AccordionComponent.prototype._hostClass;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWNjb3JkaW9uLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BoZWFsdGhjYXRhbHlzdC9jYXNobWVyZS8iLCJzb3VyY2VzIjpbImxpYi9hY2NvcmRpb24vYWNjb3JkaW9uLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBbUIsU0FBUyxFQUFFLFlBQVksRUFBRSxXQUFXLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxpQkFBaUIsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUN2SCxPQUFPLEVBQUMsT0FBTyxFQUFrQixLQUFLLEVBQUUsS0FBSyxFQUFFLFVBQVUsRUFBRSxPQUFPLEVBQUMsTUFBTSxxQkFBcUIsQ0FBQztBQUMvRixPQUFPLEVBQUMscUJBQXFCLEVBQUMsTUFBTSxTQUFTLENBQUM7O01BRXhDLGVBQWUsR0FBRyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUM7Ozs7O0FBRXpDLE1BQU0sVUFBVSxrQkFBa0IsQ0FBQyxRQUFnQjtJQUMvQyxJQUFJLGVBQWUsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxFQUFFO1FBQ3ZDLE1BQU0sS0FBSyxDQUFDLHlDQUF5QyxHQUFHLFFBQVEsQ0FBQyxDQUFDO0tBQ3JFO0FBQ0wsQ0FBQzs7OztBQTZCRCxNQUFNLE9BQU8sa0JBQWtCO0lBMUIvQjtRQTJCWSx1QkFBa0IsR0FBRyxLQUFLLENBQUM7UUFDM0Isd0JBQW1CLEdBQUcsS0FBSyxDQUFDO1FBQzVCLGlCQUFZLEdBQUcsS0FBSyxDQUFDO1FBQ3JCLG9CQUFlLEdBQUcsSUFBSSxDQUFDO1FBQ3ZCLGtCQUFhLEdBQUcsTUFBTSxDQUFDO1FBQ3ZCLGFBQVEsR0FBRyxLQUFLLENBQUM7Ozs7UUE0Q2YsZUFBVSxHQUFHLElBQUksWUFBWSxFQUFXLENBQUM7Ozs7UUFJbkQsV0FBTSxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7Ozs7UUFJNUIsY0FBUyxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7Ozs7UUFJL0IsV0FBTSxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7Ozs7UUFJNUIsZUFBVSxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7UUFHaEMsZUFBVSxHQUFHLElBQUksQ0FBQztJQXVGdEIsQ0FBQzs7Ozs7SUFuSkcsSUFDSSxZQUFZO1FBQ1osT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDO0lBQzlCLENBQUM7Ozs7O0lBRUQsSUFBSSxZQUFZLENBQUMsU0FBaUI7UUFDOUIsa0JBQWtCLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDOUIsSUFBSSxDQUFDLGFBQWEsR0FBRyxTQUFTLENBQUM7SUFDbkMsQ0FBQzs7Ozs7SUFHRCxJQUNJLGNBQWM7UUFDZCxPQUFPLElBQUksQ0FBQyxlQUFlLENBQUM7SUFDaEMsQ0FBQzs7Ozs7SUFFRCxJQUFJLGNBQWMsQ0FBQyxTQUFTO1FBQ3hCLElBQUksQ0FBQyxlQUFlLEdBQUcscUJBQXFCLENBQUMsU0FBUyxDQUFDLENBQUM7SUFDNUQsQ0FBQzs7Ozs7SUFHRCxJQUNJLFdBQVc7UUFDWCxPQUFPLElBQUksQ0FBQyxZQUFZLENBQUM7SUFDN0IsQ0FBQzs7Ozs7SUFFRCxJQUFJLFdBQVcsQ0FBQyxJQUFJO1FBQ2hCLElBQUksQ0FBQyxZQUFZLEdBQUcscUJBQXFCLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDcEQsQ0FBQzs7Ozs7SUFHRCxJQUNJLElBQUk7UUFDSixPQUFPLElBQUksQ0FBQyxRQUFRLENBQUM7SUFDekIsQ0FBQzs7Ozs7SUFFRCxJQUFJLElBQUksQ0FBQyxNQUFNO1FBQ1gsSUFBSSxDQUFDLE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO0lBQy9DLENBQUM7Ozs7SUF3QkQsSUFBSSxVQUFVO1FBQ1YsT0FBTyxJQUFJLENBQUMsWUFBWSxLQUFLLE9BQU8sQ0FBQyxDQUFDLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztJQUNqRSxDQUFDOzs7O0lBRUQsSUFBSSxRQUFRO1FBQ1IsT0FBTyxJQUFJLENBQUMsY0FBYyxLQUFLLElBQUksQ0FBQyxDQUFDLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztJQUNwRSxDQUFDOzs7O0lBRUQsSUFBSSxVQUFVO1FBQ1YsSUFBSSxJQUFJLENBQUMsUUFBUSxFQUFFO1lBQ2YsT0FBTyxJQUFJLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDO1NBQzVEO1FBQ0QsT0FBTyxNQUFNLENBQUM7SUFDbEIsQ0FBQzs7Ozs7SUFFRCxlQUFlLENBQUMsS0FBcUI7UUFDakMsSUFBSSxDQUFDLG1CQUFtQixHQUFHLElBQUksQ0FBQztjQUUxQixFQUFDLFNBQVMsRUFBRSxPQUFPLEVBQUMsR0FBRyxLQUFLO1FBQ2xDLElBQUksU0FBUyxLQUFLLE1BQU0sSUFBSSxPQUFPLEtBQUssTUFBTSxFQUFFO1lBQzVDLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxFQUFFLENBQUM7U0FDekI7YUFBTSxJQUFJLFNBQVMsS0FBSyxNQUFNLElBQUksT0FBTyxLQUFLLE1BQU0sRUFBRTtZQUNuRCxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksRUFBRSxDQUFDO1NBQzFCO0lBQ0wsQ0FBQzs7Ozs7SUFFRCxhQUFhLENBQUMsS0FBcUI7UUFDL0IsSUFBSSxDQUFDLG1CQUFtQixHQUFHLEtBQUssQ0FBQztjQUUzQixFQUFDLFNBQVMsRUFBRSxPQUFPLEVBQUMsR0FBRyxLQUFLO1FBQ2xDLElBQUksU0FBUyxLQUFLLE1BQU0sSUFBSSxPQUFPLEtBQUssTUFBTSxFQUFFO1lBQzVDLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLENBQUM7U0FDdEI7YUFBTSxJQUFJLFNBQVMsS0FBSyxNQUFNLElBQUksT0FBTyxLQUFLLE1BQU0sRUFBRTtZQUNuRCxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxDQUFDO1NBQ3RCO0lBQ0wsQ0FBQzs7OztJQUVELElBQ0ksU0FBUztRQUNULE9BQU8sSUFBSSxDQUFDLFFBQVEsSUFBSSxDQUFDLElBQUksQ0FBQyxtQkFBbUIsQ0FBQztJQUN0RCxDQUFDOzs7O0lBRUQsSUFDSSxVQUFVO1FBQ1YsT0FBTyxJQUFJLENBQUMsUUFBUSxJQUFJLElBQUksQ0FBQyxtQkFBbUIsQ0FBQztJQUNyRCxDQUFDOzs7O0lBRUQsSUFDSSxTQUFTO1FBQ1QsT0FBTyxDQUFDLElBQUksQ0FBQyxRQUFRLElBQUksQ0FBQyxJQUFJLENBQUMsbUJBQW1CLENBQUM7SUFDdkQsQ0FBQzs7OztJQUVELElBQ0ksVUFBVTtRQUNWLE9BQU8sQ0FBQyxJQUFJLENBQUMsUUFBUSxJQUFJLElBQUksQ0FBQyxtQkFBbUIsQ0FBQztJQUN0RCxDQUFDOzs7O0lBRUQsa0JBQWtCO1FBQ2QsSUFBSSxDQUFDLGtCQUFrQixHQUFHLEtBQUssQ0FBQztJQUNwQyxDQUFDOzs7Ozs7SUFFRCxhQUFhLENBQUMsS0FBWSxFQUFFLFlBQXFCO1FBQzdDLElBQUksQ0FBQyxZQUFZLElBQUksSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsWUFBWSxFQUFFO1lBQ3hELEtBQUssQ0FBQyxlQUFlLEVBQUUsQ0FBQztZQUN4QixJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7U0FDakI7SUFDTCxDQUFDOzs7OztJQUdELFVBQVU7UUFDTixPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDN0IsQ0FBQzs7Ozs7SUFHRCxXQUFXO1FBQ1AsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzlCLENBQUM7Ozs7OztJQUdELE1BQU0sQ0FBQyxTQUFrQixDQUFDLElBQUksQ0FBQyxJQUFJO1FBQy9CLElBQUksQ0FBQyxJQUFJLENBQUMsbUJBQW1CLEVBQUU7WUFDM0IsSUFBSSxDQUFDLFFBQVEsR0FBRyxNQUFNLENBQUM7WUFDdkIsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7U0FDaEM7SUFDTCxDQUFDOzs7WUFyTEosU0FBUyxTQUFDO2dCQUNQLFFBQVEsRUFBRSxjQUFjO2dCQUN4Qix1bUJBQXlDO2dCQUV6QyxRQUFRLEVBQUUsYUFBYTtnQkFDdkIsVUFBVSxFQUFFO29CQUNSLE9BQU8sQ0FBQyxXQUFXLEVBQUU7d0JBQ2pCLEtBQUssQ0FDRCxvQkFBb0IsRUFDcEIsS0FBSyxDQUFDOzRCQUNGLE1BQU0sRUFBRSxHQUFHO3lCQUNkLENBQUMsQ0FDTDt3QkFDRCxLQUFLLENBQ0QsTUFBTSxFQUNOLEtBQUssQ0FBQzs0QkFDRixNQUFNLEVBQUUsS0FBSzs0QkFDYixVQUFVLEVBQUUsUUFBUTt5QkFDdkIsQ0FBQyxDQUNMO3dCQUNELFVBQVUsQ0FBQyxzQkFBc0IsRUFBRSxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7d0JBQ2xELFVBQVUsQ0FBQyxlQUFlLEVBQUUsT0FBTyxDQUFDLFlBQVksQ0FBQyxDQUFDO3FCQUNyRCxDQUFDO2lCQUNMO2dCQUNELGFBQWEsRUFBRSxpQkFBaUIsQ0FBQyxJQUFJOzthQUN4Qzs7OzJCQVVJLEtBQUs7NkJBV0wsS0FBSzswQkFVTCxLQUFLO21CQVVMLEtBQUs7eUJBVUwsTUFBTTtxQkFHTixNQUFNO3dCQUlOLE1BQU07cUJBSU4sTUFBTTt5QkFJTixNQUFNO3lCQUdOLFdBQVcsU0FBQyxvQkFBb0I7d0JBd0NoQyxXQUFXLFNBQUMsMkJBQTJCO3lCQUt2QyxXQUFXLFNBQUMsNEJBQTRCO3dCQUt4QyxXQUFXLFNBQUMsMkJBQTJCO3lCQUt2QyxXQUFXLFNBQUMsNEJBQTRCOzs7Ozs7O0lBMUh6QyxnREFBbUM7Ozs7O0lBQ25DLGlEQUFvQzs7Ozs7SUFDcEMsMENBQTZCOzs7OztJQUM3Qiw2Q0FBK0I7Ozs7O0lBQy9CLDJDQUErQjs7Ozs7SUFDL0Isc0NBQXlCOzs7OztJQTRDekIsd0NBQW1EOzs7OztJQUduRCxvQ0FDNEI7Ozs7O0lBRzVCLHVDQUMrQjs7Ozs7SUFHL0Isb0NBQzRCOzs7OztJQUc1Qix3Q0FDZ0M7O0lBRWhDLHdDQUNrQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7QWZ0ZXJDb250ZW50SW5pdCwgQ29tcG9uZW50LCBFdmVudEVtaXR0ZXIsIEhvc3RCaW5kaW5nLCBJbnB1dCwgT3V0cHV0LCBWaWV3RW5jYXBzdWxhdGlvbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge2FuaW1hdGUsIEFuaW1hdGlvbkV2ZW50LCBzdGF0ZSwgc3R5bGUsIHRyYW5zaXRpb24sIHRyaWdnZXJ9IGZyb20gJ0Bhbmd1bGFyL2FuaW1hdGlvbnMnO1xuaW1wb3J0IHtwYXJzZUJvb2xlYW5BdHRyaWJ1dGV9IGZyb20gJy4uL3V0aWwnO1xuXG5jb25zdCBzdXBwb3J0ZWRBbGlnbnMgPSBbJ2xlZnQnLCAncmlnaHQnXTtcblxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlQWxpZ25JbnB1dChpbnB1dFN0cjogc3RyaW5nKSB7XG4gICAgaWYgKHN1cHBvcnRlZEFsaWducy5pbmRleE9mKGlucHV0U3RyKSA8IDApIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoJ1Vuc3VwcG9ydGVkIGFjY29yZGlvbiBhbGlnbm1lbnQgdmFsdWU6ICcgKyBpbnB1dFN0cik7XG4gICAgfVxufVxuXG4vKiogUGFyZW50IGNvbXBvbmVudCB0aGF0IGNhbiBoYXZlIGEgYDxoYy1hY2NvcmRpb24tdG9vbGJhcj5gIGFuZCBjb250ZW50IHRoYXQgaXMgY29sbGFwc2FibGUgKi9cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnaGMtYWNjb3JkaW9uJyxcbiAgICB0ZW1wbGF0ZVVybDogJy4vYWNjb3JkaW9uLmNvbXBvbmVudC5odG1sJyxcbiAgICBzdHlsZVVybHM6IFsnLi9hY2NvcmRpb24uY29tcG9uZW50LnNjc3MnXSxcbiAgICBleHBvcnRBczogJ2hjQWNjb3JkaW9uJyxcbiAgICBhbmltYXRpb25zOiBbXG4gICAgICAgIHRyaWdnZXIoJ29wZW5TdGF0ZScsIFtcbiAgICAgICAgICAgIHN0YXRlKFxuICAgICAgICAgICAgICAgICdvcGVuLCBvcGVuLWluc3RhbnQnLFxuICAgICAgICAgICAgICAgIHN0eWxlKHtcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAnKidcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIHN0YXRlKFxuICAgICAgICAgICAgICAgICd2b2lkJyxcbiAgICAgICAgICAgICAgICBzdHlsZSh7XG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogJzBweCcsXG4gICAgICAgICAgICAgICAgICAgIHZpc2liaWxpdHk6ICdoaWRkZW4nXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICB0cmFuc2l0aW9uKCd2b2lkID0+IG9wZW4taW5zdGFudCcsIGFuaW1hdGUoJzBtcycpKSxcbiAgICAgICAgICAgIHRyYW5zaXRpb24oJ3ZvaWQgPD0+IG9wZW4nLCBhbmltYXRlKCc0MDBtcyBlYXNlJykpXG4gICAgICAgIF0pXG4gICAgXSxcbiAgICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lXG59KVxuZXhwb3J0IGNsYXNzIEFjY29yZGlvbkNvbXBvbmVudCBpbXBsZW1lbnRzIEFmdGVyQ29udGVudEluaXQge1xuICAgIHByaXZhdGUgX2FuaW1hdGlvbkRpc2FibGVkID0gZmFsc2U7XG4gICAgcHJpdmF0ZSBfY3VycmVudGx5QW5pbWF0aW5nID0gZmFsc2U7XG4gICAgcHJpdmF0ZSBfaGlkZVRvb2xiYXIgPSBmYWxzZTtcbiAgICBwcml2YXRlIF90b29sYmFyVHJpZ2dlciA9IHRydWU7XG4gICAgcHJpdmF0ZSBfdHJpZ2dlckFsaWduID0gJ2xlZnQnO1xuICAgIHByaXZhdGUgX19pc09wZW4gPSBmYWxzZTtcblxuICAgIC8qKiBTaWRlIHRoZSBhY2NvcmRpb24gdHJpZ2dlciBpcyBhdHRhY2hlZCB0bzogYGxlZnRgIG9yIGByaWdodGAgKi9cbiAgICBASW5wdXQoKVxuICAgIGdldCB0cmlnZ2VyQWxpZ24oKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RyaWdnZXJBbGlnbjtcbiAgICB9XG5cbiAgICBzZXQgdHJpZ2dlckFsaWduKGFsaWduVHlwZTogc3RyaW5nKSB7XG4gICAgICAgIHZhbGlkYXRlQWxpZ25JbnB1dChhbGlnblR5cGUpO1xuICAgICAgICB0aGlzLl90cmlnZ2VyQWxpZ24gPSBhbGlnblR5cGU7XG4gICAgfVxuXG4gICAgLyoqIFdoZXRoZXIgdGhlIGVudGlyZSB3aWR0aCBvZiB0aGUgYWNjb3JkaW9uIGJhciBpcyBjbGlja2FibGUsIG9yIG9ubHkgdGhlIGRvd24gYXJyb3cgYnV0dG9uOyBkZWZhdWx0ID0gdHJ1ZSAqL1xuICAgIEBJbnB1dCgpXG4gICAgZ2V0IHRvb2xiYXJUcmlnZ2VyKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fdG9vbGJhclRyaWdnZXI7XG4gICAgfVxuXG4gICAgc2V0IHRvb2xiYXJUcmlnZ2VyKGRvVHJpZ2dlcikge1xuICAgICAgICB0aGlzLl90b29sYmFyVHJpZ2dlciA9IHBhcnNlQm9vbGVhbkF0dHJpYnV0ZShkb1RyaWdnZXIpO1xuICAgIH1cblxuICAgIC8qKiBIaWRlIHRvb2xiYXIuICovXG4gICAgQElucHV0KClcbiAgICBnZXQgaGlkZVRvb2xiYXIoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9oaWRlVG9vbGJhcjtcbiAgICB9XG5cbiAgICBzZXQgaGlkZVRvb2xiYXIoaGlkZSkge1xuICAgICAgICB0aGlzLl9oaWRlVG9vbGJhciA9IHBhcnNlQm9vbGVhbkF0dHJpYnV0ZShoaWRlKTtcbiAgICB9XG5cbiAgICAvKiogV2hldGhlciB0aGUgYWNjb3JkaW9uIGlzIG9wZW5lZC4gKi9cbiAgICBASW5wdXQoKVxuICAgIGdldCBvcGVuKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fX2lzT3BlbjtcbiAgICB9XG5cbiAgICBzZXQgb3BlbihvcGVuZWQpIHtcbiAgICAgICAgdGhpcy50b2dnbGUocGFyc2VCb29sZWFuQXR0cmlidXRlKG9wZW5lZCkpO1xuICAgIH1cblxuICAgIC8qKiBBbGxvd3MgZm9yIHR3by13YXkgYmluZGluZyBvZiB0aGUgYG9wZW5gIHByb3BlcnR5ICovXG4gICAgQE91dHB1dCgpIG9wZW5DaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPGJvb2xlYW4+KCk7XG5cbiAgICAvKiogRXZlbnQgZW1pdHRlZCB3aGVuIGFjY29yZGlvbiBpcyBvcGVuZWQuICovXG4gICAgQE91dHB1dCgpXG4gICAgb3BlbmVkID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gICAgLyoqIEV2ZW50IGVtaXR0ZWQgd2hlbiBhY2NvcmRpb24gaGFzIHN0YXJ0ZWQgdG8gb3Blbi4gKi9cbiAgICBAT3V0cHV0KClcbiAgICBvcGVuU3RhcnQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgICAvKiogRXZlbnQgZW1pdHRlZCB3aGVuIGFjY29yZGlvbiBpcyBjbG9zZWQuICovXG4gICAgQE91dHB1dCgpXG4gICAgY2xvc2VkID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gICAgLyoqIEV2ZW50IGVtaXR0ZWQgd2hlbiBhY2NvcmRpb24gaGFzIHN0YXJ0ZWQgdG8gY2xvc2UuICovXG4gICAgQE91dHB1dCgpXG4gICAgY2xvc2VTdGFydCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblxuICAgIEBIb3N0QmluZGluZygnY2xhc3MuaGMtYWNjb3JkaW9uJylcbiAgICBfaG9zdENsYXNzID0gdHJ1ZTtcblxuICAgIGdldCBfYWxpZ25tZW50KCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLnRyaWdnZXJBbGlnbiA9PT0gJ3JpZ2h0JyA/ICdoYy1hbGlnbi1yaWdodCcgOiAnJztcbiAgICB9XG5cbiAgICBnZXQgX3BvaW50ZXIoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9vbGJhclRyaWdnZXIgPT09IHRydWUgPyAnaGMtdG9vbGJhci1wb2ludGVyJyA6ICcnO1xuICAgIH1cblxuICAgIGdldCBfb3BlblN0YXRlKCk6ICd2b2lkJyB8ICdvcGVuLWluc3RhbnQnIHwgJ29wZW4nIHtcbiAgICAgICAgaWYgKHRoaXMuX19pc09wZW4pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9hbmltYXRpb25EaXNhYmxlZCA/ICdvcGVuLWluc3RhbnQnIDogJ29wZW4nO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAndm9pZCc7XG4gICAgfVxuXG4gICAgX2FuaW1hdGlvblN0YXJ0KGV2ZW50OiBBbmltYXRpb25FdmVudCk6IHZvaWQge1xuICAgICAgICB0aGlzLl9jdXJyZW50bHlBbmltYXRpbmcgPSB0cnVlO1xuXG4gICAgICAgIGNvbnN0IHtmcm9tU3RhdGUsIHRvU3RhdGV9ID0gZXZlbnQ7XG4gICAgICAgIGlmIChmcm9tU3RhdGUgPT09ICd2b2lkJyAmJiB0b1N0YXRlID09PSAnb3BlbicpIHtcbiAgICAgICAgICAgIHRoaXMub3BlblN0YXJ0LmVtaXQoKTtcbiAgICAgICAgfSBlbHNlIGlmIChmcm9tU3RhdGUgPT09ICdvcGVuJyAmJiB0b1N0YXRlID09PSAndm9pZCcpIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VTdGFydC5lbWl0KCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfYW5pbWF0aW9uRW5kKGV2ZW50OiBBbmltYXRpb25FdmVudCk6IHZvaWQge1xuICAgICAgICB0aGlzLl9jdXJyZW50bHlBbmltYXRpbmcgPSBmYWxzZTtcblxuICAgICAgICBjb25zdCB7ZnJvbVN0YXRlLCB0b1N0YXRlfSA9IGV2ZW50O1xuICAgICAgICBpZiAoZnJvbVN0YXRlID09PSAndm9pZCcgJiYgdG9TdGF0ZSA9PT0gJ29wZW4nKSB7XG4gICAgICAgICAgICB0aGlzLm9wZW5lZC5lbWl0KCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZnJvbVN0YXRlID09PSAnb3BlbicgJiYgdG9TdGF0ZSA9PT0gJ3ZvaWQnKSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlZC5lbWl0KCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBASG9zdEJpbmRpbmcoJ2NsYXNzLmhjLWFjY29yZGlvbi1vcGVuZWQnKVxuICAgIGdldCBfaXNPcGVuZWQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9faXNPcGVuICYmICF0aGlzLl9jdXJyZW50bHlBbmltYXRpbmc7XG4gICAgfVxuXG4gICAgQEhvc3RCaW5kaW5nKCdjbGFzcy5oYy1hY2NvcmRpb24tb3BlbmluZycpXG4gICAgZ2V0IF9pc09wZW5pbmcoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9faXNPcGVuICYmIHRoaXMuX2N1cnJlbnRseUFuaW1hdGluZztcbiAgICB9XG5cbiAgICBASG9zdEJpbmRpbmcoJ2NsYXNzLmhjLWFjY29yZGlvbi1jbG9zZWQnKVxuICAgIGdldCBfaXNDbG9zZWQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAhdGhpcy5fX2lzT3BlbiAmJiAhdGhpcy5fY3VycmVudGx5QW5pbWF0aW5nO1xuICAgIH1cblxuICAgIEBIb3N0QmluZGluZygnY2xhc3MuaGMtYWNjb3JkaW9uLWNsb3NpbmcnKVxuICAgIGdldCBfaXNDbG9zaW5nKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gIXRoaXMuX19pc09wZW4gJiYgdGhpcy5fY3VycmVudGx5QW5pbWF0aW5nO1xuICAgIH1cblxuICAgIG5nQWZ0ZXJDb250ZW50SW5pdCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5fYW5pbWF0aW9uRGlzYWJsZWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBfdHJpZ2dlckNsaWNrKGV2ZW50OiBFdmVudCwgdG9vbGJhckNsaWNrOiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIGlmICgodG9vbGJhckNsaWNrICYmIHRoaXMudG9vbGJhclRyaWdnZXIpIHx8ICF0b29sYmFyQ2xpY2spIHtcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgdGhpcy50b2dnbGUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKiBPcGVucyBhY2NvcmRpb24uICovXG4gICAgdG9nZ2xlT3BlbigpOiB2b2lkIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9nZ2xlKHRydWUpO1xuICAgIH1cblxuICAgIC8qKiBDbG9zZXMgYWNjb3JkaW9uLiAqL1xuICAgIHRvZ2dsZUNsb3NlKCk6IHZvaWQge1xuICAgICAgICByZXR1cm4gdGhpcy50b2dnbGUoZmFsc2UpO1xuICAgIH1cblxuICAgIC8qKiBUb2dnbGUgdGhpcyBhY2NvcmRpb24uICovXG4gICAgdG9nZ2xlKGlzT3BlbjogYm9vbGVhbiA9ICF0aGlzLm9wZW4pOiB2b2lkIHtcbiAgICAgICAgaWYgKCF0aGlzLl9jdXJyZW50bHlBbmltYXRpbmcpIHtcbiAgICAgICAgICAgIHRoaXMuX19pc09wZW4gPSBpc09wZW47XG4gICAgICAgICAgICB0aGlzLm9wZW5DaGFuZ2UuZW1pdChpc09wZW4pO1xuICAgICAgICB9XG4gICAgfVxufVxuIl19