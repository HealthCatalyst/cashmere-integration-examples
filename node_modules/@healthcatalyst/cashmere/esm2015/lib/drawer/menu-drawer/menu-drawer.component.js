/**
 * @fileoverview added by tsickle
 * Generated from: lib/drawer/menu-drawer/menu-drawer.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { ChangeDetectionStrategy, Component, ContentChild, ElementRef, forwardRef, HostBinding, Input, Renderer2, ViewEncapsulation } from '@angular/core';
import { Drawer } from '../drawer.component';
import { animate, state, style, transition, trigger } from '@angular/animations';
import { DrawerToolbar } from './drawer-header.directive';
/** @type {?} */
const drawerThemes = ['dark-theme'];
/**
 * @param {?} menuTheme
 * @return {?}
 */
export function validateMenuDrawerTheme(menuTheme) {
    if (!drawerThemes.some((/**
     * @param {?} theme
     * @return {?}
     */
    theme => theme === menuTheme))) {
        throw new Error('Unsupported menuTheme: ' + menuTheme);
    }
}
/** @type {?} */
const openStateAnimation = '400ms cubic-bezier(0.25, 0.8, 0.25, 1)';
/**
 * Menu drawer that provides default themes
 */
export class MenuDrawer extends Drawer {
    /**
     * @param {?} elementRef
     * @param {?} renderer
     */
    constructor(elementRef, renderer) {
        super(elementRef);
        this.renderer = renderer;
        this._previousTheme = null;
        this._hostClass = true;
        this.menuTheme = 'dark-theme';
    }
    /**
     * Sets menu style of the drawer. Choose from: `'dark-theme'`
     * @return {?}
     */
    get menuTheme() {
        return this._menuTheme;
    }
    /**
     * @param {?} menuStyle
     * @return {?}
     */
    set menuTheme(menuStyle) {
        validateMenuDrawerTheme(menuStyle);
        this._setThemeClass(this._themeClass(menuStyle));
        this._previousTheme = this._menuTheme;
        this._menuTheme = menuStyle;
    }
    /**
     * @return {?}
     */
    ngAfterContentInit() {
        super.ngAfterContentInit();
        if (this.toolbar != null) {
            this.renderer.addClass(this.elementRef.nativeElement, 'hc-drawer-toolbar-visible');
        }
        else {
            this.renderer.removeClass(this.elementRef.nativeElement, 'hc-drawer-toolbar-visible');
        }
    }
    /**
     * @private
     * @param {?} menuStyle
     * @return {?}
     */
    _themeClass(menuStyle) {
        return `hc-menu-drawer-${menuStyle}`;
    }
    /**
     * @private
     * @param {?} className
     * @return {?}
     */
    _setThemeClass(className) {
        if (this._previousTheme !== className) {
            if (this._previousTheme || this._menuTheme) {
                this.renderer.removeClass(this.elementRef.nativeElement, this._previousTheme || this.menuTheme);
            }
            this.renderer.addClass(this.elementRef.nativeElement, className);
        }
    }
}
MenuDrawer.decorators = [
    { type: Component, args: [{
                selector: 'hc-menu-drawer',
                template: "<div class=\"hc-menu-drawer-toolbar-container\">\n    <ng-content select=\"[hcDrawerToolbar]\"></ng-content>\n</div>\n<div class=\"hc-menu-drawer-item-container\">\n    <div class=\"drawer-menu\">\n        <ng-content select=\"hc-drawer-item\"></ng-content>\n    </div>\n</div>\n",
                encapsulation: ViewEncapsulation.None,
                animations: [
                    trigger('openState', [
                        state('open-left, open-right, open-instant', style({
                            transform: 'translate3d(0, 0, 0)',
                            visibility: 'visible'
                        })),
                        state('void', style({
                            'box-shadow': 'none',
                            visibility: 'hidden'
                        })),
                        transition('void => open-instant', animate('0ms')),
                        transition('open-instant => void', animate(openStateAnimation)),
                        transition('void => open-left', [
                            animate('0ms', style({ transform: 'translate3d(-100%, 0, 0)' })),
                            animate(openStateAnimation)
                        ]),
                        transition('open-left => void', [
                            animate(openStateAnimation, style({ transform: 'translate3d(-100%, 0, 0)' }))
                        ]),
                        transition('void => open-right', [
                            animate('0ms', style({ transform: 'translate3d(100%, 0, 0)' })),
                            animate(openStateAnimation)
                        ]),
                        transition('open-right => void', [
                            animate(openStateAnimation, style({ transform: 'translate3d(100%, 0, 0)' }))
                        ])
                    ])
                ],
                changeDetection: ChangeDetectionStrategy.OnPush,
                providers: [{ provide: Drawer, useExisting: forwardRef((/**
                         * @return {?}
                         */
                        () => MenuDrawer)) }],
                styles: [".hc-drawer,.hc-menu-drawer{bottom:0;box-sizing:border-box;display:block;height:100%;outline:0;overflow-y:auto;position:absolute;top:0;z-index:3}.hc-drawer.hc-drawer-opened:not(.drawer-side),.hc-drawer.hc-drawer-opening:not(.drawer-side),.hc-menu-drawer.hc-drawer-opened:not(.drawer-side),.hc-menu-drawer.hc-drawer-opening:not(.drawer-side){box-shadow:0 8px 10px -5px rgba(0,0,0,.2),0 16px 24px 2px rgba(0,0,0,.14),0 6px 30px 5px rgba(0,0,0,.12)}.hc-drawer-right{right:0}.hc-drawer-container{position:relative;z-index:1;box-sizing:border-box;display:block;overflow:hidden}.hc-drawer-content{position:relative;z-index:1;display:block;height:100%;left:0;overflow:auto;padding:10px 20px;right:0;-webkit-transition-duration:.4s;transition-duration:.4s;-webkit-transition-property:margin-left,margin-right,-webkit-transform;transition-property:transform,margin-left,margin-right,-webkit-transform;-webkit-transition-timing-function:cubic-bezier(.25,.8,.25,1);transition-timing-function:cubic-bezier(.25,.8,.25,1)}", ".hc-menu-drawer{display:block;overflow:hidden}.hc-menu-drawer-item-container{background-color:#384655;height:100%;overflow-y:auto}.hc-drawer-toolbar-visible .hc-menu-drawer-item-container{height:calc(100% - 52px)}.hc-menu-drawer-toolbar-container{background-color:#2e3946;color:#00aeff;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;font-size:18px}.hc-drawer-toolbar{-webkit-box-align:center;align-items:center;display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;height:52px;max-height:52px;overflow:hidden;padding:15px 28px 15px 15px}.hc-drawer-item{color:#fff;display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;padding:15px 28px 15px 15px;cursor:pointer;width:100%}.hc-drawer-item:last-child hr{display:none}.hc-drawer-item:hover{background-color:#323f4d}.hc-drawer-divider{border:none;background-color:#6b737b;height:1px;margin:0 28px 0 0}.hc-drawer-right .hc-drawer-divider{margin:0 0 0 15px}"]
            }] }
];
/** @nocollapse */
MenuDrawer.ctorParameters = () => [
    { type: ElementRef },
    { type: Renderer2 }
];
MenuDrawer.propDecorators = {
    toolbar: [{ type: ContentChild, args: [DrawerToolbar, { static: false },] }],
    menuTheme: [{ type: Input }],
    _hostClass: [{ type: HostBinding, args: ['class.hc-menu-drawer',] }]
};
if (false) {
    /**
     * @type {?}
     * @private
     */
    MenuDrawer.prototype._previousTheme;
    /** @type {?} */
    MenuDrawer.prototype.toolbar;
    /**
     * @type {?}
     * @private
     */
    MenuDrawer.prototype._menuTheme;
    /** @type {?} */
    MenuDrawer.prototype._hostClass;
    /**
     * @type {?}
     * @private
     */
    MenuDrawer.prototype.renderer;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWVudS1kcmF3ZXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGhlYWx0aGNhdGFseXN0L2Nhc2htZXJlLyIsInNvdXJjZXMiOlsibGliL2RyYXdlci9tZW51LWRyYXdlci9tZW51LWRyYXdlci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBRUgsdUJBQXVCLEVBQ3ZCLFNBQVMsRUFDVCxZQUFZLEVBQ1osVUFBVSxFQUNWLFVBQVUsRUFDVixXQUFXLEVBQ1gsS0FBSyxFQUNMLFNBQVMsRUFDVCxpQkFBaUIsRUFDcEIsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFDLE1BQU0sRUFBQyxNQUFNLHFCQUFxQixDQUFDO0FBQzNDLE9BQU8sRUFBQyxPQUFPLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxVQUFVLEVBQUUsT0FBTyxFQUFDLE1BQU0scUJBQXFCLENBQUM7QUFDL0UsT0FBTyxFQUFDLGFBQWEsRUFBQyxNQUFNLDJCQUEyQixDQUFDOztNQUVsRCxZQUFZLEdBQUcsQ0FBQyxZQUFZLENBQUM7Ozs7O0FBRW5DLE1BQU0sVUFBVSx1QkFBdUIsQ0FBQyxTQUFTO0lBQzdDLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSTs7OztJQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsS0FBSyxLQUFLLFNBQVMsRUFBQyxFQUFFO1FBQ2xELE1BQU0sSUFBSSxLQUFLLENBQUMseUJBQXlCLEdBQUcsU0FBUyxDQUFDLENBQUM7S0FDMUQ7QUFDTCxDQUFDOztNQUVLLGtCQUFrQixHQUFHLHdDQUF3Qzs7OztBQTZDbkUsTUFBTSxPQUFPLFVBQVcsU0FBUSxNQUFNOzs7OztJQXlCbEMsWUFBWSxVQUFzQixFQUFVLFFBQW1CO1FBQzNELEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQztRQURzQixhQUFRLEdBQVIsUUFBUSxDQUFXO1FBeEJ2RCxtQkFBYyxHQUFrQixJQUFJLENBQUM7UUFzQjdDLGVBQVUsR0FBRyxJQUFJLENBQUM7UUFJZCxJQUFJLENBQUMsU0FBUyxHQUFHLFlBQVksQ0FBQztJQUNsQyxDQUFDOzs7OztJQXJCRCxJQUNJLFNBQVM7UUFDVCxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUM7SUFDM0IsQ0FBQzs7Ozs7SUFFRCxJQUFJLFNBQVMsQ0FBQyxTQUFpQjtRQUMzQix1QkFBdUIsQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUVuQyxJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztRQUNqRCxJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUM7UUFDdEMsSUFBSSxDQUFDLFVBQVUsR0FBRyxTQUFTLENBQUM7SUFDaEMsQ0FBQzs7OztJQVlELGtCQUFrQjtRQUNkLEtBQUssQ0FBQyxrQkFBa0IsRUFBRSxDQUFDO1FBRTNCLElBQUksSUFBSSxDQUFDLE9BQU8sSUFBSSxJQUFJLEVBQUU7WUFDdEIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxhQUFhLEVBQUUsMkJBQTJCLENBQUMsQ0FBQztTQUN0RjthQUFNO1lBQ0gsSUFBSSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxhQUFhLEVBQUUsMkJBQTJCLENBQUMsQ0FBQztTQUN6RjtJQUNMLENBQUM7Ozs7OztJQUVPLFdBQVcsQ0FBQyxTQUFpQjtRQUNqQyxPQUFPLGtCQUFrQixTQUFTLEVBQUUsQ0FBQztJQUN6QyxDQUFDOzs7Ozs7SUFFTyxjQUFjLENBQUMsU0FBaUI7UUFDcEMsSUFBSSxJQUFJLENBQUMsY0FBYyxLQUFLLFNBQVMsRUFBRTtZQUNuQyxJQUFJLElBQUksQ0FBQyxjQUFjLElBQUksSUFBSSxDQUFDLFVBQVUsRUFBRTtnQkFDeEMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxhQUFhLEVBQUUsSUFBSSxDQUFDLGNBQWMsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7YUFDbkc7WUFDRCxJQUFJLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLGFBQWEsRUFBRSxTQUFTLENBQUMsQ0FBQztTQUNwRTtJQUNMLENBQUM7OztZQTdGSixTQUFTLFNBQUM7Z0JBQ1AsUUFBUSxFQUFFLGdCQUFnQjtnQkFDMUIsbVNBQXlDO2dCQUN6QyxhQUFhLEVBQUUsaUJBQWlCLENBQUMsSUFBSTtnQkFFckMsVUFBVSxFQUFFO29CQUNSLE9BQU8sQ0FBQyxXQUFXLEVBQUU7d0JBQ2pCLEtBQUssQ0FDRCxxQ0FBcUMsRUFDckMsS0FBSyxDQUFDOzRCQUNGLFNBQVMsRUFBRSxzQkFBc0I7NEJBQ2pDLFVBQVUsRUFBRSxTQUFTO3lCQUN4QixDQUFDLENBQ0w7d0JBQ0QsS0FBSyxDQUNELE1BQU0sRUFDTixLQUFLLENBQUM7NEJBQ0YsWUFBWSxFQUFFLE1BQU07NEJBQ3BCLFVBQVUsRUFBRSxRQUFRO3lCQUN2QixDQUFDLENBQ0w7d0JBQ0QsVUFBVSxDQUFDLHNCQUFzQixFQUFFLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQzt3QkFDbEQsVUFBVSxDQUFDLHNCQUFzQixFQUFFLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO3dCQUMvRCxVQUFVLENBQUMsbUJBQW1CLEVBQUU7NEJBQzVCLE9BQU8sQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLEVBQUUsU0FBUyxFQUFFLDBCQUEwQixFQUFFLENBQUMsQ0FBQzs0QkFDaEUsT0FBTyxDQUFDLGtCQUFrQixDQUFDO3lCQUM5QixDQUFDO3dCQUNGLFVBQVUsQ0FBQyxtQkFBbUIsRUFBRTs0QkFDNUIsT0FBTyxDQUFDLGtCQUFrQixFQUFFLEtBQUssQ0FBQyxFQUFFLFNBQVMsRUFBRSwwQkFBMEIsRUFBRSxDQUFDLENBQUM7eUJBQ2hGLENBQUM7d0JBQ0YsVUFBVSxDQUFDLG9CQUFvQixFQUFFOzRCQUM3QixPQUFPLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQyxFQUFFLFNBQVMsRUFBRSx5QkFBeUIsRUFBQyxDQUFDLENBQUM7NEJBQzlELE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQzt5QkFDOUIsQ0FBQzt3QkFDRixVQUFVLENBQUMsb0JBQW9CLEVBQUU7NEJBQzdCLE9BQU8sQ0FBQyxrQkFBa0IsRUFBRSxLQUFLLENBQUMsRUFBRSxTQUFTLEVBQUUseUJBQXlCLEVBQUUsQ0FBQyxDQUFDO3lCQUMvRSxDQUFDO3FCQUNMLENBQUM7aUJBQ0w7Z0JBQ0QsZUFBZSxFQUFFLHVCQUF1QixDQUFDLE1BQU07Z0JBQy9DLFNBQVMsRUFBRSxDQUFDLEVBQUMsT0FBTyxFQUFFLE1BQU0sRUFBRSxXQUFXLEVBQUUsVUFBVTs7O3dCQUFDLEdBQUcsRUFBRSxDQUFDLFVBQVUsRUFBQyxFQUFDLENBQUM7O2FBQzVFOzs7O1lBL0RHLFVBQVU7WUFJVixTQUFTOzs7c0JBK0RSLFlBQVksU0FBQyxhQUFhLEVBQUUsRUFBQyxNQUFNLEVBQUUsS0FBSyxFQUFDO3dCQUkzQyxLQUFLO3lCQWVMLFdBQVcsU0FBQyxzQkFBc0I7Ozs7Ozs7SUFyQm5DLG9DQUE2Qzs7SUFFN0MsNkJBQ3VCOzs7OztJQWdCdkIsZ0NBQTJCOztJQUUzQixnQ0FDa0I7Ozs7O0lBRWtCLDhCQUEyQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gICAgQWZ0ZXJDb250ZW50SW5pdCxcbiAgICBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSxcbiAgICBDb21wb25lbnQsXG4gICAgQ29udGVudENoaWxkLFxuICAgIEVsZW1lbnRSZWYsXG4gICAgZm9yd2FyZFJlZixcbiAgICBIb3N0QmluZGluZyxcbiAgICBJbnB1dCxcbiAgICBSZW5kZXJlcjIsXG4gICAgVmlld0VuY2Fwc3VsYXRpb25cbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge0RyYXdlcn0gZnJvbSAnLi4vZHJhd2VyLmNvbXBvbmVudCc7XG5pbXBvcnQge2FuaW1hdGUsIHN0YXRlLCBzdHlsZSwgdHJhbnNpdGlvbiwgdHJpZ2dlcn0gZnJvbSAnQGFuZ3VsYXIvYW5pbWF0aW9ucyc7XG5pbXBvcnQge0RyYXdlclRvb2xiYXJ9IGZyb20gJy4vZHJhd2VyLWhlYWRlci5kaXJlY3RpdmUnO1xuXG5jb25zdCBkcmF3ZXJUaGVtZXMgPSBbJ2RhcmstdGhlbWUnXTtcblxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlTWVudURyYXdlclRoZW1lKG1lbnVUaGVtZSkge1xuICAgIGlmICghZHJhd2VyVGhlbWVzLnNvbWUodGhlbWUgPT4gdGhlbWUgPT09IG1lbnVUaGVtZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbnN1cHBvcnRlZCBtZW51VGhlbWU6ICcgKyBtZW51VGhlbWUpO1xuICAgIH1cbn1cblxuY29uc3Qgb3BlblN0YXRlQW5pbWF0aW9uID0gJzQwMG1zIGN1YmljLWJlemllcigwLjI1LCAwLjgsIDAuMjUsIDEpJztcblxuLyoqIE1lbnUgZHJhd2VyIHRoYXQgcHJvdmlkZXMgZGVmYXVsdCB0aGVtZXMgKi9cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnaGMtbWVudS1kcmF3ZXInLFxuICAgIHRlbXBsYXRlVXJsOiAnbWVudS1kcmF3ZXIuY29tcG9uZW50Lmh0bWwnLFxuICAgIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmUsXG4gICAgc3R5bGVVcmxzOiBbJy4uL2RyYXdlci5jb21wb25lbnQuc2NzcycsICdtZW51LWRyYXdlci5jb21wb25lbnQuc2NzcyddLFxuICAgIGFuaW1hdGlvbnM6IFtcbiAgICAgICAgdHJpZ2dlcignb3BlblN0YXRlJywgW1xuICAgICAgICAgICAgc3RhdGUoXG4gICAgICAgICAgICAgICAgJ29wZW4tbGVmdCwgb3Blbi1yaWdodCwgb3Blbi1pbnN0YW50JyxcbiAgICAgICAgICAgICAgICBzdHlsZSh7XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZTNkKDAsIDAsIDApJyxcbiAgICAgICAgICAgICAgICAgICAgdmlzaWJpbGl0eTogJ3Zpc2libGUnXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBzdGF0ZShcbiAgICAgICAgICAgICAgICAndm9pZCcsXG4gICAgICAgICAgICAgICAgc3R5bGUoe1xuICAgICAgICAgICAgICAgICAgICAnYm94LXNoYWRvdyc6ICdub25lJyxcbiAgICAgICAgICAgICAgICAgICAgdmlzaWJpbGl0eTogJ2hpZGRlbidcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIHRyYW5zaXRpb24oJ3ZvaWQgPT4gb3Blbi1pbnN0YW50JywgYW5pbWF0ZSgnMG1zJykpLFxuICAgICAgICAgICAgdHJhbnNpdGlvbignb3Blbi1pbnN0YW50ID0+IHZvaWQnLCBhbmltYXRlKG9wZW5TdGF0ZUFuaW1hdGlvbikpLFxuICAgICAgICAgICAgdHJhbnNpdGlvbigndm9pZCA9PiBvcGVuLWxlZnQnLCBbXG4gICAgICAgICAgICAgICAgYW5pbWF0ZSgnMG1zJywgc3R5bGUoeyB0cmFuc2Zvcm06ICd0cmFuc2xhdGUzZCgtMTAwJSwgMCwgMCknIH0pKSxcbiAgICAgICAgICAgICAgICBhbmltYXRlKG9wZW5TdGF0ZUFuaW1hdGlvbilcbiAgICAgICAgICAgIF0pLFxuICAgICAgICAgICAgdHJhbnNpdGlvbignb3Blbi1sZWZ0ID0+IHZvaWQnLCBbXG4gICAgICAgICAgICAgICAgYW5pbWF0ZShvcGVuU3RhdGVBbmltYXRpb24sIHN0eWxlKHsgdHJhbnNmb3JtOiAndHJhbnNsYXRlM2QoLTEwMCUsIDAsIDApJyB9KSlcbiAgICAgICAgICAgIF0pLFxuICAgICAgICAgICAgdHJhbnNpdGlvbigndm9pZCA9PiBvcGVuLXJpZ2h0JywgW1xuICAgICAgICAgICAgICAgIGFuaW1hdGUoJzBtcycsIHN0eWxlKHsgdHJhbnNmb3JtOiAndHJhbnNsYXRlM2QoMTAwJSwgMCwgMCknfSkpLFxuICAgICAgICAgICAgICAgIGFuaW1hdGUob3BlblN0YXRlQW5pbWF0aW9uKVxuICAgICAgICAgICAgXSksXG4gICAgICAgICAgICB0cmFuc2l0aW9uKCdvcGVuLXJpZ2h0ID0+IHZvaWQnLCBbXG4gICAgICAgICAgICAgICAgYW5pbWF0ZShvcGVuU3RhdGVBbmltYXRpb24sIHN0eWxlKHsgdHJhbnNmb3JtOiAndHJhbnNsYXRlM2QoMTAwJSwgMCwgMCknIH0pKVxuICAgICAgICAgICAgXSlcbiAgICAgICAgXSlcbiAgICBdLFxuICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxuICAgIHByb3ZpZGVyczogW3twcm92aWRlOiBEcmF3ZXIsIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IE1lbnVEcmF3ZXIpfV1cbn0pXG5leHBvcnQgY2xhc3MgTWVudURyYXdlciBleHRlbmRzIERyYXdlciBpbXBsZW1lbnRzIEFmdGVyQ29udGVudEluaXQge1xuICAgIHByaXZhdGUgX3ByZXZpb3VzVGhlbWU6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuXG4gICAgQENvbnRlbnRDaGlsZChEcmF3ZXJUb29sYmFyLCB7c3RhdGljOiBmYWxzZX0pXG4gICAgdG9vbGJhcjogRHJhd2VyVG9vbGJhcjtcblxuICAgIC8qKiBTZXRzIG1lbnUgc3R5bGUgb2YgdGhlIGRyYXdlci4gQ2hvb3NlIGZyb206IGAnZGFyay10aGVtZSdgICovXG4gICAgQElucHV0KClcbiAgICBnZXQgbWVudVRoZW1lKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLl9tZW51VGhlbWU7XG4gICAgfVxuXG4gICAgc2V0IG1lbnVUaGVtZShtZW51U3R5bGU6IHN0cmluZykge1xuICAgICAgICB2YWxpZGF0ZU1lbnVEcmF3ZXJUaGVtZShtZW51U3R5bGUpO1xuXG4gICAgICAgIHRoaXMuX3NldFRoZW1lQ2xhc3ModGhpcy5fdGhlbWVDbGFzcyhtZW51U3R5bGUpKTtcbiAgICAgICAgdGhpcy5fcHJldmlvdXNUaGVtZSA9IHRoaXMuX21lbnVUaGVtZTtcbiAgICAgICAgdGhpcy5fbWVudVRoZW1lID0gbWVudVN0eWxlO1xuICAgIH1cblxuICAgIHByaXZhdGUgX21lbnVUaGVtZTogc3RyaW5nO1xuXG4gICAgQEhvc3RCaW5kaW5nKCdjbGFzcy5oYy1tZW51LWRyYXdlcicpXG4gICAgX2hvc3RDbGFzcyA9IHRydWU7XG5cbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50UmVmOiBFbGVtZW50UmVmLCBwcml2YXRlIHJlbmRlcmVyOiBSZW5kZXJlcjIpIHtcbiAgICAgICAgc3VwZXIoZWxlbWVudFJlZik7XG4gICAgICAgIHRoaXMubWVudVRoZW1lID0gJ2RhcmstdGhlbWUnO1xuICAgIH1cblxuICAgIG5nQWZ0ZXJDb250ZW50SW5pdCgpIHtcbiAgICAgICAgc3VwZXIubmdBZnRlckNvbnRlbnRJbml0KCk7XG5cbiAgICAgICAgaWYgKHRoaXMudG9vbGJhciAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LCAnaGMtZHJhd2VyLXRvb2xiYXItdmlzaWJsZScpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5yZW1vdmVDbGFzcyh0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudCwgJ2hjLWRyYXdlci10b29sYmFyLXZpc2libGUnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgX3RoZW1lQ2xhc3MobWVudVN0eWxlOiBzdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIGBoYy1tZW51LWRyYXdlci0ke21lbnVTdHlsZX1gO1xuICAgIH1cblxuICAgIHByaXZhdGUgX3NldFRoZW1lQ2xhc3MoY2xhc3NOYW1lOiBzdHJpbmcpIHtcbiAgICAgICAgaWYgKHRoaXMuX3ByZXZpb3VzVGhlbWUgIT09IGNsYXNzTmFtZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX3ByZXZpb3VzVGhlbWUgfHwgdGhpcy5fbWVudVRoZW1lKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5yZW1vdmVDbGFzcyh0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudCwgdGhpcy5fcHJldmlvdXNUaGVtZSB8fCB0aGlzLm1lbnVUaGVtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LCBjbGFzc05hbWUpO1xuICAgICAgICB9XG4gICAgfVxufVxuIl19