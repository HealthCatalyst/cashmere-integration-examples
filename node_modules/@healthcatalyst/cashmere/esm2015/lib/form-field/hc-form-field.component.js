/**
 * @fileoverview added by tsickle
 * Generated from: lib/form-field/hc-form-field.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ContentChild, ContentChildren, HostBinding, QueryList, ViewEncapsulation, Input, ElementRef } from '@angular/core';
import { HcFormControlComponent } from './hc-form-control.component';
import { HcErrorComponent } from './hc-error.component';
import { HcPrefixDirective } from './hc-prefix.directive';
import { HcSuffixDirective } from './hc-suffix.directive';
import { HcLabelComponent } from './hc-label.component';
import { parseBooleanAttribute } from '../util';
import { InputDirective } from '../input/input.directive';
import { takeUntil } from 'rxjs/operators';
import { Subject } from 'rxjs';
/**
 * @return {?}
 */
export function getControlMissing() {
    return new Error(`HcFormField must contain a component that extends HcFormControl`);
}
/**
 * Container for form fields that applies Cashmere styling and behavior
 */
export class HcFormFieldComponent {
    /**
     * @param {?} _elementRef
     */
    constructor(_elementRef) {
        this._elementRef = _elementRef;
        this._inline = false;
        this._tight = false;
        this.unsubscribe$ = new Subject();
        this._classHcFormFieldClass = true;
    }
    /**
     * @return {?}
     */
    get _disabledClass() {
        if (this._inputChildren.length > 0) {
            return this._inputChildren.first.disabled;
        }
        else {
            return this._control._isDisabled;
        }
    }
    /**
     * Read-only boolean value of whether the form field has an associated label element
     * @return {?}
     */
    get hasLabel() {
        return !!this._labelChildren.length;
    }
    /**
     * Read-only boolean value of whether the form field has an input element
     * @return {?}
     */
    get hasInput() {
        return !!this._inputChildren.length;
    }
    /**
     * Whether the form elements should be stacked (default), or inline
     * @return {?}
     */
    get inline() {
        return this._inline;
    }
    /**
     * @param {?} isInline
     * @return {?}
     */
    set inline(isInline) {
        this._inline = parseBooleanAttribute(isInline);
    }
    /**
     * If true, condense the default padding on all included elements and reduce the font size. *Defaults to `false`.*
     * @return {?}
     */
    get tight() {
        return this._tight;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set tight(value) {
        this._tight = parseBooleanAttribute(value);
        this._updateTightControls();
    }
    /**
     * @return {?}
     */
    ngAfterContentInit() {
        if (!this._control) {
            throw getControlMissing();
        }
        else {
            this._updateTightControls();
            // Pass the current tight setting to controls that are added dynamically to the FormField
            this._controls.changes.pipe(takeUntil(this.unsubscribe$)).subscribe((/**
             * @return {?}
             */
            () => this._updateTightControls()));
        }
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        this.unsubscribe$.next();
        this.unsubscribe$.complete();
    }
    /**
     * @return {?}
     */
    _updateTightControls() {
        if (this._controls) {
            this._controls.forEach((/**
             * @param {?} control
             * @return {?}
             */
            control => {
                control.tight = this._tight;
            }));
        }
    }
    /**
     * @return {?}
     */
    getConnectedOverlayOrigin() {
        return this._elementRef;
    }
    /**
     * @return {?}
     */
    _shouldShowErrorMessages() {
        return (this._control._errorState &&
            ((this._errorChildren && this._errorChildren.length > 0) ||
                (!!this._control._errorMessage && this._control._errorMessage.length > 0)));
    }
}
HcFormFieldComponent.decorators = [
    { type: Component, args: [{
                selector: 'hc-form-field',
                template: "<div\n    [class.hc-form-field-wrapper-inline]=\"inline\"\n    [class.hc-form-field-wrapper]=\"!inline\"\n    [class.hc-form-field-no-label]=\"!hasLabel\"\n    [class.hc-form-field-wrapper-tight]=\"tight\" >\n    <span *ngIf=\"hasLabel\" [ngClass]=\"inline ? 'hc-form-field-label-wrapper-inline' : 'hc-form-field-label-wrapper'\" [class.hc-form-field-label-wrapper-tight]=\"tight\">\n        <label [ngClass]=\"inline ? 'hc-form-field-label-inline' : 'hc-form-field-label'\" [class.hc-form-field-label-tight]=\"tight\" [attr.for]=\"_control._componentId\">\n            <ng-content select=\"hc-label\"></ng-content>\n            <span class=\"hc-required-marker\" aria-hidden=\"true\" *ngIf=\"_control._isRequired && !_control._isDisabled\">&nbsp;*</span>\n        </label>\n    </span>\n    <div class=\"hc-form-field-content-wrapper\">\n\n        <ng-content select=\"hc-label-ext\"></ng-content>\n\n        <div\n            *ngIf=\"hasInput\"\n            [class.hc-form-field-flex]=\"!inline\"\n            [class.hc-form-field-flex-inline]=\"inline\"\n            [class.hc-form-field-invalid]=\"_shouldShowErrorMessages()\"\n        >\n            <div class=\"hc-form-field-prefix\" *ngIf=\"_prefixChildren.length\">\n                <ng-content select=\"[hcPrefix]\"></ng-content>\n            </div>\n            <div #inputs class=\"hc-form-field-infix\" [class.hc-form-field-infix-tight]=\"tight\">\n                <ng-content select=\"[hcInput]\"></ng-content>\n            </div>\n            <div class=\"hc-form-field-suffix\" *ngIf=\"_suffixChildren.length\">\n                <ng-content select=\"[hcSuffix]\"></ng-content>\n            </div>\n        </div>\n\n        <div\n            *ngIf=\"!hasInput\"\n            [class.hc-form-field-non-input]=\"!inline\"\n            [class.hc-form-field-non-input-inline]=\"inline\"\n            [class.hc-form-field-non-input-inline-tight]=\"inline && tight\"\n            [class.hc-form-field-invalid]=\"_shouldShowErrorMessages()\"\n        >\n            <ng-content></ng-content>\n        </div>\n        <div class=\"hc-form-field-error-wrapper\" *ngIf=\"_shouldShowErrorMessages()\">\n            <hc-error *ngIf=\"_control._errorMessage && _control._errorMessage.length\">{{ _control._errorMessage }}</hc-error>\n            <ng-content select=\"hc-error\"></ng-content>\n        </div>\n    </div>\n</div>\n",
                encapsulation: ViewEncapsulation.None,
                styles: [".hc-form-field{position:relative;text-align:left;font-size:inherit;font-family:'Open Sans','Helvetica Neue',Helvetica,Arial,sans-serif;font-weight:400;line-height:1.5;-webkit-box-orient:inherit;-webkit-box-direction:inherit;flex-direction:inherit}.hc-form-field-wrapper{position:relative;padding-bottom:1.525em;-webkit-box-orient:inherit;-webkit-box-direction:inherit;flex-direction:inherit}.hc-form-field-wrapper-inline{display:-webkit-inline-box;display:inline-flex;width:100%;padding-bottom:inherit}.hc-form-field-wrapper-tight{padding-bottom:10px}.hc-form-field-content-wrapper{display:-webkit-box;display:flex;-webkit-box-orient:inherit;-webkit-box-direction:inherit;flex-direction:inherit;flex-wrap:wrap;width:100%}.hc-form-field-flex{display:-webkit-inline-box;display:inline-flex;-webkit-box-align:baseline;align-items:baseline;box-sizing:border-box;width:100%;border:1px solid #ccc;box-shadow:inset .5px .5px 0 #ccc,inset -.5px -.5px 0 #ccc;background:#fff}.hc-form-field-disabled .hc-form-field-flex{cursor:not-allowed;border:1px solid #e0e0e0;box-shadow:inset .5px .5px 0 #e0e0e0,inset -.5px -.5px 0 #e0e0e0;background-color:#f0f3f6;color:#adadad}.hc-form-field-flex-inline{display:-webkit-inline-box;display:inline-flex;-webkit-box-align:center;align-items:center;box-sizing:border-box;border:1px solid #ccc;box-shadow:inset .5px .5px 0 #ccc,inset -.5px -.5px 0 #ccc;background:#fff}.hc-form-field-disabled .hc-form-field-flex-inline{cursor:not-allowed;border:1px solid #e0e0e0;box-shadow:inset .5px .5px 0 #e0e0e0,inset -.5px -.5px 0 #e0e0e0;background-color:#f0f3f6;color:#adadad}.hc-form-field-invalid.hc-form-field-flex,.hc-form-field-invalid.hc-form-field-flex-inline{border:1px solid #cc2027;box-shadow:inset .5px .5px 0 #cc2027,inset -.5px -.5px 0 #cc2027}.hc-form-field-non-input{display:-webkit-inline-box;display:inline-flex;-webkit-box-orient:inherit;-webkit-box-direction:inherit;flex-direction:inherit;width:100%}.hc-form-field-non-input-inline{display:-webkit-inline-box;display:inline-flex;-webkit-box-flex:0;flex:0 0 100%;min-height:35px;-webkit-box-align:center;align-items:center}.hc-form-field-non-input-inline-tight{min-height:auto}.hc-form-field-prefix,.hc-form-field-suffix{white-space:nowrap;-webkit-box-flex:0;flex:none;position:relative}.hc-form-field-prefix .hc-icon,.hc-form-field-suffix .hc-icon{color:#a1a1a1;font-size:125%;line-height:1.5}.hc-form-field-wrapper-tight .hc-form-field-prefix .hc-icon,.hc-form-field-wrapper-tight .hc-form-field-suffix .hc-icon{line-height:1.3}.hc-form-field-disabled .hc-form-field-prefix,.hc-form-field-disabled .hc-form-field-suffix{opacity:.5}.hc-form-field-suffix{padding-right:7px}.hc-form-field-prefix{padding-left:7px}.hc-form-field-infix{display:block;position:relative;-webkit-box-flex:1;flex:auto;padding:.393em 10px}.hc-form-field-infix-tight{padding:.1965em 7px;font-size:.92857rem}.hc-form-field-label-wrapper{box-sizing:content-box;width:100%}.hc-form-field-label-wrapper .hc-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.hc-form-field-label-wrapper.hc-form-field-label-wrapper-tight{font-size:.92857rem}.hc-form-field-label-wrapper-inline{-webkit-box-flex:1;flex:1 0 auto;padding:7px 15px 0 0}.hc-form-field-label-wrapper-inline .hc-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.hc-form-field-label-wrapper-inline.hc-form-field-label-wrapper-tight{padding-top:0;line-height:1.9}.hc-form-field-label{display:block;width:100%;margin-bottom:3px;font:inherit;font-size:1rem;color:#333}.hc-form-field-label-extension{color:#6d6e70;font-size:.85714rem;margin-bottom:10px}.hc-form-field-label-inline{width:100%;font:inherit;font-size:1rem;color:#333}.hc-form-field-label-tight{font-size:.92857rem}.hc-form-field-error-wrapper{box-sizing:border-box;width:100%;overflow:hidden;margin-top:.53333em;font-size:75%}.hc-error{display:block;color:#cc2027}.hc-required-marker{color:#cc2027}@media all and (-ms-high-contrast:none){.hc-form-field-disabled-flex,.hc-form-field-flex,.hc-form-field-flex-inline,.hc-form-field-input-invalid{border-width:2px;box-shadow:none}}", ".hc-input{font:inherit;background:inherit;color:currentColor;border:none;outline:0;padding:0;margin:0;width:100%;max-width:100%;text-align:inherit}.hc-input[disabled]{cursor:not-allowed}.hc-input:-moz-ui-invalid{box-shadow:none}.hc-input::-ms-clear,.hc-input::-ms-reveal{display:none}.hc-input::-webkit-input-placeholder{color:#c0c5cc}.hc-input::-moz-placeholder{color:#c0c5cc}.hc-input::placeholder{color:#c0c5cc}.hc-input:-ms-input-placeholder{color:#c0c5cc}.hc-input::-ms-input-placeholder{color:#c0c5cc}textarea.hc-input{resize:vertical;overflow:auto;padding:2px 0;margin:-2px 0}"]
            }] }
];
/** @nocollapse */
HcFormFieldComponent.ctorParameters = () => [
    { type: ElementRef }
];
HcFormFieldComponent.propDecorators = {
    _control: [{ type: ContentChild, args: [HcFormControlComponent, { static: false },] }],
    _controls: [{ type: ContentChildren, args: [HcFormControlComponent,] }],
    _errorChildren: [{ type: ContentChildren, args: [HcErrorComponent,] }],
    _prefixChildren: [{ type: ContentChildren, args: [HcPrefixDirective,] }],
    _suffixChildren: [{ type: ContentChildren, args: [HcSuffixDirective,] }],
    _inputChildren: [{ type: ContentChildren, args: [InputDirective,] }],
    _labelChildren: [{ type: ContentChildren, args: [HcLabelComponent,] }],
    _classHcFormFieldClass: [{ type: HostBinding, args: ['class.hc-form-field',] }],
    _disabledClass: [{ type: HostBinding, args: ['class.hc-form-field-disabled',] }],
    inline: [{ type: Input }],
    tight: [{ type: Input }]
};
if (false) {
    /**
     * @type {?}
     * @private
     */
    HcFormFieldComponent.prototype._inline;
    /**
     * @type {?}
     * @private
     */
    HcFormFieldComponent.prototype._tight;
    /**
     * @type {?}
     * @private
     */
    HcFormFieldComponent.prototype.unsubscribe$;
    /** @type {?} */
    HcFormFieldComponent.prototype._control;
    /** @type {?} */
    HcFormFieldComponent.prototype._controls;
    /** @type {?} */
    HcFormFieldComponent.prototype._errorChildren;
    /** @type {?} */
    HcFormFieldComponent.prototype._prefixChildren;
    /** @type {?} */
    HcFormFieldComponent.prototype._suffixChildren;
    /** @type {?} */
    HcFormFieldComponent.prototype._inputChildren;
    /** @type {?} */
    HcFormFieldComponent.prototype._labelChildren;
    /** @type {?} */
    HcFormFieldComponent.prototype._classHcFormFieldClass;
    /**
     * @type {?}
     * @private
     */
    HcFormFieldComponent.prototype._elementRef;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGMtZm9ybS1maWVsZC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AaGVhbHRoY2F0YWx5c3QvY2FzaG1lcmUvIiwic291cmNlcyI6WyJsaWIvZm9ybS1maWVsZC9oYy1mb3JtLWZpZWxkLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFFSCxTQUFTLEVBQ1QsWUFBWSxFQUNaLGVBQWUsRUFDZixXQUFXLEVBQ1gsU0FBUyxFQUNULGlCQUFpQixFQUNqQixLQUFLLEVBQ0wsVUFBVSxFQUViLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBQyxzQkFBc0IsRUFBQyxNQUFNLDZCQUE2QixDQUFDO0FBQ25FLE9BQU8sRUFBQyxnQkFBZ0IsRUFBQyxNQUFNLHNCQUFzQixDQUFDO0FBQ3RELE9BQU8sRUFBQyxpQkFBaUIsRUFBQyxNQUFNLHVCQUF1QixDQUFDO0FBQ3hELE9BQU8sRUFBQyxpQkFBaUIsRUFBQyxNQUFNLHVCQUF1QixDQUFDO0FBQ3hELE9BQU8sRUFBQyxnQkFBZ0IsRUFBQyxNQUFNLHNCQUFzQixDQUFDO0FBQ3RELE9BQU8sRUFBQyxxQkFBcUIsRUFBQyxNQUFNLFNBQVMsQ0FBQztBQUM5QyxPQUFPLEVBQUMsY0FBYyxFQUFDLE1BQU0sMEJBQTBCLENBQUM7QUFDeEQsT0FBTyxFQUFDLFNBQVMsRUFBQyxNQUFNLGdCQUFnQixDQUFDO0FBQ3pDLE9BQU8sRUFBQyxPQUFPLEVBQUMsTUFBTSxNQUFNLENBQUM7Ozs7QUFFN0IsTUFBTSxVQUFVLGlCQUFpQjtJQUM3QixPQUFPLElBQUksS0FBSyxDQUFDLGlFQUFpRSxDQUFDLENBQUM7QUFDeEYsQ0FBQzs7OztBQVNELE1BQU0sT0FBTyxvQkFBb0I7Ozs7SUE4RDdCLFlBQW9CLFdBQXlDO1FBQXpDLGdCQUFXLEdBQVgsV0FBVyxDQUE4QjtRQTdEckQsWUFBTyxHQUFZLEtBQUssQ0FBQztRQUN6QixXQUFNLEdBQVksS0FBSyxDQUFDO1FBQ3hC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QUMsTUFBTSxFQUFFLEtBQUssRUFBQzt3QkFFcEQsZUFBZSxTQUFDLHNCQUFzQjs2QkFFdEMsZUFBZSxTQUFDLGdCQUFnQjs4QkFFaEMsZUFBZSxTQUFDLGlCQUFpQjs4QkFFakMsZUFBZSxTQUFDLGlCQUFpQjs2QkFFakMsZUFBZSxTQUFDLGNBQWM7NkJBRTlCLGVBQWUsU0FBQyxnQkFBZ0I7cUNBR2hDLFdBQVcsU0FBQyxxQkFBcUI7NkJBR2pDLFdBQVcsU0FBQyw4QkFBOEI7cUJBb0IxQyxLQUFLO29CQVVMLEtBQUs7Ozs7Ozs7SUFwRE4sdUNBQWlDOzs7OztJQUNqQyxzQ0FBZ0M7Ozs7O0lBQ2hDLDRDQUEyQzs7SUFFM0Msd0NBQ2lDOztJQUNqQyx5Q0FDNkM7O0lBQzdDLDhDQUM0Qzs7SUFDNUMsK0NBQzhDOztJQUM5QywrQ0FDOEM7O0lBQzlDLDhDQUMwQzs7SUFDMUMsOENBQzRDOztJQUU1QyxzREFDOEI7Ozs7O0lBeUNsQiwyQ0FBaUQiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICAgIEFmdGVyQ29udGVudEluaXQsXG4gICAgQ29tcG9uZW50LFxuICAgIENvbnRlbnRDaGlsZCxcbiAgICBDb250ZW50Q2hpbGRyZW4sXG4gICAgSG9zdEJpbmRpbmcsXG4gICAgUXVlcnlMaXN0LFxuICAgIFZpZXdFbmNhcHN1bGF0aW9uLFxuICAgIElucHV0LFxuICAgIEVsZW1lbnRSZWYsXG4gICAgT25EZXN0cm95XG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtIY0Zvcm1Db250cm9sQ29tcG9uZW50fSBmcm9tICcuL2hjLWZvcm0tY29udHJvbC5jb21wb25lbnQnO1xuaW1wb3J0IHtIY0Vycm9yQ29tcG9uZW50fSBmcm9tICcuL2hjLWVycm9yLmNvbXBvbmVudCc7XG5pbXBvcnQge0hjUHJlZml4RGlyZWN0aXZlfSBmcm9tICcuL2hjLXByZWZpeC5kaXJlY3RpdmUnO1xuaW1wb3J0IHtIY1N1ZmZpeERpcmVjdGl2ZX0gZnJvbSAnLi9oYy1zdWZmaXguZGlyZWN0aXZlJztcbmltcG9ydCB7SGNMYWJlbENvbXBvbmVudH0gZnJvbSAnLi9oYy1sYWJlbC5jb21wb25lbnQnO1xuaW1wb3J0IHtwYXJzZUJvb2xlYW5BdHRyaWJ1dGV9IGZyb20gJy4uL3V0aWwnO1xuaW1wb3J0IHtJbnB1dERpcmVjdGl2ZX0gZnJvbSAnLi4vaW5wdXQvaW5wdXQuZGlyZWN0aXZlJztcbmltcG9ydCB7dGFrZVVudGlsfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5pbXBvcnQge1N1YmplY3R9IGZyb20gJ3J4anMnO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29udHJvbE1pc3NpbmcoKTogRXJyb3Ige1xuICAgIHJldHVybiBuZXcgRXJyb3IoYEhjRm9ybUZpZWxkIG11c3QgY29udGFpbiBhIGNvbXBvbmVudCB0aGF0IGV4dGVuZHMgSGNGb3JtQ29udHJvbGApO1xufVxuXG4vKiogQ29udGFpbmVyIGZvciBmb3JtIGZpZWxkcyB0aGF0IGFwcGxpZXMgQ2FzaG1lcmUgc3R5bGluZyBhbmQgYmVoYXZpb3IgKi9cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnaGMtZm9ybS1maWVsZCcsXG4gICAgdGVtcGxhdGVVcmw6ICcuL2hjLWZvcm0tZmllbGQuY29tcG9uZW50Lmh0bWwnLFxuICAgIHN0eWxlVXJsczogWycuL2hjLWZvcm0tZmllbGQuY29tcG9uZW50LnNjc3MnLCAnLi4vaW5wdXQvaW5wdXQuc2NzcyddLFxuICAgIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmVcbn0pXG5leHBvcnQgY2xhc3MgSGNGb3JtRmllbGRDb21wb25lbnQgaW1wbGVtZW50cyBBZnRlckNvbnRlbnRJbml0LCBPbkRlc3Ryb3kge1xuICAgIHByaXZhdGUgX2lubGluZTogYm9vbGVhbiA9IGZhbHNlO1xuICAgIHByaXZhdGUgX3RpZ2h0OiBib29sZWFuID0gZmFsc2U7XG4gICAgcHJpdmF0ZSB1bnN1YnNjcmliZSQgPSBuZXcgU3ViamVjdDx2b2lkPigpO1xuXG4gICAgQENvbnRlbnRDaGlsZChIY0Zvcm1Db250cm9sQ29tcG9uZW50LCB7c3RhdGljOiBmYWxzZX0pXG4gICAgX2NvbnRyb2w6IEhjRm9ybUNvbnRyb2xDb21wb25lbnQ7XG4gICAgQENvbnRlbnRDaGlsZHJlbihIY0Zvcm1Db250cm9sQ29tcG9uZW50KVxuICAgIF9jb250cm9sczogUXVlcnlMaXN0PEhjRm9ybUNvbnRyb2xDb21wb25lbnQ+O1xuICAgIEBDb250ZW50Q2hpbGRyZW4oSGNFcnJvckNvbXBvbmVudClcbiAgICBfZXJyb3JDaGlsZHJlbjogUXVlcnlMaXN0PEhjRXJyb3JDb21wb25lbnQ+O1xuICAgIEBDb250ZW50Q2hpbGRyZW4oSGNQcmVmaXhEaXJlY3RpdmUpXG4gICAgX3ByZWZpeENoaWxkcmVuOiBRdWVyeUxpc3Q8SGNQcmVmaXhEaXJlY3RpdmU+O1xuICAgIEBDb250ZW50Q2hpbGRyZW4oSGNTdWZmaXhEaXJlY3RpdmUpXG4gICAgX3N1ZmZpeENoaWxkcmVuOiBRdWVyeUxpc3Q8SGNTdWZmaXhEaXJlY3RpdmU+O1xuICAgIEBDb250ZW50Q2hpbGRyZW4oSW5wdXREaXJlY3RpdmUpXG4gICAgX2lucHV0Q2hpbGRyZW46IFF1ZXJ5TGlzdDxJbnB1dERpcmVjdGl2ZT47XG4gICAgQENvbnRlbnRDaGlsZHJlbihIY0xhYmVsQ29tcG9uZW50KVxuICAgIF9sYWJlbENoaWxkcmVuOiBRdWVyeUxpc3Q8SGNMYWJlbENvbXBvbmVudD47XG5cbiAgICBASG9zdEJpbmRpbmcoJ2NsYXNzLmhjLWZvcm0tZmllbGQnKVxuICAgIF9jbGFzc0hjRm9ybUZpZWxkQ2xhc3MgPSB0cnVlO1xuXG4gICAgQEhvc3RCaW5kaW5nKCdjbGFzcy5oYy1mb3JtLWZpZWxkLWRpc2FibGVkJylcbiAgICBnZXQgX2Rpc2FibGVkQ2xhc3MoKSB7XG4gICAgICAgIGlmICh0aGlzLl9pbnB1dENoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9pbnB1dENoaWxkcmVuLmZpcnN0LmRpc2FibGVkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnRyb2wuX2lzRGlzYWJsZWQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKiogUmVhZC1vbmx5IGJvb2xlYW4gdmFsdWUgb2Ygd2hldGhlciB0aGUgZm9ybSBmaWVsZCBoYXMgYW4gYXNzb2NpYXRlZCBsYWJlbCBlbGVtZW50ICovXG4gICAgZ2V0IGhhc0xhYmVsKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9sYWJlbENoaWxkcmVuLmxlbmd0aDtcbiAgICB9XG5cbiAgICAvKiogUmVhZC1vbmx5IGJvb2xlYW4gdmFsdWUgb2Ygd2hldGhlciB0aGUgZm9ybSBmaWVsZCBoYXMgYW4gaW5wdXQgZWxlbWVudCAqL1xuICAgIGdldCBoYXNJbnB1dCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5faW5wdXRDaGlsZHJlbi5sZW5ndGg7XG4gICAgfVxuXG4gICAgLyoqIFdoZXRoZXIgdGhlIGZvcm0gZWxlbWVudHMgc2hvdWxkIGJlIHN0YWNrZWQgKGRlZmF1bHQpLCBvciBpbmxpbmUgKi9cbiAgICBASW5wdXQoKVxuICAgIGdldCBpbmxpbmUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbmxpbmU7XG4gICAgfVxuXG4gICAgc2V0IGlubGluZShpc0lubGluZSkge1xuICAgICAgICB0aGlzLl9pbmxpbmUgPSBwYXJzZUJvb2xlYW5BdHRyaWJ1dGUoaXNJbmxpbmUpO1xuICAgIH1cblxuICAgIC8qKiBJZiB0cnVlLCBjb25kZW5zZSB0aGUgZGVmYXVsdCBwYWRkaW5nIG9uIGFsbCBpbmNsdWRlZCBlbGVtZW50cyBhbmQgcmVkdWNlIHRoZSBmb250IHNpemUuICpEZWZhdWx0cyB0byBgZmFsc2VgLiogICovXG4gICAgQElucHV0KClcbiAgICBnZXQgdGlnaHQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl90aWdodDtcbiAgICB9XG4gICAgc2V0IHRpZ2h0KHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX3RpZ2h0ID0gcGFyc2VCb29sZWFuQXR0cmlidXRlKHZhbHVlKTtcbiAgICAgICAgdGhpcy5fdXBkYXRlVGlnaHRDb250cm9scygpO1xuICAgIH1cblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgX2VsZW1lbnRSZWY6IEVsZW1lbnRSZWY8SFRNTElucHV0RWxlbWVudD4pIHt9XG5cbiAgICBuZ0FmdGVyQ29udGVudEluaXQoKTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5fY29udHJvbCkge1xuICAgICAgICAgICAgdGhyb3cgZ2V0Q29udHJvbE1pc3NpbmcoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZVRpZ2h0Q29udHJvbHMoKTtcbiAgICAgICAgICAgIC8vIFBhc3MgdGhlIGN1cnJlbnQgdGlnaHQgc2V0dGluZyB0byBjb250cm9scyB0aGF0IGFyZSBhZGRlZCBkeW5hbWljYWxseSB0byB0aGUgRm9ybUZpZWxkXG4gICAgICAgICAgICB0aGlzLl9jb250cm9scy5jaGFuZ2VzLnBpcGUodGFrZVVudGlsKHRoaXMudW5zdWJzY3JpYmUkKSkuc3Vic2NyaWJlKCgpID0+IHRoaXMuX3VwZGF0ZVRpZ2h0Q29udHJvbHMoKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBuZ09uRGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZSQubmV4dCgpO1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlJC5jb21wbGV0ZSgpO1xuICAgIH1cblxuICAgIF91cGRhdGVUaWdodENvbnRyb2xzKCkge1xuICAgICAgICBpZiAodGhpcy5fY29udHJvbHMpIHtcbiAgICAgICAgICAgIHRoaXMuX2NvbnRyb2xzLmZvckVhY2goY29udHJvbCA9PiB7XG4gICAgICAgICAgICAgICAgY29udHJvbC50aWdodCA9IHRoaXMuX3RpZ2h0O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRDb25uZWN0ZWRPdmVybGF5T3JpZ2luKCk6IEVsZW1lbnRSZWYge1xuICAgICAgICByZXR1cm4gdGhpcy5fZWxlbWVudFJlZjtcbiAgICB9XG5cbiAgICBfc2hvdWxkU2hvd0Vycm9yTWVzc2FnZXMoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICB0aGlzLl9jb250cm9sLl9lcnJvclN0YXRlICYmXG4gICAgICAgICAgICAoKHRoaXMuX2Vycm9yQ2hpbGRyZW4gJiYgdGhpcy5fZXJyb3JDaGlsZHJlbi5sZW5ndGggPiAwKSB8fFxuICAgICAgICAgICAgICAgICghIXRoaXMuX2NvbnRyb2wuX2Vycm9yTWVzc2FnZSAmJiB0aGlzLl9jb250cm9sLl9lcnJvck1lc3NhZ2UubGVuZ3RoID4gMCkpXG4gICAgICAgICk7XG4gICAgfVxufVxuIl19