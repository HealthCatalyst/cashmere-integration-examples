/**
 * @fileoverview added by tsickle
 * Generated from: lib/pagination/pagination.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, ViewEncapsulation } from '@angular/core';
import { coerceNumberProperty } from '@angular/cdk/coercion';
import { BasePaginationComponent } from './base-pagination';
/**
 * The pagination control enables the user to navigate across paged content.
 * Although commonly used with tables and data grids, this control may be used any place where paged data is used.
 * \@inheritdoc
 *
 */
export class PaginationComponent extends BasePaginationComponent {
    constructor() {
        super(...arguments);
        this._pageSizeOptions = [10, 20, 50];
        this.isFocused = false;
        /**
         * Displayed set of page size options. Will be sorted and include current page size.
         */
        this._displayedPageSizeOptions = [];
        this._hidePageSize = false;
    }
    /**
     * The set of provided page size options to display to the user. *Defaults to [10, 20, 50].*
     * @return {?}
     */
    get pageSizeOptions() {
        return this._pageSizeOptions;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set pageSizeOptions(value) {
        this._pageSizeOptions = (value || []).map((/**
         * @param {?} p
         * @return {?}
         */
        p => coerceNumberProperty(p)));
        this._updateDisplayedPageSizeOptions();
    }
    /**
     * Whether to hide the page size selection UI from the user. *Defaults to false.*
     * @return {?}
     */
    get hidePageSize() {
        return this._hidePageSize;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set hidePageSize(value) {
        this._hidePageSize = !!value;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this._updateDisplayedPageSizeOptions();
        super.ngOnInit();
    }
    /**
     * @return {?}
     */
    get _visiblePages() {
        /*
         * if there aren't any pages, don't display any
         */
        if (!this.totalPages) {
            return [];
        }
        /*
         * if there are less than nine pages, display them all
         */
        if (this.totalPages <= 9) {
            /** @type {?} */
            const visiblePages = [];
            for (let i = 1; i <= this.totalPages; i++) {
                visiblePages.push(i);
            }
            return visiblePages;
        }
        /*
                 * There should always be exactly nine elements in the paging control.
                 * Let n = total pages, p = current page, ... are non-clickable ellipses
                 * If the current page number is less than 6, display 1, 2, 3, 4, 5, 6, ..., n-1, n
                 * If the current page number within is within 4 of the max, display 1, 2, ..., n-5, n-4, n-3, n-2, n-1, n
                 * Otherwise, display 1, 2, ..., p-1, p, p+1, ..., n-1, n
                 */
        /** @type {?} */
        const n = this.totalPages;
        /** @type {?} */
        const p = this.pageNumber || 1;
        if (p < 6) {
            return [1, 2, 3, 4, 5, 6, null, n - 1, n];
        }
        else if (p >= n - 4) {
            return [1, 2, null, n - 5, n - 4, n - 3, n - 2, n - 1, n];
        }
        else {
            return [1, 2, null, p - 1, p, p + 1, null, n - 1, n];
        }
    }
    /**
     * @return {?}
     */
    get _collapsedVisiblePages() {
        /*
         * if there aren't any pages, don't display any
         */
        if (!this.totalPages) {
            return [];
        }
        /*
         * if there are less than five pages, display them all
         */
        if (this.totalPages <= 5) {
            /** @type {?} */
            const visiblePages = [];
            for (let i = 1; i <= this.totalPages; i++) {
                visiblePages.push(i);
            }
            return visiblePages;
        }
        /*
                 * There should always be exactly five elements in the paging control when collapsed.
                 * Let n = total pages, p = current page, ... are non-clickable ellipses
                 * If the current page number is less than 4, display 1, 2, 3, ..., n
                 * If the current page number within is within 2 of the max, display 1, ..., n-2, n-1, n
                 * Otherwise, display 1, ..., p, ..., n
                 */
        /** @type {?} */
        const n = this.totalPages;
        /** @type {?} */
        const p = this.pageNumber || 1;
        if (p < 4) {
            return [1, 2, 3, null, n];
        }
        else if (p >= n - 2) {
            return [1, null, n - 2, n - 1, n];
        }
        else {
            return [1, null, p, null, n];
        }
    }
    /**
     * @return {?}
     */
    _pageSizeUpdated() {
        this._updateDisplayedPageSizeOptions();
    }
    /**
     * @return {?}
     */
    _previousPage() {
        if (this._isFirstPage) {
            return;
        }
        this._goToPage((this.pageNumber || 1) - 1);
    }
    /**
     * @param {?} pageNum
     * @return {?}
     */
    _goToPage(pageNum) {
        this.pageNumber = pageNum;
    }
    /**
     * @return {?}
     */
    _nextPage() {
        if (this._isLastPage) {
            return;
        }
        this._goToPage((this.pageNumber || 1) + 1);
    }
    /**
     * Changes the page size so that the first item displayed on the page will still be
     * displayed using the new page size.
     *
     * For example, if the page size is 10 and on the second page (items indexed 11-20) then
     * switching so that the page size is 5 will set the third page as the current page so
     * that the 11th item will still be displayed.
     * @param {?} pageSize
     * @return {?}
     */
    _changePageSize(pageSize) {
        // Current page needs to be updated to reflect the new page size. Navigate to the page
        // containing the previous page's first item.
        /** @type {?} */
        const startIndex = (this.pageNumber - 1) * this.pageSize + 1;
        this.pageSize = pageSize;
        this.pageNumber = Math.ceil(startIndex / pageSize) || 1;
    }
    /**
     * Updates the list of page size options to display to the user. Includes making sure that
     * the page size is an option and that the list is sorted.
     * @private
     * @return {?}
     */
    _updateDisplayedPageSizeOptions() {
        // If no page size is provided, use the first page size option or the default page size.
        if (!this.pageSize) {
            this.pageSize = this.pageSizeOptions.length !== 0 ? this.pageSizeOptions[0] : BasePaginationComponent._DEFAULT_PAGE_SIZE;
        }
        this._displayedPageSizeOptions = this.pageSizeOptions.slice();
        if (this._displayedPageSizeOptions.indexOf(this.pageSize) === -1) {
            this._displayedPageSizeOptions.push(this.pageSize);
        }
        // Sort the numbers using a number-specific sort function.
        this._displayedPageSizeOptions.sort((/**
         * @param {?} a
         * @param {?} b
         * @return {?}
         */
        (a, b) => a - b));
    }
}
PaginationComponent.decorators = [
    { type: Component, args: [{
                selector: 'hc-pagination',
                template: "<div class=\"hc-pagination-container\">\n    <div *ngIf=\"!hidePageSize\" class=\"hc-font-sm hc-page-detail-container\">\n        <label class=\"hc-page-detail-label\">Showing:</label>\n        <hc-select class=\"hc-page-detail-select\" [value]=\"pageSize\" (change)=\"_changePageSize($event.value)\" (focus)=\"isFocused = true\" (blur)=\"isFocused = false\">\n            <option *ngFor=\"let pageSizeOption of _displayedPageSizeOptions\" [value]=\"pageSizeOption\">\n                {{ isFocused ? pageSizeOption : pageSize === pageSizeOption && pageSizeOption > length ? 'all' : pageSizeOption }}\n            </option>\n        </hc-select>\n        <label class=\"hc-page-detail-entries\">of <strong>{{ length }}</strong> entries</label\n        >\n    </div>\n\n    <div class=\"hc-page-btns-container\">\n        <button\n            hc-button\n            color=\"secondary\"\n            class=\"hc-page-button hc-page-left-button\"\n            (click)=\"_previousPage()\"\n            [disabled]=\"!totalPages || _isFirstPage\"\n        >\n            <span class=\"hc-page-button-chevron hc-page-button-chevron-left\"></span>\n            <span>PREV</span>\n        </button>\n        <!-- page navigation buttons to appear normally -->\n        <button\n            hc-button\n            color=\"secondary\"\n            class=\"hc-page-button hc-page-inner-button expanded-page-button\"\n            *ngFor=\"let page of _visiblePages\"\n            [disabled]=\"!page\"\n            [class.hc-page-button-current]=\"page === pageNumber\"\n            (click)=\"_goToPage(page)\"\n        >\n            <span *ngIf=\"!!page\">{{ page }}</span>\n            <span *ngIf=\"!page\" class=\"hc-page-button-ellipsis\"></span>\n        </button>\n        <!-- page navigation buttons to appear when space is limited -->\n        <button\n            hc-button\n            color=\"secondary\"\n            class=\"hc-page-button hc-page-inner-button collapsed-page-button\"\n            *ngFor=\"let page of _collapsedVisiblePages\"\n            [disabled]=\"!page\"\n            [class.hc-page-button-current]=\"page === pageNumber\"\n            (click)=\"_goToPage(page)\"\n        >\n            <span *ngIf=\"!!page\">{{ page }}</span>\n            <span *ngIf=\"!page\" class=\"hc-page-button-ellipsis\"></span>\n        </button>\n        <button\n            hc-button\n            color=\"secondary\"\n            class=\"hc-page-button hc-page-right-button\"\n            (click)=\"_nextPage()\"\n            [disabled]=\"!totalPages || _isLastPage\"\n        >\n            <span>NEXT</span>\n            <span class=\"hc-page-button-chevron\"></span>\n        </button>\n    </div>\n</div>\n",
                encapsulation: ViewEncapsulation.None,
                styles: [".hc-pagination-container{-webkit-box-align:center;align-items:center;display:-webkit-box;display:flex;flex-wrap:wrap;-webkit-box-pack:justify;justify-content:space-between;margin-top:15px;width:100%}.hc-page-detail-container{-webkit-box-align:center;align-items:center;display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 0 auto;margin-right:10px;padding:5px 0}.hc-page-detail-label{color:#6d6e70;-webkit-box-flex:0;flex:0 0 auto}.hc-page-detail-select{-webkit-box-flex:1;flex:1 0 65px;margin:0 7px}.hc-page-detail-entries{white-space:nowrap}.hc-range-label{-webkit-box-flex:0;flex:0 0 auto;margin-right:10px;padding:12px 0}.hc-page-btns-container{display:-webkit-inline-box;display:inline-flex;padding:5px 0}.hc-pagination-container .hc-page-btns-container .hc-page-button{background-color:#fff;border:2px solid #e0e0e0;color:#00aeff;font-weight:700;margin-right:0;min-width:40px}.hc-pagination-container .hc-page-btns-container .hc-page-button:hover{color:#008bcc}.hc-pagination-container .hc-page-btns-container .hc-page-button:focus{outline:0}.hc-pagination-container .hc-page-btns-container .hc-page-button.hc-page-button-current{background-color:#00aeff;color:#fff}.hc-pagination-container .hc-page-btns-container .hc-page-left-button{border-bottom-right-radius:0;border-top-right-radius:0;padding:0 15px}.hc-pagination-container .hc-page-btns-container .hc-page-right-button{border-bottom-left-radius:0;border-left-width:0;border-top-left-radius:0;padding:0 15px}.hc-pagination-container .hc-page-btns-container .hc-page-inner-button{border-left-width:0;padding:0 5px;border-radius:0}.hc-pagination-container .hc-page-btns-container .hc-page-inner-button[disabled]{border-bottom-color:rgba(204,204,204,.35);border-top-color:rgba(204,204,204,.35);color:rgba(0,174,255,.35);opacity:1}.hc-pagination-container .hc-page-btns-container .hc-page-inner-button[disabled]:hover{background-color:#fff}.hc-pagination-container .hc-page-btns-container .hc-page-button-chevron{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3LjM4NSIgaGVpZ2h0PSIxMiIgdmlld0JveD0iMCAwIDcuMzg1IDEyIj4KICA8ZGVmcz4KICAgIDxzdHlsZT4KICAgICAgLmNscy0xIHsKICAgICAgICBmaWxsOiAjMDBhZWZmOwogICAgICB9CiAgICA8L3N0eWxlPgogIDwvZGVmcz4KICA8cGF0aCBpZD0iUGF0aF81IiBkYXRhLW5hbWU9IlBhdGggNSIgY2xhc3M9ImNscy0xIiBkPSJNMTMuMzcxLTE0LjgyNmEuNDQ4LjQ0OCwwLDAsMCwwLS42NWwtMS4yMzYtMS4xNzhhLjQ4Ni40ODYsMCwwLDAtLjY3LDBsLTMuOTU0LDMuNzktMy45NTQtMy43OWEuNDg2LjQ4NiwwLDAsMC0uNjcsMEwxLjY1MS0xNS40NzVhLjQ0OC40NDgsMCwwLDAsMCwuNjVsNS41MjUsNS4yOWEuNDg2LjQ4NiwwLDAsMCwuNjcsMFoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE2Ljc4NyAxMy41MTEpIHJvdGF0ZSgtOTApIi8+Cjwvc3ZnPgo=);background-repeat:no-repeat;background-size:contain;display:inline-block;height:12px;margin:1px 3px 0 7px;width:7px}.hc-pagination-container .hc-page-btns-container .hc-page-button-chevron-left{margin:1px 7px 0 3px;-webkit-transform:rotate(180deg);transform:rotate(180deg)}.hc-pagination-container .hc-page-btns-container .hc-page-button-ellipsis{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSI1IiB2aWV3Qm94PSIwIDAgMjAgNSI+CiAgPGRlZnM+CiAgICA8c3R5bGU+CiAgICAgIC5jbHMtMSB7CiAgICAgICAgZmlsbDogIzAwYWVmZjsKICAgICAgfQogICAgPC9zdHlsZT4KICA8L2RlZnM+CiAgPHBhdGggaWQ9IlBhdGhfNiIgZGF0YS1uYW1lPSJQYXRoIDYiIGNsYXNzPSJjbHMtMSIgZD0iTTUuNDU1LTEzLjc1QTEuMzExLDEuMzExLDAsMCwwLDQuMDkxLTE1SDEuMzY0QTEuMzExLDEuMzExLDAsMCwwLDAtMTMuNzV2Mi41QTEuMzExLDEuMzExLDAsMCwwLDEuMzY0LTEwSDQuMDkxYTEuMzExLDEuMzExLDAsMCwwLDEuMzY0LTEuMjVabTcuMjczLDBBMS4zMTEsMS4zMTEsMCwwLDAsMTEuMzY0LTE1SDguNjM2YTEuMzExLDEuMzExLDAsMCwwLTEuMzY0LDEuMjV2Mi41QTEuMzExLDEuMzExLDAsMCwwLDguNjM2LTEwaDIuNzI3YTEuMzExLDEuMzExLDAsMCwwLDEuMzY0LTEuMjVabTcuMjczLDBBMS4zMTEsMS4zMTEsMCwwLDAsMTguNjM2LTE1SDE1LjkwOWExLjMxMSwxLjMxMSwwLDAsMC0xLjM2NCwxLjI1djIuNUExLjMxMSwxLjMxMSwwLDAsMCwxNS45MDktMTBoMi43MjdBMS4zMTEsMS4zMTEsMCwwLDAsMjAtMTEuMjVaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIDE1KSIvPgo8L3N2Zz4K);background-repeat:no-repeat;background-size:contain;display:inline-block;height:3px;margin-bottom:1px;opacity:.4;width:11px}.hc-pagination-container .hc-page-btns-container .expanded-page-button{display:block}.hc-pagination-container .hc-page-btns-container .collapsed-page-button{display:none}@media (max-width:768px){.hc-pagination-container .hc-page-btns-container .expanded-page-button{display:none}.hc-pagination-container .hc-page-btns-container .collapsed-page-button{display:block}}"]
            }] }
];
PaginationComponent.propDecorators = {
    pageSizeOptions: [{ type: Input }],
    hidePageSize: [{ type: Input }]
};
if (false) {
    /**
     * @type {?}
     * @private
     */
    PaginationComponent.prototype._pageSizeOptions;
    /** @type {?} */
    PaginationComponent.prototype.isFocused;
    /**
     * Displayed set of page size options. Will be sorted and include current page size.
     * @type {?}
     */
    PaginationComponent.prototype._displayedPageSizeOptions;
    /**
     * @type {?}
     * @private
     */
    PaginationComponent.prototype._hidePageSize;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFnaW5hdGlvbi5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AaGVhbHRoY2F0YWx5c3QvY2FzaG1lcmUvIiwic291cmNlcyI6WyJsaWIvcGFnaW5hdGlvbi9wYWdpbmF0aW9uLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBQyxTQUFTLEVBQUUsS0FBSyxFQUFVLGlCQUFpQixFQUFDLE1BQU0sZUFBZSxDQUFDO0FBQzFFLE9BQU8sRUFBQyxvQkFBb0IsRUFBQyxNQUFNLHVCQUF1QixDQUFDO0FBQzNELE9BQU8sRUFBQyx1QkFBdUIsRUFBQyxNQUFNLG1CQUFtQixDQUFDOzs7Ozs7O0FBWTFELE1BQU0sT0FBTyxtQkFBb0IsU0FBUSx1QkFBdUI7SUFOaEU7O1FBZ0JZLHFCQUFnQixHQUFhLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUVsRCxjQUFTLEdBQVksS0FBSyxDQUFDOzs7O1FBRzNCLDhCQUF5QixHQUFhLEVBQUUsQ0FBQztRQVVqQyxrQkFBYSxHQUFHLEtBQUssQ0FBQztJQTJJbEMsQ0FBQzs7Ozs7SUFsS0csSUFDSSxlQUFlO1FBQ2YsT0FBTyxJQUFJLENBQUMsZ0JBQWdCLENBQUM7SUFDakMsQ0FBQzs7Ozs7SUFDRCxJQUFJLGVBQWUsQ0FBQyxLQUFlO1FBQy9CLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxDQUFDLEtBQUssSUFBSSxFQUFFLENBQUMsQ0FBQyxHQUFHOzs7O1FBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLENBQUMsRUFBQyxDQUFDO1FBQ3hFLElBQUksQ0FBQywrQkFBK0IsRUFBRSxDQUFDO0lBQzNDLENBQUM7Ozs7O0lBU0QsSUFDSSxZQUFZO1FBQ1osT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDO0lBQzlCLENBQUM7Ozs7O0lBQ0QsSUFBSSxZQUFZLENBQUMsS0FBYztRQUMzQixJQUFJLENBQUMsYUFBYSxHQUFH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SSxDQUFDLGVBQWUsQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUM5RCxJQUFJLElBQUksQ0FBQyx5QkFBeUIsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFO1lBQzlELElBQUksQ0FBQyx5QkFBeUIsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1NBQ3REO1FBRUQsMERBQTBEO1FBQzFELElBQUksQ0FBQyx5QkFBeUIsQ0FBQyxJQUFJOzs7OztRQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBQyxDQUFDO0lBQ3pELENBQUM7OztZQXpLSixTQUFTLFNBQUM7Z0JBQ1AsUUFBUSxFQUFFLGVBQWU7Z0JBQ3pCLHFxRkFBMEM7Z0JBRTFDLGFBQWEsRUFBRSxpQkFBaUIsQ0FBQyxJQUFJOzthQUN4Qzs7OzhCQUdJLEtBQUs7MkJBZ0JMLEtBQUs7Ozs7Ozs7SUFSTiwrQ0FBa0Q7O0lBRWxELHdDQUEyQjs7Ozs7SUFHM0Isd0RBQXlDOzs7OztJQVV6Qyw0Q0FBOEIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0NvbXBvbmVudCwgSW5wdXQsIE9uSW5pdCwgVmlld0VuY2Fwc3VsYXRpb259IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtjb2VyY2VOdW1iZXJQcm9wZXJ0eX0gZnJvbSAnQGFuZ3VsYXIvY2RrL2NvZXJjaW9uJztcbmltcG9ydCB7QmFzZVBhZ2luYXRpb25Db21wb25lbnR9IGZyb20gJy4vYmFzZS1wYWdpbmF0aW9uJztcblxuLyoqIFRoZSBwYWdpbmF0aW9uIGNvbnRyb2wgZW5hYmxlcyB0aGUgdXNlciB0byBuYXZpZ2F0ZSBhY3Jvc3MgcGFnZWQgY29udGVudC5cbiAqIEFsdGhvdWdoIGNvbW1vbmx5IHVzZWQgd2l0aCB0YWJsZXMgYW5kIGRhdGEgZ3JpZHMsIHRoaXMgY29udHJvbCBtYXkgYmUgdXNlZCBhbnkgcGxhY2Ugd2hlcmUgcGFnZWQgZGF0YSBpcyB1c2VkLlxuICogQGluaGVyaXRkb2NcbiAqICovXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogJ2hjLXBhZ2luYXRpb24nLFxuICAgIHRlbXBsYXRlVXJsOiAnLi9wYWdpbmF0aW9uLmNvbXBvbmVudC5odG1sJyxcbiAgICBzdHlsZVVybHM6IFsnLi9wYWdpbmF0aW9uLmNvbXBvbmVudC5zY3NzJ10sXG4gICAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZVxufSlcbmV4cG9ydCBjbGFzcyBQYWdpbmF0aW9uQ29tcG9uZW50IGV4dGVuZHMgQmFzZVBhZ2luYXRpb25Db21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuICAgIC8qKiBUaGUgc2V0IG9mIHByb3ZpZGVkIHBhZ2Ugc2l6ZSBvcHRpb25zIHRvIGRpc3BsYXkgdG8gdGhlIHVzZXIuICpEZWZhdWx0cyB0byBbMTAsIDIwLCA1MF0uKiAqL1xuICAgIEBJbnB1dCgpXG4gICAgZ2V0IHBhZ2VTaXplT3B0aW9ucygpOiBudW1iZXJbXSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wYWdlU2l6ZU9wdGlvbnM7XG4gICAgfVxuICAgIHNldCBwYWdlU2l6ZU9wdGlvbnModmFsdWU6IG51bWJlcltdKSB7XG4gICAgICAgIHRoaXMuX3BhZ2VTaXplT3B0aW9ucyA9ICh2YWx1ZSB8fCBbXSkubWFwKHAgPT4gY29lcmNlTnVtYmVyUHJvcGVydHkocCkpO1xuICAgICAgICB0aGlzLl91cGRhdGVEaXNwbGF5ZWRQYWdlU2l6ZU9wdGlvbnMoKTtcbiAgICB9XG4gICAgcHJpdmF0ZSBfcGFnZVNpemVPcHRpb25zOiBudW1iZXJbXSA9IFsxMCwgMjAsIDUwXTtcblxuICAgIGlzRm9jdXNlZDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgLyoqIERpc3BsYXllZCBzZXQgb2YgcGFnZSBzaXplIG9wdGlvbnMuIFdpbGwgYmUgc29ydGVkIGFuZCBpbmNsdWRlIGN1cnJlbnQgcGFnZSBzaXplLiAqL1xuICAgIF9kaXNwbGF5ZWRQYWdlU2l6ZU9wdGlvbnM6IG51bWJlcltdID0gW107XG5cbiAgICAvKiogV2hldGhlciB0byBoaWRlIHRoZSBwYWdlIHNpemUgc2VsZWN0aW9uIFVJIGZyb20gdGhlIHVzZXIuICpEZWZhdWx0cyB0byBmYWxzZS4qICovXG4gICAgQElucHV0KClcbiAgICBnZXQgaGlkZVBhZ2VTaXplKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5faGlkZVBhZ2VTaXplO1xuICAgIH1cbiAgICBzZXQgaGlkZVBhZ2VTaXplKHZhbHVlOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuX2hpZGVQYWdlU2l6ZSA9ICEhdmFsdWU7XG4gICAgfVxuICAgIHByaXZhdGUgX2hpZGVQYWdlU2l6ZSA9IGZhbHNlO1xuXG4gICAgbmdPbkluaXQoKSB7XG4gICAgICAgIHRoaXMuX3VwZGF0ZURpc3BsYXllZFBhZ2VTaXplT3B0aW9ucygpO1xuICAgICAgICBzdXBlci5uZ09uSW5pdCgpO1xuICAgIH1cblxuICAgIGdldCBfdmlzaWJsZVBhZ2VzKCk6IEFycmF5PG51bWJlciB8IG51bGw+IHtcbiAgICAgICAgLypcbiAgICAgICAgICogaWYgdGhlcmUgYXJlbid0IGFueSBwYWdlcywgZG9uJ3QgZGlzcGxheSBhbnlcbiAgICAgICAgICovXG4gICAgICAgIGlmICghdGhpcy50b3RhbFBhZ2VzKSB7XG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cblxuICAgICAgICAvKlxuICAgICAgICAgKiBpZiB0aGVyZSBhcmUgbGVzcyB0aGFuIG5pbmUgcGFnZXMsIGRpc3BsYXkgdGhlbSBhbGxcbiAgICAgICAgICovXG4gICAgICAgIGlmICh0aGlzLnRvdGFsUGFnZXMgPD0gOSkge1xuICAgICAgICAgICAgY29uc3QgdmlzaWJsZVBhZ2VzOiBudW1iZXJbXSA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gdGhpcy50b3RhbFBhZ2VzOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2aXNpYmxlUGFnZXMucHVzaChpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB2aXNpYmxlUGFnZXM7XG4gICAgICAgIH1cblxuICAgICAgICAvKlxuICAgICAgICAgKiBUaGVyZSBzaG91bGQgYWx3YXlzIGJlIGV4YWN0bHkgbmluZSBlbGVtZW50cyBpbiB0aGUgcGFnaW5nIGNvbnRyb2wuXG4gICAgICAgICAqIExldCBuID0gdG90YWwgcGFnZXMsIHAgPSBjdXJyZW50IHBhZ2UsIC4uLiBhcmUgbm9uLWNsaWNrYWJsZSBlbGxpcHNlc1xuICAgICAgICAgKiBJZiB0aGUgY3VycmVudCBwYWdlIG51bWJlciBpcyBsZXNzIHRoYW4gNiwgZGlzcGxheSAxLCAyLCAzLCA0LCA1LCA2LCAuLi4sIG4tMSwgblxuICAgICAgICAgKiBJZiB0aGUgY3VycmVudCBwYWdlIG51bWJlciB3aXRoaW4gaXMgd2l0aGluIDQgb2YgdGhlIG1heCwgZGlzcGxheSAxLCAyLCAuLi4sIG4tNSwgbi00LCBuLTMsIG4tMiwgbi0xLCBuXG4gICAgICAgICAqIE90aGVyd2lzZSwgZGlzcGxheSAxLCAyLCAuLi4sIHAtMSwgcCwgcCsxLCAuLi4sIG4tMSwgblxuICAgICAgICAgKi9cbiAgICAgICAgY29uc3QgbiA9IHRoaXMudG90YWxQYWdlcztcbiAgICAgICAgY29uc3QgcCA9IHRoaXMucGFnZU51bWJlciB8fCAxO1xuXG4gICAgICAgIGlmIChwIDwgNikge1xuICAgICAgICAgICAgcmV0dXJuIFsxLCAyLCAzLCA0LCA1LCA2LCBudWxsLCBuIC0gMSwgbl07XG4gICAgICAgIH0gZWxzZSBpZiAocCA+PSBuIC0gNCkge1xuICAgICAgICAgICAgcmV0dXJuIFsxLCAyLCBudWxsLCBuIC0gNSwgbiAtIDQsIG4gLSAzLCBuIC0gMiwgbiAtIDEsIG5dO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFsxLCAyLCBudWxsLCBwIC0gMSwgcCwgcCArIDEsIG51bGwsIG4gLSAxLCBuXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldCBfY29sbGFwc2VkVmlzaWJsZVBhZ2VzKCk6IEFycmF5PG51bWJlciB8IG51bGw+IHtcbiAgICAgICAgLypcbiAgICAgICAgICogaWYgdGhlcmUgYXJlbid0IGFueSBwYWdlcywgZG9uJ3QgZGlzcGxheSBhbnlcbiAgICAgICAgICovXG4gICAgICAgIGlmICghdGhpcy50b3RhbFBhZ2VzKSB7XG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cblxuICAgICAgICAvKlxuICAgICAgICAgKiBpZiB0aGVyZSBhcmUgbGVzcyB0aGFuIGZpdmUgcGFnZXMsIGRpc3BsYXkgdGhlbSBhbGxcbiAgICAgICAgICovXG4gICAgICAgIGlmICh0aGlzLnRvdGFsUGFnZXMgPD0gNSkge1xuICAgICAgICAgICAgY29uc3QgdmlzaWJsZVBhZ2VzOiBudW1iZXJbXSA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gdGhpcy50b3RhbFBhZ2VzOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2aXNpYmxlUGFnZXMucHVzaChpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB2aXNpYmxlUGFnZXM7XG4gICAgICAgIH1cblxuICAgICAgICAvKlxuICAgICAgICAgKiBUaGVyZSBzaG91bGQgYWx3YXlzIGJlIGV4YWN0bHkgZml2ZSBlbGVtZW50cyBpbiB0aGUgcGFnaW5nIGNvbnRyb2wgd2hlbiBjb2xsYXBzZWQuXG4gICAgICAgICAqIExldCBuID0gdG90YWwgcGFnZXMsIHAgPSBjdXJyZW50IHBhZ2UsIC4uLiBhcmUgbm9uLWNsaWNrYWJsZSBlbGxpcHNlc1xuICAgICAgICAgKiBJZiB0aGUgY3VycmVudCBwYWdlIG51bWJlciBpcyBsZXNzIHRoYW4gNCwgZGlzcGxheSAxLCAyLCAzLCAuLi4sIG5cbiAgICAgICAgICogSWYgdGhlIGN1cnJlbnQgcGFnZSBudW1iZXIgd2l0aGluIGlzIHdpdGhpbiAyIG9mIHRoZSBtYXgsIGRpc3BsYXkgMSwgLi4uLCBuLTIsIG4tMSwgblxuICAgICAgICAgKiBPdGhlcndpc2UsIGRpc3BsYXkgMSwgLi4uLCBwLCAuLi4sIG5cbiAgICAgICAgICovXG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLnRvdGFsUGFnZXM7XG4gICAgICAgIGNvbnN0IHAgPSB0aGlzLnBhZ2VOdW1iZXIgfHwgMTtcblxuICAgICAgICBpZiAocCA8IDQpIHtcbiAgICAgICAgICAgIHJldHVybiBbMSwgMiwgMywgbnVsbCwgbl07XG4gICAgICAgIH0gZWxzZSBpZiAocCA+PSBuIC0gMikge1xuICAgICAgICAgICAgcmV0dXJuIFsxLCBudWxsLCBuIC0gMiwgbiAtIDEsIG5dO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFsxLCBudWxsLCBwLCBudWxsLCBuXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9wYWdlU2l6ZVVwZGF0ZWQoKSB7XG4gICAgICAgIHRoaXMuX3VwZGF0ZURpc3BsYXllZFBhZ2VTaXplT3B0aW9ucygpO1xuICAgIH1cblxuICAgIF9wcmV2aW91c1BhZ2UoKSB7XG4gICAgICAgIGlmICh0aGlzLl9pc0ZpcnN0UGFnZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2dvVG9QYWdlKCh0aGlzLnBhZ2VOdW1iZXIgfHwgMSkgLSAxKTtcbiAgICB9XG5cbiAgICBfZ29Ub1BhZ2UocGFnZU51bTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMucGFnZU51bWJlciA9IHBhZ2VOdW07XG4gICAgfVxuXG4gICAgX25leHRQYWdlKCkge1xuICAgICAgICBpZiAodGhpcy5faXNMYXN0UGFnZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2dvVG9QYWdlKCh0aGlzLnBhZ2VOdW1iZXIgfHwgMSkgKyAxKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGFuZ2VzIHRoZSBwYWdlIHNpemUgc28gdGhhdCB0aGUgZmlyc3QgaXRlbSBkaXNwbGF5ZWQgb24gdGhlIHBhZ2Ugd2lsbCBzdGlsbCBiZVxuICAgICAqIGRpc3BsYXllZCB1c2luZyB0aGUgbmV3IHBhZ2Ugc2l6ZS5cbiAgICAgKlxuICAgICAqIEZvciBleGFtcGxlLCBpZiB0aGUgcGFnZSBzaXplIGlzIDEwIGFuZCBvbiB0aGUgc2Vjb25kIHBhZ2UgKGl0ZW1zIGluZGV4ZWQgMTEtMjApIHRoZW5cbiAgICAgKiBzd2l0Y2hpbmcgc28gdGhhdCB0aGUgcGFnZSBzaXplIGlzIDUgd2lsbCBzZXQgdGhlIHRoaXJkIHBhZ2UgYXMgdGhlIGN1cnJlbnQgcGFnZSBzb1xuICAgICAqIHRoYXQgdGhlIDExdGggaXRlbSB3aWxsIHN0aWxsIGJlIGRpc3BsYXllZC5cbiAgICAgKi9cbiAgICBfY2hhbmdlUGFnZVNpemUocGFnZVNpemU6IG51bWJlcikge1xuICAgICAgICAvLyBDdXJyZW50IHBhZ2UgbmVlZHMgdG8gYmUgdXBkYXRlZCB0byByZWZsZWN0IHRoZSBuZXcgcGFnZSBzaXplLiBOYXZpZ2F0ZSB0byB0aGUgcGFnZVxuICAgICAgICAvLyBjb250YWluaW5nIHRoZSBwcmV2aW91cyBwYWdlJ3MgZmlyc3QgaXRlbS5cbiAgICAgICAgY29uc3Qgc3RhcnRJbmRleCA9ICh0aGlzLnBhZ2VOdW1iZXIgLSAxKSAqIHRoaXMucGFnZVNpemUgKyAxO1xuICAgICAgICB0aGlzLnBhZ2VTaXplID0gcGFnZVNpemU7XG4gICAgICAgIHRoaXMucGFnZU51bWJlciA9IE1hdGguY2VpbChzdGFydEluZGV4IC8gcGFnZVNpemUpIHx8IDE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgbGlzdCBvZiBwYWdlIHNpemUgb3B0aW9ucyB0byBkaXNwbGF5IHRvIHRoZSB1c2VyLiBJbmNsdWRlcyBtYWtpbmcgc3VyZSB0aGF0XG4gICAgICogdGhlIHBhZ2Ugc2l6ZSBpcyBhbiBvcHRpb24gYW5kIHRoYXQgdGhlIGxpc3QgaXMgc29ydGVkLlxuICAgICAqL1xuICAgIHByaXZhdGUgX3VwZGF0ZURpc3BsYXllZFBhZ2VTaXplT3B0aW9ucygpIHtcbiAgICAgICAgLy8gSWYgbm8gcGFnZSBzaXplIGlzIHByb3ZpZGVkLCB1c2UgdGhlIGZpcnN0IHBhZ2Ugc2l6ZSBvcHRpb24gb3IgdGhlIGRlZmF1bHQgcGFnZSBzaXplLlxuICAgICAgICBpZiAoIXRoaXMucGFnZVNpemUpIHtcbiAgICAgICAgICAgIHRoaXMucGFnZVNpemUgPSB0aGlzLnBhZ2VTaXplT3B0aW9ucy5sZW5ndGggIT09IDAgPyB0aGlzLnBhZ2VTaXplT3B0aW9uc1swXSA6IEJhc2VQYWdpbmF0aW9uQ29tcG9uZW50Ll9ERUZBVUxUX1BBR0VfU0laRTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2Rpc3BsYXllZFBhZ2VTaXplT3B0aW9ucyA9IHRoaXMucGFnZVNpemVPcHRpb25zLnNsaWNlKCk7XG4gICAgICAgIGlmICh0aGlzLl9kaXNwbGF5ZWRQYWdlU2l6ZU9wdGlvbnMuaW5kZXhPZih0aGlzLnBhZ2VTaXplKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIHRoaXMuX2Rpc3BsYXllZFBhZ2VTaXplT3B0aW9ucy5wdXNoKHRoaXMucGFnZVNpemUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU29ydCB0aGUgbnVtYmVycyB1c2luZyBhIG51bWJlci1zcGVjaWZpYyBzb3J0IGZ1bmN0aW9uLlxuICAgICAgICB0aGlzLl9kaXNwbGF5ZWRQYWdlU2l6ZU9wdGlvbnMuc29ydCgoYSwgYikgPT4gYSAtIGIpO1xuICAgIH1cbn1cbiJdfQ==