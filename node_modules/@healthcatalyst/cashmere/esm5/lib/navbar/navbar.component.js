/**
 * @fileoverview added by tsickle
 * Generated from: lib/navbar/navbar.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { ChangeDetectorRef, Component, ContentChildren, ElementRef, HostListener, Input, QueryList, ViewChild, ViewEncapsulation } from '@angular/core';
import { HcPopoverAnchorDirective } from '../pop/directives/popover-anchor.directive';
import { NavbarLinkComponent } from './navbar-link/navbar-link.component';
import { NavbarMobileMenuComponent } from './navbar-mobile-menu/navbar-mobile-menu.component';
import { Subject } from 'rxjs';
import { takeUntil } from 'rxjs/operators';
/**
 * The navbar is a wrapper that positions branding, navigation, and other elements in a concise header.
 */
var NavbarComponent = /** @class */ (function () {
    function NavbarComponent(ref) {
        this.ref = ref;
        /**
         * Display name of current user
         */
        this.user = '';
        /**
         * Url to application logo image file
         */
        this.appIcon = '';
        /**
         * Either url to brand icon image file or HcIcon object for a font glyph
         */
        this.brandIcon = '';
        /**
         * Router link triggered when home icon is clicked
         */
        this.homeUri = '';
        /**
         * Fixes the position of navbar to the top of the page. *Default is false.*
         */
        this.fixedTop = false;
        this.unsubscribe$ = new Subject();
        this._menuOpen = false;
        this._linkWidths = [];
        this._linksTotalWidth = 0;
        this._collapse = false;
        this._moreList = [];
    }
    /**
     * @return {?}
     */
    NavbarComponent.prototype._navResize = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this._navbarMore) {
            this._navbarMore.closePopover();
        }
        this._moreList = [];
        this._collapse = false;
        // If links is zero the page is smaller than the first responsive breakpoint
        if (this.navbarContent.nativeElement.clientWidth <= 0) {
            return;
        }
        /** @type {?} */
        var linksContainerWidth = this.navContent.nativeElement.offsetWidth;
        /** @type {?} */
        var curLinks = 0;
        // Step through the links until we hit the end of the container, then collapse the
        // remaining into a more menu
        this._navLinks.forEach((/**
         * @param {?} t
         * @param {?} i
         * @return {?}
         */
        function (t, i) {
            curLinks += _this._linkWidths[i];
            /** @type {?} */
            var moreWidth = _this._linksTotalWidth > linksContainerWidth ? 116 : 0;
            if (curLinks + moreWidth < linksContainerWidth) {
                t.show();
            }
            else {
                t.hide();
                _this._collapse = true;
                _this._moreList.push({ name: t.linkText, uri: t.uri });
            }
        }));
        this.ref.detectChanges();
    };
    /** Forces a recalculation of the navbar links to determine how many should be rolling into a More menu.
     * Call this if you've updated the contents of any navbar links. */
    /**
     * Forces a recalculation of the navbar links to determine how many should be rolling into a More menu.
     * Call this if you've updated the contents of any navbar links.
     * @return {?}
     */
    NavbarComponent.prototype.refreshNavLinks = /**
     * Forces a recalculation of the navbar links to determine how many should be rolling into a More menu.
     * Call this if you've updated the contents of any navbar links.
     * @return {?}
     */
    function () {
        this._collectNavLinkWidths();
        this._navResize();
    };
    /**
     * @private
     * @return {?}
     */
    NavbarComponent.prototype._collectNavLinkWidths = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        this._linkWidths = [];
        this._linksTotalWidth = 0;
        this._navLinks.forEach((/**
         * @param {?} t
         * @return {?}
         */
        function (t) {
            /** @type {?} */
            var isHidden = t._hidden;
            t.show();
            _this._linksTotalWidth += t._getWidth();
            _this._linkWidths.push(t._getWidth());
            if (isHidden) {
                t.hide();
            }
        }));
    };
    /**
     * @return {?}
     */
    NavbarComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        setTimeout((/**
         * @return {?}
         */
        function () {
            _this.refreshNavLinks();
        }), 100);
        // If links are added dynamically, recheck the navbar link sizing
        this._navLinks.changes.pipe(takeUntil(this.unsubscribe$)).subscribe((/**
         * @return {?}
         */
        function () { return _this.refreshNavLinks(); }));
    };
    /**
     * @return {?}
     */
    NavbarComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.unsubscribe$.next();
        this.unsubscribe$.complete();
    };
    /**
     * @return {?}
     */
    NavbarComponent.prototype._toggleMobileMenu = /**
     * @return {?}
     */
    function () {
        if (this._menuOpen) {
            this._mobileMenu.first.hide();
            this._menuOpen = false;
        }
        else {
            this._mobileMenu.first.show();
            this._menuOpen = true;
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    NavbarComponent.prototype._menuClick = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        /** @type {?} */
        var clickTarget = event.target.outerHTML;
        // Verify that the click in the mobile menu came from a navigation item
        if (clickTarget.indexOf('hclistline') >= 0 && clickTarget.indexOf('menu-dropdown') === -1) {
            this._toggleMobileMenu();
        }
    };
    Object.defineProperty(NavbarComponent.prototype, "_mobileMenuIcon", {
        get: /**
         * @return {?}
         */
        function () {
            return this._menuOpen ? 'fa-times' : 'fa-bars';
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    NavbarComponent.prototype._moreClick = /**
     * @return {?}
     */
    function () {
        if (this._navbarMore) {
            this._navbarMore.closePopover();
        }
    };
    /**
     * @return {?}
     */
    NavbarComponent.prototype._brandIconType = /**
     * @return {?}
     */
    function () {
        return typeof this.brandIcon;
    };
    /**
     * @return {?}
     */
    NavbarComponent.prototype._brandIconSet = /**
     * @return {?}
     */
    function () {
        if (this.brandIcon && typeof this.brandIcon !== 'string') {
            return this.brandIcon.fontSet;
        }
        else {
            return '';
        }
    };
    /**
     * @return {?}
     */
    NavbarComponent.prototype._brandIconGlyph = /**
     * @return {?}
     */
    function () {
        if (this.brandIcon && typeof this.brandIcon !== 'string') {
            return this.brandIcon.fontIcon;
        }
        else {
            return '';
        }
    };
    /**
     * @return {?}
     */
    NavbarComponent.prototype._brandIconSize = /**
     * @return {?}
     */
    function () {
        if (this.brandIcon && typeof this.brandIcon !== 'string' && this.brandIcon.fontSize) {
            return this.brandIcon.fontSize + 'px';
        }
        return '37px';
    };
    NavbarComponent.decorators = [
        { type: Component, args: [{
                    selector: 'hc-navbar',
                    template: "<nav #navbar class=\"hc-navbar\" [ngClass]=\"{'fixed-top': fixedTop}\">\n    <div class=\"navbar-brand\">\n        <a [routerLink]=\"homeUri\" class=\"brand\">\n            <img *ngIf=\"_brandIconType() == 'string'\" src=\"{{brandIcon}}\">\n            <hc-icon\n                *ngIf=\"_brandIconType() != 'string'\"\n                [fontSet]=\"_brandIconSet()\"\n                [fontIcon]=\"_brandIconGlyph()\"\n                [ngStyle]=\"{height: _brandIconSize(), 'font-size': _brandIconSize()}\">\n            </hc-icon>\n        </a>\n    </div>\n    <div class=\"navbar-app\">\n        <a [routerLink]=\"homeUri\" class=\"app\" *ngIf=\"appIcon\">\n            <img src=\"{{appIcon}}\">\n        </a>\n    </div>\n    <div #navlinks class=\"hc-navbar-link-container\">\n        <ng-content select=\"hc-navbar-link\"></ng-content>\n        <div class=\"hc-navbar-more-links\" title=\"More\" *ngIf=\"_collapse\" [hcPop]=\"navbarMore\" #moreLink=\"hcPopAnchor\">\n            More<hc-icon fontSet=\"fa\" fontIcon=\"fa-chevron-down\" hcIconSm></hc-icon>\n        </div>\n    </div>\n\n    <div #rightcontainer class=\"hc-navbar-right-container\">\n        <ng-content></ng-content>\n    </div>\n    <div class=\"hc-navbar-mobile-menu\" *ngIf=\"_mobileMenu.first\" (click)=\"_toggleMobileMenu()\">\n        <hc-icon fontSet=\"fa\" [fontIcon]=\"_mobileMenuIcon\" hcIconMd></hc-icon>\n    </div>\n</nav>\n<div (click)=\"_menuClick($event)\">\n    <ng-content select=\"hc-navbar-mobile-menu\"></ng-content>\n</div>\n\n<hc-pop #navbarMore [autoCloseOnContentClick]=\"true\" [showArrow]=\"false\" horizontalAlign=\"end\">\n    <div hcMenu>\n        <ng-container *ngFor=\"let item of _moreList; let i = index\">\n            <button hcMenuItem routerLinkActive=\"active\" [routerLink]=\"item.uri\" (click)=\"_moreClick()\">\n                <span hcMenuText>{{item.name}}</span>\n            </button>\n            <div *ngIf=\"i != _moreList.length - 1\" hcMenuItem hcDivider></div>\n        </ng-container>\n    </div>\n</hc-pop>\n",
                    encapsulation: ViewEncapsulation.None,
                    styles: [".hc-navbar{height:53px;background-color:#384655;display:-webkit-box;display:flex;font-size:15px;line-height:1}.hc-navbar.fixed-top{top:0;position:fixed;right:0;left:0;z-index:970;box-shadow:0 2px 6px rgba(0,0,0,.15)}.hc-navbar .navbar-brand{background-color:#00aeff;min-width:55px;width:55px;flex-basis:auto;height:100%;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center}.hc-navbar .navbar-brand .brand{-webkit-transition:background-color .25s;transition:background-color .25s;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;height:100%;cursor:default}.hc-navbar .navbar-brand .brand>img{height:37px;width:auto}.hc-navbar .navbar-brand .brand>hc-icon{width:100%;color:#fff}.hc-navbar .navbar-app{height:100%;padding:0 50px 0 25px}.hc-navbar .navbar-app a{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;height:100%}.hc-navbar .navbar-app a img{height:30px;width:auto;padding-top:2px}@media (max-width:576px){.hc-navbar .navbar-brand{display:none}.hc-navbar .navbar-app{padding:0 0 0 5%}}.hc-navbar .hc-navbar-link-container{display:-webkit-box;display:flex;list-style-type:none;margin:0;padding:0;overflow:hidden;width:100%}@media (max-width:768px){.hc-navbar .hc-navbar-link-container{display:none}}.hc-navbar .navbar-link{display:inline-block;height:100%;box-sizing:border-box;padding:22px 30px 0;text-align:center;white-space:nowrap;color:#ccc;border-bottom:5px solid transparent;-webkit-transition:background-color .25s;transition:background-color .25s}.hc-navbar .navbar-link.inactive:hover,.hc-navbar .navbar-link:hover:not(.active){outline:0;color:#fff;background-color:#2e3946}.hc-navbar .navbar-link.active:not(.inactive),.hc-navbar .navbar-link:active{color:#fff;font-weight:600;border-bottom:5px solid #00aeff}.hc-navbar .navbar-link:before{display:block;content:attr(title);font-weight:600;height:1px;color:transparent;overflow:hidden;visibility:hidden;margin-bottom:-1px}.hc-navbar .hc-navbar-right-container{display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 0 auto;-webkit-box-align:center;align-items:center;position:relative;margin-left:auto}@media (max-width:768px){.hc-navbar .hc-navbar-right-container{display:none}}.hc-navbar .hc-navbar-icon{height:53px;color:#fff;cursor:pointer;-webkit-transition:background-color .25s;transition:background-color .25s;min-width:53px!important;padding:18px 0}.hc-navbar .hc-navbar-icon.inactive:hover,.hc-navbar .hc-navbar-icon:hover:not(.active){outline:0;color:#fff;background-color:#2e3946}.hc-navbar .hc-navbar-username{height:53px;color:#fff;cursor:pointer;-webkit-transition:background-color .25s;transition:background-color .25s;padding:2px 15px 0;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;white-space:nowrap}.hc-navbar .hc-navbar-username.inactive:hover,.hc-navbar .hc-navbar-username:hover:not(.active){outline:0;color:#fff;background-color:#2e3946}.hc-navbar .hc-navbar-username>hc-icon{font-size:12pt;padding-top:2px}.hc-navbar .hc-navbar-username-subtext{color:#c0c5cc}.hc-navbar .hc-navbar-vertical-separator{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.hc-navbar .hc-navbar-vertical-separator::after{content:'|';font-size:18px;color:#fff}.hc-navbar .hc-navbar-more-links{display:inline-block;white-space:nowrap;cursor:pointer;height:100%;box-sizing:border-box;padding:22px 30px 0;text-align:center;color:#ccc;border-bottom:5px solid transparent;-webkit-transition:background-color .25s;transition:background-color .25s}.hc-navbar .hc-navbar-more-links hc-icon{margin-left:5px;vertical-align:top;margin-top:1px;font-size:13px!important}.hc-navbar .hc-navbar-more-links.inactive:hover,.hc-navbar .hc-navbar-more-links:hover:not(.active){outline:0;color:#fff;background-color:#2e3946}.hc-navbar .hc-navbar-more-links:before{display:block;content:attr(title);font-weight:600;height:1px;color:transparent;overflow:hidden;visibility:hidden;margin-bottom:-1px}.hc-navbar .hc-navbar-mobile-menu{background-color:#262f34;color:#d7dde4;width:55px;flex-basis:auto;height:100%;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;margin-left:auto;cursor:pointer;display:none}.hc-navbar .hc-navbar-mobile-menu hc-icon{font-size:25px!important;height:25px!important;width:25px!important}@media (max-width:768px){.hc-navbar .hc-navbar-mobile-menu{display:-webkit-box;display:flex}}"]
                }] }
    ];
    /** @nocollapse */
    NavbarComponent.ctorParameters = function () { return [
        { type: ChangeDetectorRef }
    ]; };
    NavbarComponent.propDecorators = {
        user: [{ type: Input }],
        appIcon: [{ type: Input }],
        brandIcon: [{ type: Input }],
        homeUri: [{ type: Input }],
        fixedTop: [{ type: Input }],
        _mobileMenu: [{ type: ContentChildren, args: [NavbarMobileMenuComponent,] }],
        _navLinks: [{ type: ContentChildren, args: [NavbarLinkComponent,] }],
        navbarContent: [{ type: ViewChild, args: ['navbar', { static: false },] }],
        navContent: [{ type: ViewChild, args: ['navlinks', { static: false },] }],
        _navbarMore: [{ type: ViewChild, args: ['moreLink', { static: false },] }],
        _navResize: [{ type: HostListener, args: ['window:resize',] }]
    };
    return NavbarComponent;
}());
export { NavbarComponent };
if (false) {
    /**
     * Display name of current user
     * @type {?}
     */
    NavbarComponent.prototype.user;
    /**
     * Url to application logo image file
     * @type {?}
     */
    NavbarComponent.prototype.appIcon;
    /**
     * Either url to brand icon image file or HcIcon object for a font glyph
     * @type {?}
     */
    NavbarComponent.prototype.brandIcon;
    /**
     * Router link triggered when home icon is clicked
     * @type {?}
     */
    NavbarComponent.prototype.homeUri;
    /**
     * Fixes the position of navbar to the top of the page. *Default is false.*
     * @type {?}
     */
    NavbarComponent.prototype.fixedTop;
    /** @type {?} */
    NavbarComponent.prototype._mobileMenu;
    /** @type {?} */
    NavbarComponent.prototype._navLinks;
    /** @type {?} */
    NavbarComponent.prototype.navbarContent;
    /** @type {?} */
    NavbarComponent.prototype.navContent;
    /** @type {?} */
    NavbarComponent.prototype._navbarMore;
    /**
     * @type {?}
     * @private
     */
    NavbarComponent.prototype.unsubscribe$;
    /**
     * @type {?}
     * @private
     */
    NavbarComponent.prototype._menuOpen;
    /**
     * @type {?}
     * @private
     */
    NavbarComponent.prototype._linkWidths;
    /**
     * @type {?}
     * @private
     */
    NavbarComponent.prototype._linksTotalWidth;
    /** @type {?} */
    NavbarComponent.prototype._collapse;
    /** @type {?} */
    NavbarComponent.prototype._moreList;
    /**
     * @type {?}
     * @private
     */
    NavbarComponent.prototype.ref;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmF2YmFyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BoZWFsdGhjYXRhbHlzdC9jYXNobWVyZS8iLCJzb3VyY2VzIjpbImxpYi9uYXZiYXIvbmF2YmFyLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFFSCxpQkFBaUIsRUFDakIsU0FBUyxFQUNULGVBQWUsRUFDZixVQUFVLEVBQ1YsWUFBWSxFQUNaLEtBQUssRUFDTCxTQUFTLEVBQ1QsU0FBUyxFQUNULGlCQUFpQixFQUVwQixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUMsd0JBQXdCLEVBQUMsTUFBTSw0Q0FBNEMsQ0FBQztBQUVwRixPQUFPLEVBQUMsbUJBQW1CLEVBQUMsTUFBTSxxQ0FBcUMsQ0FBQztBQUN4RSxPQUFPLEVBQUMseUJBQXlCLEVBQUMsTUFBTSxtREFBbUQsQ0FBQztBQUM1RixPQUFPLEVBQUMsT0FBTyxFQUFDLE1BQU0sTUFBTSxDQUFDO0FBQzdCLE9BQU8sRUFBQyxTQUFTLEVBQUMsTUFBTSxnQkFBZ0IsQ0FBQzs7OztBQUl6QztJQWtGSSx5QkFBb0IsR0FBc0I7UUFBdEIsUUFBRyxHQUFILEdBQUcsQ0FBbUI7Ozs7UUF6RTFDLFNBQUksR0FBVyxFQUFFLENBQUM7Ozs7UUFJbEIsWUFBTyxHQUFXLEVBQUUsQ0FBQzs7OztRQUlyQixjQUFTLEdBQW9CLEVBQUUsQ0FBQzs7OztRQUloQyxZQUFPLEdBQW1CLEVBQUUsQ0FBQzs7OztRQUk3QixhQUFRLEdBQVksS0FBSyxDQUFDO1FBY2xCLGlCQUFZLEdBQUcsSUFBSSxPQUFPLEVBQVEsQ0FBQztRQUVuQyxjQUFTLEdBQVksS0FBSyxDQUFDO1FBQzNCLGdCQUFXLEdBQWtCLEVBQUUsQ0FBQztRQUNoQyxxQkFBZ0IsR0FBVyxDQUFDLENBQUM7UUFDOUIsY0FBUyxHQUFZLEtBQUssQ0FBQztRQUMzQixjQUFTLEdBQW9CLEVBQUUsQ0FBQztJQXFDTSxDQUFDOzs7O0lBbEM5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S0M7U0F4S1ksZUFBZTs7Ozs7O0lBRXhCLCtCQUNrQjs7Ozs7SUFHbEIsa0NBQ3FCOzs7OztJQUdyQixvQ0FDZ0M7Ozs7O0lBR2hDLGtDQUM2Qjs7Ozs7SUFHN0IsbUNBQzBCOztJQUUxQixzQ0FDa0Q7O0lBRWxELG9DQUMwQzs7SUFFMUMsd0NBQWdFOztJQUNoRSxxQ0FBK0Q7O0lBRS9ELHNDQUNzQzs7Ozs7SUFFdEMsdUNBQTJDOzs7OztJQUUzQyxvQ0FBbUM7Ozs7O0lBQ25DLHNDQUF3Qzs7Ozs7SUFDeEMsMkNBQXFDOztJQUNyQyxvQ0FBa0M7O0lBQ2xDLG9DQUF1Qzs7Ozs7SUFxQzNCLDhCQUE4QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gICAgQWZ0ZXJWaWV3SW5pdCxcbiAgICBDaGFuZ2VEZXRlY3RvclJlZixcbiAgICBDb21wb25lbnQsXG4gICAgQ29udGVudENoaWxkcmVuLFxuICAgIEVsZW1lbnRSZWYsXG4gICAgSG9zdExpc3RlbmVyLFxuICAgIElucHV0LFxuICAgIFF1ZXJ5TGlzdCxcbiAgICBWaWV3Q2hpbGQsXG4gICAgVmlld0VuY2Fwc3VsYXRpb24sXG4gICAgT25EZXN0cm95XG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtIY1BvcG92ZXJBbmNob3JEaXJlY3RpdmV9IGZyb20gJy4uL3BvcC9kaXJlY3RpdmVzL3BvcG92ZXItYW5jaG9yLmRpcmVjdGl2ZSc7XG5pbXBvcnQge01vcmVJdGVtfSBmcm9tICcuL21vcmUtaXRlbSc7XG5pbXBvcnQge05hdmJhckxpbmtDb21wb25lbnR9IGZyb20gJy4vbmF2YmFyLWxpbmsvbmF2YmFyLWxpbmsuY29tcG9uZW50JztcbmltcG9ydCB7TmF2YmFyTW9iaWxlTWVudUNvbXBvbmVudH0gZnJvbSAnLi9uYXZiYXItbW9iaWxlLW1lbnUvbmF2YmFyLW1vYmlsZS1tZW51LmNvbXBvbmVudCc7XG5pbXBvcnQge1N1YmplY3R9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHt0YWtlVW50aWx9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7SGNJY29ufSBmcm9tICcuLi9pY29uL2ljb24uY29tcG9uZW50JztcblxuLyoqIFRoZSBuYXZiYXIgaXMgYSB3cmFwcGVyIHRoYXQgcG9zaXRpb25zIGJyYW5kaW5nLCBuYXZpZ2F0aW9uLCBhbmQgb3RoZXIgZWxlbWVudHMgaW4gYSBjb25jaXNlIGhlYWRlci4gKi9cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnaGMtbmF2YmFyJyxcbiAgICB0ZW1wbGF0ZVVybDogJy4vbmF2YmFyLmNvbXBvbmVudC5odG1sJyxcbiAgICBzdHlsZVVybHM6IFsnLi9uYXZiYXIuY29tcG9uZW50LnNjc3MnXSxcbiAgICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lXG59KVxuZXhwb3J0IGNsYXNzIE5hdmJhckNvbXBvbmVudCBpbXBsZW1lbnRzIEFmdGVyVmlld0luaXQsIE9uRGVzdHJveSB7XG4gICAgLyoqIERpc3BsYXkgbmFtZSBvZiBjdXJyZW50IHVzZXIgKi9cbiAgICBASW5wdXQoKVxuICAgIHVzZXI6IHN0cmluZyA9ICcnO1xuXG4gICAgLyoqIFVybCB0byBhcHBsaWNhdGlvbiBsb2dvIGltYWdlIGZpbGUgKi9cbiAgICBASW5wdXQoKVxuICAgIGFwcEljb246IHN0cmluZyA9ICcnO1xuXG4gICAgLyoqIEVpdGhlciB1cmwgdG8gYnJhbmQgaWNvbiBpbWFnZSBmaWxlIG9yIEhjSWNvbiBvYmplY3QgZm9yIGEgZm9udCBnbHlwaCAqL1xuICAgIEBJbnB1dCgpXG4gICAgYnJhbmRJY29uOiBzdHJpbmcgfCBIY0ljb24gPSAnJztcblxuICAgIC8qKiBSb3V0ZXIgbGluayB0cmlnZ2VyZWQgd2hlbiBob21lIGljb24gaXMgY2xpY2tlZCAqL1xuICAgIEBJbnB1dCgpXG4gICAgaG9tZVVyaTogYW55W10gfCBzdHJpbmcgPSAnJztcblxuICAgIC8qKiBGaXhlcyB0aGUgcG9zaXRpb24gb2YgbmF2YmFyIHRvIHRoZSB0b3Agb2YgdGhlIHBhZ2UuICpEZWZhdWx0IGlzIGZhbHNlLiogKi9cbiAgICBASW5wdXQoKVxuICAgIGZpeGVkVG9wOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICBAQ29udGVudENoaWxkcmVuKE5hdmJhck1vYmlsZU1lbnVDb21wb25lbnQpXG4gICAgX21vYmlsZU1lbnU6IFF1ZXJ5TGlzdDxOYXZiYXJNb2JpbGVNZW51Q29tcG9uZW50PjtcblxuICAgIEBDb250ZW50Q2hpbGRyZW4oTmF2YmFyTGlua0NvbXBvbmVudClcbiAgICBfbmF2TGlua3M6IFF1ZXJ5TGlzdDxOYXZiYXJMaW5rQ29tcG9uZW50PjtcblxuICAgIEBWaWV3Q2hpbGQoJ25hdmJhcicsIHtzdGF0aWM6IGZhbHNlfSkgbmF2YmFyQ29udGVudDogRWxlbWVudFJlZjtcbiAgICBAVmlld0NoaWxkKCduYXZsaW5rcycsIHtzdGF0aWM6IGZhbHNlfSkgbmF2Q29udGVudDogRWxlbWVudFJlZjtcblxuICAgIEBWaWV3Q2hpbGQoJ21vcmVMaW5rJywge3N0YXRpYzogZmFsc2V9KVxuICAgIF9uYXZiYXJNb3JlOiBIY1BvcG92ZXJBbmNob3JEaXJlY3RpdmU7XG5cbiAgICBwcml2YXRlIHVuc3Vic2NyaWJlJCA9IG5ldyBTdWJqZWN0PHZvaWQ+KCk7XG5cbiAgICBwcml2YXRlIF9tZW51T3BlbjogYm9vbGVhbiA9IGZhbHNlO1xuICAgIHByaXZhdGUgX2xpbmtXaWR0aHM6IEFycmF5PG51bWJlcj4gPSBbXTtcbiAgICBwcml2YXRlIF9saW5rc1RvdGFsV2lkdGg6IG51bWJlciA9IDA7XG4gICAgcHVibGljIF9jb2xsYXBzZTogYm9vbGVhbiA9IGZhbHNlO1xuICAgIHB1YmxpYyBfbW9yZUxpc3Q6IEFycmF5PE1vcmVJdGVtPiA9IFtdO1xuXG4gICAgQEhvc3RMaXN0ZW5lcignd2luZG93OnJlc2l6ZScpXG4gICAgX25hdlJlc2l6ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuX25hdmJhck1vcmUpIHtcbiAgICAgICAgICAgIHRoaXMuX25hdmJhck1vcmUuY2xvc2VQb3BvdmVyKCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9tb3JlTGlzdCA9IFtdO1xuICAgICAgICB0aGlzLl9jb2xsYXBzZSA9IGZhbHNlO1xuXG4gICAgICAgIC8vIElmIGxpbmtzIGlzIHplcm8gdGhlIHBhZ2UgaXMgc21hbGxlciB0aGFuIHRoZSBmaXJzdCByZXNwb25zaXZlIGJyZWFrcG9pbnRcbiAgICAgICAgaWYgKHRoaXMubmF2YmFyQ29udGVudC5uYXRpdmVFbGVtZW50LmNsaWVudFdpZHRoIDw9IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBsaW5rc0NvbnRhaW5lcldpZHRoOiBudW1iZXIgPSB0aGlzLm5hdkNvbnRlbnQubmF0aXZlRWxlbWVudC5vZmZzZXRXaWR0aDtcbiAgICAgICAgbGV0IGN1ckxpbmtzOiBudW1iZXIgPSAwO1xuXG4gICAgICAgIC8vIFN0ZXAgdGhyb3VnaCB0aGUgbGlua3MgdW50aWwgd2UgaGl0IHRoZSBlbmQgb2YgdGhlIGNvbnRhaW5lciwgdGhlbiBjb2xsYXBzZSB0aGVcbiAgICAgICAgLy8gcmVtYWluaW5nIGludG8gYSBtb3JlIG1lbnVcbiAgICAgICAgdGhpcy5fbmF2TGlua3MuZm9yRWFjaCgodCwgaSkgPT4ge1xuICAgICAgICAgICAgY3VyTGlua3MgKz0gdGhpcy5fbGlua1dpZHRoc1tpXTtcblxuICAgICAgICAgICAgbGV0IG1vcmVXaWR0aDogbnVtYmVyID0gdGhpcy5fbGlua3NUb3RhbFdpZHRoID4gbGlua3NDb250YWluZXJXaWR0aCA/IDExNiA6IDA7XG4gICAgICAgICAgICBpZiAoY3VyTGlua3MgKyBtb3JlV2lkdGggPCBsaW5rc0NvbnRhaW5lcldpZHRoKSB7XG4gICAgICAgICAgICAgICAgdC5zaG93KCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHQuaGlkZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2NvbGxhcHNlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLl9tb3JlTGlzdC5wdXNoKHtuYW1lOiB0LmxpbmtUZXh0LCB1cmk6IHQudXJpfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMucmVmLmRldGVjdENoYW5nZXMoKTtcbiAgICB9XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlZjogQ2hhbmdlRGV0ZWN0b3JSZWYpIHt9XG5cbiAgICAvKiogRm9yY2VzIGEgcmVjYWxjdWxhdGlvbiBvZiB0aGUgbmF2YmFyIGxpbmtzIHRvIGRldGVybWluZSBob3cgbWFueSBzaG91bGQgYmUgcm9sbGluZyBpbnRvIGEgTW9yZSBtZW51LlxuICAgICAqIENhbGwgdGhpcyBpZiB5b3UndmUgdXBkYXRlZCB0aGUgY29udGVudHMgb2YgYW55IG5hdmJhciBsaW5rcy4gKi9cbiAgICByZWZyZXNoTmF2TGlua3MoKSB7XG4gICAgICAgIHRoaXMuX2NvbGxlY3ROYXZMaW5rV2lkdGhzKCk7XG4gICAgICAgIHRoaXMuX25hdlJlc2l6ZSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2NvbGxlY3ROYXZMaW5rV2lkdGhzKCkge1xuICAgICAgICB0aGlzLl9saW5rV2lkdGhzID0gW107XG4gICAgICAgIHRoaXMuX2xpbmtzVG90YWxXaWR0aCA9IDA7XG4gICAgICAgIHRoaXMuX25hdkxpbmtzLmZvckVhY2godCA9PiB7XG4gICAgICAgICAgICBjb25zdCBpc0hpZGRlbiA9IHQuX2hpZGRlbjtcbiAgICAgICAgICAgIHQuc2hvdygpO1xuICAgICAgICAgICAgdGhpcy5fbGlua3NUb3RhbFdpZHRoICs9IHQuX2dldFdpZHRoKCk7XG4gICAgICAgICAgICB0aGlzLl9saW5rV2lkdGhzLnB1c2godC5fZ2V0V2lkdGgoKSk7XG4gICAgICAgICAgICBpZiAoaXNIaWRkZW4pIHtcbiAgICAgICAgICAgICAgICB0LmhpZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgbmdBZnRlclZpZXdJbml0KCkge1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaE5hdkxpbmtzKCk7XG4gICAgICAgIH0sIDEwMCk7XG5cbiAgICAgICAgLy8gSWYgbGlua3MgYXJlIGFkZGVkIGR5bmFtaWNhbGx5LCByZWNoZWNrIHRoZSBuYXZiYXIgbGluayBzaXppbmdcbiAgICAgICAgdGhpcy5fbmF2TGlua3MuY2hhbmdlcy5waXBlKHRha2VVbnRpbCh0aGlzLnVuc3Vic2NyaWJlJCkpLnN1YnNjcmliZSgoKSA9PiB0aGlzLnJlZnJlc2hOYXZMaW5rcygpKTtcbiAgICB9XG5cbiAgICBuZ09uRGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZSQubmV4dCgpO1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlJC5jb21wbGV0ZSgpO1xuICAgIH1cblxuICAgIF90b2dnbGVNb2JpbGVNZW51KCkge1xuICAgICAgICBpZiAodGhpcy5fbWVudU9wZW4pIHtcbiAgICAgICAgICAgIHRoaXMuX21vYmlsZU1lbnUuZmlyc3QuaGlkZSgpO1xuICAgICAgICAgICAgdGhpcy5fbWVudU9wZW4gPSBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX21vYmlsZU1lbnUuZmlyc3Quc2hvdygpO1xuICAgICAgICAgICAgdGhpcy5fbWVudU9wZW4gPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgX21lbnVDbGljayhldmVudDogYW55KSB7XG4gICAgICAgIGxldCBjbGlja1RhcmdldDogc3RyaW5nID0gZXZlbnQudGFyZ2V0Lm91dGVySFRNTDtcblxuICAgICAgICAvLyBWZXJpZnkgdGhhdCB0aGUgY2xpY2sgaW4gdGhlIG1vYmlsZSBtZW51IGNhbWUgZnJvbSBhIG5hdmlnYXRpb24gaXRlbVxuICAgICAgICBpZiAoY2xpY2tUYXJnZXQuaW5kZXhPZignaGNsaXN0bGluZScpID49IDAgJiYgY2xpY2tUYXJnZXQuaW5kZXhPZignbWVudS1kcm9wZG93bicpID09PSAtMSkge1xuICAgICAgICAgICAgdGhpcy5fdG9nZ2xlTW9iaWxlTWVudSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0IF9tb2JpbGVNZW51SWNvbigpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5fbWVudU9wZW4gPyAnZmEtdGltZXMnIDogJ2ZhLWJhcnMnO1xuICAgIH1cblxuICAgIF9tb3JlQ2xpY2soKSB7XG4gICAgICAgIGlmICh0aGlzLl9uYXZiYXJNb3JlKSB7XG4gICAgICAgICAgICB0aGlzLl9uYXZiYXJNb3JlLmNsb3NlUG9wb3ZlcigpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgX2JyYW5kSWNvblR5cGUoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiB0aGlzLmJyYW5kSWNvbjtcbiAgICB9XG5cbiAgICBfYnJhbmRJY29uU2V0KCk6IHN0cmluZyB7XG4gICAgICAgIGlmICh0aGlzLmJyYW5kSWNvbiAmJiB0eXBlb2YgdGhpcy5icmFuZEljb24gIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5icmFuZEljb24uZm9udFNldDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9icmFuZEljb25HbHlwaCgpOiBzdHJpbmcge1xuICAgICAgICBpZiAodGhpcy5icmFuZEljb24gJiYgdHlwZW9mIHRoaXMuYnJhbmRJY29uICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYnJhbmRJY29uLmZvbnRJY29uO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgX2JyYW5kSWNvblNpemUoKTogc3RyaW5nIHtcbiAgICAgICAgaWYgKHRoaXMuYnJhbmRJY29uICYmIHR5cGVvZiB0aGlzLmJyYW5kSWNvbiAhPT0gJ3N0cmluZycgJiYgdGhpcy5icmFuZEljb24uZm9udFNpemUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmJyYW5kSWNvbi5mb250U2l6ZSArICdweCc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICczN3B4JztcbiAgICB9XG59XG4iXX0=