/**
 * @fileoverview added by tsickle
 * Generated from: lib/app-switcher/app-switcher.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { takeUntil } from 'rxjs/operators';
import { Component, Inject, Input, ViewEncapsulation } from '@angular/core';
import { Subject } from 'rxjs';
import { APP_SWITCHER_SERVICE } from './app-switcher-interfaces';
import { WorkTrackerService } from '../shared/work-tracker.service';
var AppSwitcherComponent = /** @class */ (function () {
    function AppSwitcherComponent(appSwitcherService, workTracker) {
        this.appSwitcherService = appSwitcherService;
        this.workTracker = workTracker;
        this.brandBg = 'brand';
        this.loadFailed = false;
        this._iconHeight = 60;
        this._serviceName = '';
        this._version = '';
        this.ngUnsubscribe = new Subject();
    }
    Object.defineProperty(AppSwitcherComponent.prototype, "iconHeight", {
        /** Sets the height of the app thumbnail icons, width is auto (defaults to 100px) */
        get: /**
         * Sets the height of the app thumbnail icons, width is auto (defaults to 100px)
         * @return {?}
         */
        function () {
            return this._iconHeight;
        },
        set: /**
         * @param {?} heightVal
         * @return {?}
         */
        function (heightVal) {
            this._iconHeight = heightVal;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AppSwitcherComponent.prototype, "serviceName", {
        get: /**
         * @return {?}
         */
        function () {
            return this._serviceName;
        },
        set: /**
         * @param {?} serviceNameVal
         * @return {?}
         */
        function (serviceNameVal) {
            this._serviceName = serviceNameVal;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AppSwitcherComponent.prototype, "serviceVersion", {
        get: /**
         * @return {?}
         */
        function () {
            return this._version;
        },
        set: /**
         * @param {?} serviceVersionVal
         * @return {?}
         */
        function (serviceVersionVal) {
            this._version = "" + serviceVersionVal;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    AppSwitcherComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.loadApplications();
    };
    /**
     * @return {?}
     */
    AppSwitcherComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.ngUnsubscribe.next();
        this.ngUnsubscribe.complete();
    };
    /**
     * @return {?}
     */
    AppSwitcherComponent.prototype.loadApplications = /**
     * @return {?}
     */
    function () {
        try {
            this.loadApplicationFromDiscoveryService();
        }
        catch (error) {
            this.handleError(error);
        }
    };
    /**
     * @private
     * @return {?}
     */
    AppSwitcherComponent.prototype.loadApplicationFromDiscoveryService = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        this.loading = this.workTracker.startObservable((/**
         * @return {?}
         */
        function () {
            return _this.appSwitcherService
                .getApplications()
                .pipe(takeUntil(_this.ngUnsubscribe))
                .subscribe((/**
             * @param {?} response
             * @return {?}
             */
            function (response) {
                _this.applications = response.value;
            }), (/**
             * @param {?} error
             * @return {?}
             */
            function (error) {
                _this.handleError(error);
            }));
        }));
    };
    /**
     * @private
     * @param {?} error
     * @return {?}
     */
    AppSwitcherComponent.prototype.handleError = /**
     * @private
     * @param {?} error
     * @return {?}
     */
    function (error) {
        console.error('Failed to load applications from the app switcher service.', error);
        this.loadFailed = true;
    };
    /**
     * @param {?} app
     * @return {?}
     */
    AppSwitcherComponent.prototype.linkIfNotMe = /**
     * @param {?} app
     * @return {?}
     */
    function (app) {
        return this.appIsMe(app) ? null : app.ServiceUrl;
    };
    /**
     * @param {?} app
     * @return {?}
     */
    AppSwitcherComponent.prototype.appIsMe = /**
     * @param {?} app
     * @return {?}
     */
    function (app) {
        return app.ServiceName === this.serviceName && "" + app.Version === this.serviceVersion;
    };
    AppSwitcherComponent.decorators = [
        { type: Component, args: [{
                    selector: 'hc-app-switcher',
                    template: "<div class=\"hc-app-switcher\">\n    <h4 class=\"hc-app-switcher-header\">\n        Applications\n        <a\n            hc-button\n            *ngIf=\"appSwitcherService.allApplicationsUri\"\n            buttonStyle=\"link-inline\"\n            class=\"hc-app-switcher-all-apps-link\"\n            [href]=\"appSwitcherService.allApplicationsUri\"\n            target=\"_blank\"\n        >\n            View All\n        </a>\n    </h4>\n\n    <ng-container *ngIf=\"applications?.length > 0\">\n        <div class=\"hc-app-switcher-apps\">\n            <div class=\"hc-app-switcher-app\" *ngFor=\"let app of applications\">\n                <a\n                    class=\"hc-app-switcher-link\"\n                    [ngClass]=\"{'hc-app-switcher-link-highlighted': appIsMe(app)}\"\n                    [title]=\"appIsMe(app) ? 'Current Application' : app.Description\"\n                    [attr.href]=\"linkIfNotMe(app)\"\n                    target=\"_blank\"\n                >\n                    <div\n                        class=\"hc-app-switcher-app-img\"\n                        [ngStyle]=\"{\n                            width: iconHeight + 'px',\n                            height: iconHeight + 'px',\n                            'background-image': 'url(' + app.Icon + ')'\n                        }\"\n                    ></div>\n                    <div class=\"hc-app-switcher-app-title\">{{ app?.FriendlyName | ellipsis: 18 }}</div>\n                </a>\n            </div>\n        </div>\n    </ng-container>\n\n    <!-- Loading -->\n    <div *ngIf=\"loading | async\" class=\"hc-app-switcher-empty hc-app-switcher-spinner-container\">\n        <hc-progress-spinner diameter=\"60\"></hc-progress-spinner>\n    </div>\n\n    <!-- Load Failed -->\n    <div *ngIf=\"!(loading | async) && loadFailed\" class=\"hc-app-switcher-empty\">\n        <span class=\"hc-app-switcher-warning-icon\"></span>\n        <em>Failed to load applications.</em>\n        <a class=\"hc-app-switcher-retry\" hc-button buttonStyle=\"link\" (click)=\"loadApplications()\">Retry now.</a>\n    </div>\n\n    <!-- No Apps Available -->\n    <div *ngIf=\"!(loading | async) && applications?.length === 0\" class=\"hc-app-switcher-empty\">\n        <span class=\"hc-app-switcher-empty-icon\"></span>\n        <em>No applications available.</em>\n    </div>\n</div>\n",
                    // tslint:disable-next-line: no-host-metadata-property
                    host: { class: 'hc-app-switcher-container' },
                    encapsulation: ViewEncapsulation.None,
                    styles: [".hc-app-switcher-container{height:100%;width:100%}.hc-app-switcher{max-width:360px}.hc-app-switcher-header{-webkit-box-align:baseline;align-items:baseline;border-bottom:1px solid #ccc;display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between;margin:10px 0;padding-bottom:5px;padding-left:2px}.hc-app-switcher-all-apps-link{font-size:.92857rem}.hc-app-switcher-apps{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-flow:row wrap;-webkit-box-pack:start;justify-content:flex-start}.hc-app-switcher-app{-webkit-box-flex:0;flex:0 0 auto}.hc-app-switcher-link{-webkit-box-align:center;align-items:center;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;padding:10px;text-decoration:none}.hc-app-switcher-link-highlighted{opacity:.5}.hc-app-switcher-app-title{color:#333;font-weight:600;padding-top:8px;text-align:center;width:100px}.hc-app-switcher-app-img{background-position:center;background-repeat:no-repeat;background-size:cover}.hc-app-switcher-empty{-webkit-box-align:center;align-items:center;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;padding:20px;text-align:center;width:360px}.hc-app-switcher-spinner-container{padding:65px 0}.hc-app-switcher-warning-icon{background-repeat:no-repeat;height:40px;opacity:.5;width:40px;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMC4xLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHZpZXdCb3g9IjAgMCA3OS41IDcwLjEiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDc5LjUgNzAuMTsiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPHRpdGxlPndhcm48L3RpdGxlPg0KPHBhdGggZD0iTTc4LjgsNjIuOEw0NCwyLjRjLTEuMy0yLjMtNC4zLTMuMS02LjctMS44Yy0wLjcsMC40LTEuNCwxLTEuOCwxLjhMMC43LDYyLjhjLTEuMywyLjMtMC41LDUuMywxLjgsNi43DQoJYzAuNywwLjQsMS42LDAuNywyLjQsMC43aDY5LjdjMi43LDAsNC45LTIuMiw0LjktNC45Qzc5LjUsNjQuNCw3OS4yLDYzLjUsNzguOCw2Mi44eiBNMzUuMiwyMC43aDkuMnYyNS43aC05LjJWMjAuN3ogTTM5LjcsNjAuOA0KCWMtMy4xLDAtNS42LTIuNS01LjYtNS42YzAtMy4xLDIuNS01LjYsNS42LTUuNmMzLjEsMCw1LjYsMi41LDUuNiw1LjZDNDUuNCw1OC4yLDQyLjgsNjAuOCwzOS43LDYwLjh6Ii8+DQo8L3N2Zz4NCg==)}.hc-app-switcher-empty-icon{background-repeat:no-repeat;height:40px;opacity:.5;width:40px;background-image:url(data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA5Ni45OSA4NC4xNSI+PHRpdGxlPmVtcHR5PC90aXRsZT48cGF0aCBkPSJNODcuMTQsMTEuNjVhNS41NCw1LjU0LDAsMCwwLTUtMy41N0gxOGE1LjU0LDUuNTQsMCwwLDAtNSwzLjU3TDEuNTYsNTIuM1Y4OC42N2EzLjU3LDMuNTcsMCwwLDAsMy41NywzLjU3SDk1YTMuNTcsMy41NywwLDAsMCwzLjU3LTMuNTdWNTIuM1pNODUuNzIsNTMuNzJINjguNnMtMi4xNC4xOC0yLjE0LDMuNTdsMC0uMDhhMTYuMzgsMTYuMzgsMCwwLDEtMzIuNzQsMGwwLC4wOGMwLTMuMzktMi4xNC0zLjU2LTIuMTQtMy41NkgxNC40Yy01LjcxLDAtMy41Ny01LTMuNTctNWw4LjU2LTMxLjM4QTMuODEsMy44MSwwLDAsMSwyMywxNC41SDc3Ljg3YTMuNzcsMy43NywwLDAsMSwzLjU3LDIuNzlsNy44NSwzMS4zMlM5MS40Miw1My43Miw4NS43Miw1My43MloiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xLjU2IC04LjA4KSIvPjwvc3ZnPg==)}.hc-app-switcher-retry{cursor:pointer;font-weight:600;margin-top:10px}"]
                }] }
    ];
    /** @nocollapse */
    AppSwitcherComponent.ctorParameters = function () { return [
        { type: undefined, decorators: [{ type: Inject, args: [APP_SWITCHER_SERVICE,] }] },
        { type: WorkTrackerService }
    ]; };
    AppSwitcherComponent.propDecorators = {
        iconHeight: [{ type: Input }],
        serviceName: [{ type: Input }],
        serviceVersion: [{ type: Input }]
    };
    return AppSwitcherComponent;
}());
export { AppSwitcherComponent };
if (false) {
    /** @type {?} */
    AppSwitcherComponent.prototype.applications;
    /** @type {?} */
    AppSwitcherComponent.prototype.subscription;
    /** @type {?} */
    AppSwitcherComponent.prototype.brandBg;
    /** @type {?} */
    AppSwitcherComponent.prototype.loading;
    /** @type {?} */
    AppSwitcherComponent.prototype.loadFailed;
    /**
     * @type {?}
     * @private
     */
    AppSwitcherComponent.prototype._iconHeight;
    /**
     * @type {?}
     * @private
     */
    AppSwitcherComponent.prototype._serviceName;
    /**
     * @type {?}
     * @private
     */
    AppSwitcherComponent.prototype._version;
    /**
     * @type {?}
     * @private
     */
    AppSwitcherComponent.prototype.ngUnsubscribe;
    /** @type {?} */
    AppSwitcherComponent.prototype.appSwitcherService;
    /**
     * @type {?}
     * @private
     */
    AppSwitcherComponent.prototype.workTracker;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwLXN3aXRjaGVyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BoZWFsdGhjYXRhbHlzdC9jYXNobWVyZS8iLCJzb3VyY2VzIjpbImxpYi9hcHAtc3dpdGNoZXIvYXBwLXN3aXRjaGVyLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBQyxTQUFTLEVBQUMsTUFBTSxnQkFBZ0IsQ0FBQztBQUN6QyxPQUFPLEVBQUMsU0FBUyxFQUFFLE1BQU0sRUFBcUIsS0FBSyxFQUFFLGlCQUFpQixFQUFDLE1BQU0sZUFBZSxDQUFDO0FBQzdGLE9BQU8sRUFBQyxPQUFPLEVBQTJCLE1BQU0sTUFBTSxDQUFDO0FBRXZELE9BQU8sRUFBNkMsb0JBQW9CLEVBQUMsTUFBTSwyQkFBMkIsQ0FBQztBQUMzRyxPQUFPLEVBQUMsa0JBQWtCLEVBQUMsTUFBTSxnQ0FBZ0MsQ0FBQztBQUVsRTtJQThDSSw4QkFBaUQsa0JBQXVDLEVBQVUsV0FBK0I7UUFBaEYsdUJBQWtCLEdBQWxCLGtCQUFrQixDQUFxQjtRQUFVLGdCQUFXLEdBQVgsV0FBVyxDQUFvQjtRQW5DMUgsWUFBTyxHQUFHLE9BQU8sQ0FBQztRQUVsQixlQUFVLEdBQUcsS0FBSyxDQUFDO1FBQ2xCLGdCQUFXLEdBQVcsRUFBRSxDQUFDO1FBQ3pCLGlCQUFZLEdBQVcsRUFBRSxDQUFDO1FBQzFCLGFBQVEsR0FBVyxFQUFFLENBQUM7UUFFdEIsa0JBQWEsR0FBUSxJQUFJLE9BQU8sRUFBRSxDQUFDO0lBNEJ5RixDQUFDO0lBekJySSxzQkFDSSw0Q0FBVTtRQUZkLG9GQUFvRjs7Ozs7UUFDcEY7WUFFSSxPQUFPLElBQUksQ0FBQyxXQUFXLENBQUM7UUFDNUIsQ0FBQzs7Ozs7UUFFRCxVQUFlLFNBQWlCO1lBQzVCLElBQUksQ0FBQyxXQUFXLEdBQUcsU0FBUyxDQUFDO1FBQ2pDLENBQUM7OztPQUpBO0lBTUQsc0JBQ0ksNkNBQVc7Ozs7UUFEZjtZQUVJLE9BQU8sSUFB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SUFBRSwyQ0FBdUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge3Rha2VVbnRpbH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHtDb21wb25lbnQsIEluamVjdCwgT25EZXN0cm95LCBPbkluaXQsIElucHV0LCBWaWV3RW5jYXBzdWxhdGlvbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge1N1YmplY3QsIFN1YnNjcmlwdGlvbiwgT2JzZXJ2YWJsZX0gZnJvbSAncnhqcyc7XG5cbmltcG9ydCB7SUFwcFN3aXRjaGVyU2VydmljZSwgSURpc2NvdmVyeUFwcGxpY2F0aW9uLCBBUFBfU1dJVENIRVJfU0VSVklDRX0gZnJvbSAnLi9hcHAtc3dpdGNoZXItaW50ZXJmYWNlcyc7XG5pbXBvcnQge1dvcmtUcmFja2VyU2VydmljZX0gZnJvbSAnLi4vc2hhcmVkL3dvcmstdHJhY2tlci5zZXJ2aWNlJztcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICdoYy1hcHAtc3dpdGNoZXInLFxuICAgIHRlbXBsYXRlVXJsOiAnLi9hcHAtc3dpdGNoZXIuY29tcG9uZW50Lmh0bWwnLFxuICAgIHN0eWxlVXJsczogWycuL2FwcC1zd2l0Y2hlci5jb21wb25lbnQuc2NzcyddLFxuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTogbm8taG9zdC1tZXRhZGF0YS1wcm9wZXJ0eVxuICAgIGhvc3Q6IHtjbGFzczogJ2hjLWFwcC1zd2l0Y2hlci1jb250YWluZXInfSxcbiAgICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lXG59KVxuZXhwb3J0IGNsYXNzIEFwcFN3aXRjaGVyQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkRlc3Ryb3kge1xuICAgIHB1YmxpYyBhcHBsaWNhdGlvbnM6IElEaXNjb3ZlcnlBcHBsaWNhdGlvbltdO1xuICAgIHB1YmxpYyBzdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbjtcbiAgICBwdWJsaWMgYnJhbmRCZyA9ICdicmFuZCc7XG4gICAgcHVibGljIGxvYWRpbmc6IE9ic2VydmFibGU8Ym9vbGVhbj47XG4gICAgcHVibGljIGxvYWRGYWlsZWQgPSBmYWxzZTtcbiAgICBwcml2YXRlIF9pY29uSGVpZ2h0OiBudW1iZXIgPSA2MDtcbiAgICBwcml2YXRlIF9zZXJ2aWNlTmFtZTogc3RyaW5nID0gJyc7XG4gICAgcHJpdmF0ZSBfdmVyc2lvbjogc3RyaW5nID0gJyc7XG5cbiAgICBwcml2YXRlIG5nVW5zdWJzY3JpYmU6IGFueSA9IG5ldyBTdWJqZWN0KCk7XG5cbiAgICAvKiogU2V0cyB0aGUgaGVpZ2h0IG9mIHRoZSBhcHAgdGh1bWJuYWlsIGljb25zLCB3aWR0aCBpcyBhdXRvIChkZWZhdWx0cyB0byAxMDBweCkgKi9cbiAgICBASW5wdXQoKVxuICAgIGdldCBpY29uSGVpZ2h0KCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pY29uSGVpZ2h0O1xuICAgIH1cblxuICAgIHNldCBpY29uSGVpZ2h0KGhlaWdodFZhbDogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuX2ljb25IZWlnaHQgPSBoZWlnaHRWYWw7XG4gICAgfVxuXG4gICAgQElucHV0KClcbiAgICBnZXQgc2VydmljZU5hbWUoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlcnZpY2VOYW1lO1xuICAgIH1cblxuICAgIHNldCBzZXJ2aWNlTmFtZShzZXJ2aWNlTmFtZVZhbDogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuX3NlcnZpY2VOYW1lID0gc2VydmljZU5hbWVWYWw7XG4gICAgfVxuICAgIEBJbnB1dCgpXG4gICAgZ2V0IHNlcnZpY2VWZXJzaW9uKCk6IHN0cmluZyB8IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl92ZXJzaW9uO1xuICAgIH1cblxuICAgIHNldCBzZXJ2aWNlVmVyc2lvbihzZXJ2aWNlVmVyc2lvblZhbDogc3RyaW5nIHwgbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuX3ZlcnNpb24gPSBgJHtzZXJ2aWNlVmVyc2lvblZhbH1gO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihASW5qZWN0KEFQUF9TV0lUQ0hFUl9TRVJWSUNFKSBwdWJsaWMgYXBwU3dpdGNoZXJTZXJ2aWNlOiBJQXBwU3dpdGNoZXJTZXJ2aWNlLCBwcml2YXRlIHdvcmtUcmFja2VyOiBXb3JrVHJhY2tlclNlcnZpY2UpIHt9XG5cbiAgICBuZ09uSW5pdCgpIHtcbiAgICAgICAgdGhpcy5sb2FkQXBwbGljYXRpb25zKCk7XG4gICAgfVxuXG4gICAgbmdPbkRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMubmdVbnN1YnNjcmliZS5uZXh0KCk7XG4gICAgICAgIHRoaXMubmdVbnN1YnNjcmliZS5jb21wbGV0ZSgpO1xuICAgIH1cblxuICAgIHB1YmxpYyBsb2FkQXBwbGljYXRpb25zKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5sb2FkQXBwbGljYXRpb25Gcm9tRGlzY292ZXJ5U2VydmljZSgpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGxvYWRBcHBsaWNhdGlvbkZyb21EaXNjb3ZlcnlTZXJ2aWNlKCkge1xuICAgICAgICB0aGlzLmxvYWRpbmcgPSB0aGlzLndvcmtUcmFja2VyLnN0YXJ0T2JzZXJ2YWJsZSgoKSA9PlxuICAgICAgICAgICAgdGhpcy5hcHBTd2l0Y2hlclNlcnZpY2VcbiAgICAgICAgICAgICAgICAuZ2V0QXBwbGljYXRpb25zKClcbiAgICAgICAgICAgICAgICAucGlwZSh0YWtlVW50aWwodGhpcy5uZ1Vuc3Vic2NyaWJlKSlcbiAgICAgICAgICAgICAgICAuc3Vic2NyaWJlKFxuICAgICAgICAgICAgICAgICAgICAocmVzcG9uc2U6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBsaWNhdGlvbnMgPSByZXNwb25zZS52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgKGVycm9yOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlRXJyb3IoZXJyb3I6IGFueSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbG9hZCBhcHBsaWNhdGlvbnMgZnJvbSB0aGUgYXBwIHN3aXRjaGVyIHNlcnZpY2UuJywgZXJyb3IpO1xuICAgICAgICB0aGlzLmxvYWRGYWlsZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIGxpbmtJZk5vdE1lKGFwcCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLmFwcElzTWUoYXBwKSA/IG51bGwgOiBhcHAuU2VydmljZVVybDtcbiAgICB9XG5cbiAgICBhcHBJc01lKGFwcDogSURpc2NvdmVyeUFwcGxpY2F0aW9uKSB7XG4gICAgICAgIHJldHVybiBhcHAuU2VydmljZU5hbWUgPT09IHRoaXMuc2VydmljZU5hbWUgJiYgYCR7YXBwLlZlcnNpb259YCA9PT0gdGhpcy5zZXJ2aWNlVmVyc2lvbjtcbiAgICB9XG59XG4iXX0=