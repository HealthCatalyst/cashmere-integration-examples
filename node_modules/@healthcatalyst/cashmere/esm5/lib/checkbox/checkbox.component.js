/**
 * @fileoverview added by tsickle
 * Generated from: lib/checkbox/checkbox.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Attribute, Component, ElementRef, EventEmitter, forwardRef, HostBinding, Input, Output, Renderer2, ViewChild, ViewEncapsulation, Self, Optional } from '@angular/core';
import { NgForm, FormGroupDirective, NgControl } from '@angular/forms';
import { HcFormControlComponent } from '../form-field/hc-form-control.component';
import { parseBooleanAttribute } from '../util';
/** @type {?} */
var nextCheckboxId = 1;
var CheckboxChangeEvent = /** @class */ (function () {
    function CheckboxChangeEvent(source, checked) {
        this.source = source;
        this.checked = checked;
    }
    return CheckboxChangeEvent;
}());
export { CheckboxChangeEvent };
if (false) {
    /** @type {?} */
    CheckboxChangeEvent.prototype.source;
    /** @type {?} */
    CheckboxChangeEvent.prototype.checked;
}
var CheckboxComponent = /** @class */ (function (_super) {
    tslib_1.__extends(CheckboxComponent, _super);
    function CheckboxComponent(tabindex, _renderer, _elementRef, _parentForm, _parentFormGroup, _ngControl) {
        var _this = _super.call(this) || this;
        _this._renderer = _renderer;
        _this._elementRef = _elementRef;
        _this._ngControl = _ngControl;
        _this._uniqueId = "hc-checkbox-" + nextCheckboxId++;
        _this._checked = false;
        _this._tight = false;
        _this._componentId = _this._uniqueId;
        /**
         * If true, the checkbox is for display purposes (not user interaction). As such its checked/unchecked state
         * can only be controlled programatically. Useful for embedding in an ng-select typeahead
         */
        _this.isStub = false;
        /**
         * Sets the position of the checkbox relative to its associated label. *Defaults to `center`.*
         */
        _this.align = 'center';
        /**
         * Sets unique name used in a form
         */
        _this.name = null;
        /**
         * Event emitted whenever the state changes
         */
        _this.change = new EventEmitter();
        _this._onChangeFunc = (/**
         * @return {?}
         */
        function () { });
        _this._onTouchFunc = (/**
         * @return {?}
         */
        function () { });
        _this.tabIndex = parseInt(tabindex, 10) || 0;
        _this._form = _parentForm || _parentFormGroup;
        if (_this._ngControl != null) {
            _this._ngControl.valueAccessor = _this;
        }
        return _this;
    }
    Object.defineProperty(CheckboxComponent.prototype, "id", {
        /** Unique id for the checkbox element. If none is supplied, one will be auto-generated. */
        get: /**
         * Unique id for the checkbox element. If none is supplied, one will be auto-generated.
         * @return {?}
         */
        function () {
            return this._componentId || this._uniqueId;
        },
        set: /**
         * @param {?} idVal
         * @return {?}
         */
        function (idVal) {
            this._componentId = idVal ? idVal : this._uniqueId;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CheckboxComponent.prototype, "tight", {
        /** If true, condense the default margin and reduce the font size. *Defaults to `false`.*  */
        get: /**
         * If true, condense the default margin and reduce the font size. *Defaults to `false`.*
         * @return {?}
         */
        function () {
            return this._tight;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._tight = parseBooleanAttribute(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CheckboxComponent.prototype, "_getHostId", {
        get: /**
         * @return {?}
         */
        function () {
            return this.id;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CheckboxComponent.prototype, "_getCheckboxCheckedClass", {
        get: /**
         * @return {?}
         */
        function () {
            return this.checked;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CheckboxComponent.prototype, "_getCheckboxDisabledClass", {
        get: /**
         * @return {?}
         */
        function () {
            if (this._ngControl && this._ngControl.disabled) {
                return this._ngControl.disabled;
            }
            return this._isDisabled;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CheckboxComponent.prototype, "_getCheckboxIndeterminateClass", {
        get: /**
         * @return {?}
         */
        function () {
            return this.indeterminate;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CheckboxComponent.prototype, "required", {
        /** Whether the checkbox is required. */
        get: /**
         * Whether the checkbox is required.
         * @return {?}
         */
        function () {
            return this._isRequired;
        },
        set: /**
         * @param {?} requiredVal
         * @return {?}
         */
        function (requiredVal) {
            this._isRequired = parseBooleanAttribute(requiredVal);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CheckboxComponent.prototype, "disabled", {
        /** Whether the checkbox is disabled. */
        get: /**
         * Whether the checkbox is disabled.
         * @return {?}
         */
        function () {
            if (this._ngControl && this._ngControl.disabled) {
                return this._ngControl.disabled;
            }
            return this._isDisabled;
        },
        set: /**
         * @param {?} disabledVal
         * @return {?}
         */
        function (disabledVal) {
            this._isDisabled = parseBooleanAttribute(disabledVal);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CheckboxComponent.prototype, "checked", {
        /** Whether the checkbox is checked. */
        get: /**
         * Whether the checkbox is checked.
         * @return {?}
         */
        function () {
            return this._checked;
        },
        set: /**
         * @param {?} checked
         * @return {?}
         */
        function (checked) {
            if (this._checked === checked) {
                return;
            }
            this._checked = checked;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CheckboxComponent.prototype, "tabIndex", {
        /** TabIndex attribute of native checkbox */
        get: /**
         * TabIndex attribute of native checkbox
         * @return {?}
         */
        function () {
            return this._isDisabled ? -1 : this._tabIndex;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._tabIndex = value == null ? 0 : value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CheckboxComponent.prototype, "_inputId", {
        get: /**
         * @return {?}
         */
        function () {
            return (this.id || this._uniqueId) + "-input";
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} value
     * @return {?}
     */
    CheckboxComponent.prototype.writeValue = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        this.checked = !!value;
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    CheckboxComponent.prototype.registerOnChange = /**
     * @param {?} fn
     * @return {?}
     */
    function (fn) {
        this._onChangeFunc = fn;
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    CheckboxComponent.prototype.registerOnTouched = /**
     * @param {?} fn
     * @return {?}
     */
    function (fn) {
        this._onTouchFunc = fn;
    };
    /**
     * @param {?} disabledVal
     * @return {?}
     */
    CheckboxComponent.prototype.setDisabledState = /**
     * @param {?} disabledVal
     * @return {?}
     */
    function (disabledVal) {
        this.disabled = disabledVal;
        this._renderer.setProperty(this._checkboxInput.nativeElement, 'disabled', disabledVal);
    };
    /** Toggles the current checked state of the checkbox */
    /**
     * Toggles the current checked state of the checkbox
     * @return {?}
     */
    CheckboxComponent.prototype.toggle = /**
     * Toggles the current checked state of the checkbox
     * @return {?}
     */
    function () {
        this.checked = !this.checked;
    };
    /**
     * @param {?} event
     * @return {?}
     */
    CheckboxComponent.prototype._clickEvent = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        event.stopPropagation(); // prevent native click event from being dispatched
        if (!this.disabled) {
            this.toggle();
            this._emitChangeEvent();
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    CheckboxComponent.prototype._stopChangeEvent = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        event.stopPropagation(); // prevent native change event from emitting its own object through output 'change'
    };
    /**
     * @private
     * @return {?}
     */
    CheckboxComponent.prototype._emitChangeEvent = /**
     * @private
     * @return {?}
     */
    function () {
        this._onChangeFunc(this.checked);
        this.change.emit(new CheckboxChangeEvent(this, this.checked));
    };
    /**
     * @return {?}
     */
    CheckboxComponent.prototype._onBlur = /**
     * @return {?}
     */
    function () {
        this._onTouchFunc();
    };
    /**
     * @return {?}
     */
    CheckboxComponent.prototype.ngDoCheck = /**
     * @return {?}
     */
    function () {
        // This needs to be checked every cycle because we can't subscribe to form submissions
        if (this._ngControl) {
            this._updateErrorState();
        }
    };
    /**
     * @private
     * @return {?}
     */
    CheckboxComponent.prototype._updateErrorState = /**
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var oldState = this._errorState;
        // TODO: this could be abstracted out as an @Input() if we need this to be configurable
        /** @type {?} */
        var newState = !!(this._ngControl &&
            this._ngControl.invalid &&
            (this._ngControl.touched || (this._form && this._form.submitted)));
        if (oldState !== newState) {
            this._errorState = newState;
        }
    };
    CheckboxComponent.decorators = [
        { type: Component, args: [{
                    selector: 'hc-checkbox',
                    template: "<div class=\"hc-checkbox-container\" [class.hc-checkbox-stub]=\"isStub\">\n    <div class=\"hc-checkbox-content\" [class.hc-checkbox-tight]=\"tight\" [ngClass]=\"'hc-checkbox-align-'+align\">\n        <input #checkboxInput\n               type=\"checkbox\"\n               [id]=\"_inputId\"\n               [attr.value]=\"value\"\n               [attr.name]=\"name\"\n               [tabIndex]=\"tabIndex\"\n               [indeterminate]=\"indeterminate\"\n               [disabled]=\"disabled\"\n               [required]=\"required\"\n               [checked]=\"checked\"\n               (change)=\"_stopChangeEvent($event)\"\n               (click)=\"_clickEvent($event)\"\n               (blur)=\"_onBlur()\"/>\n        <label class=\"hc-checkbox-overlay\" [attr.for]=\"_inputId\"></label>\n        <label class=\"hc-checkbox-label\" [ngClass]=\"'hc-checkbox-align-label-'+align\" [attr.for]=\"_inputId\">\n            <ng-content></ng-content>\n        </label>\n    </div>\n</div>\n",
                    encapsulation: ViewEncapsulation.None,
                    providers: [{ provide: HcFormControlComponent, useExisting: forwardRef((/**
                             * @return {?}
                             */
                            function () { return CheckboxComponent; })) }],
                    exportAs: 'hcCheckbox',
                    styles: [".hc-checkbox-container{overflow:hidden;display:-webkit-box;display:flex}.hc-checkbox-container input[type=checkbox]{display:none}.hc-checkbox-content{display:-webkit-inline-box;display:inline-flex;cursor:pointer}.hc-checkbox-content label{cursor:pointer}.hc-checkbox-disabled .hc-checkbox-content{color:#ccc;cursor:not-allowed}.hc-checkbox-disabled .hc-checkbox-content label{cursor:not-allowed}.hc-checkbox-align-center{-webkit-box-align:center;align-items:center}.hc-checkbox-align-top{-webkit-box-align:start;align-items:flex-start}.hc-checkbox-align-bottom{-webkit-box-align:end;align-items:flex-end}.hc-checkbox-label{padding:4px 0 4px 34px;line-height:1.5;position:relative;left:-22px}.hc-checkbox-tight .hc-checkbox-label{padding:2px 0 2px 26px;font-size:.92857rem;left:-18px}.hc-checkbox-align-label-top{padding-top:0!important;margin-top:-3px}.hc-checkbox-align-label-bottom{padding-bottom:0!important;margin-bottom:-3px}.hc-checkbox-overlay{position:relative;width:22px;height:22px;min-width:22px;background-color:#fff;border:2px solid #ccc;border-radius:3px}.hc-checkbox-overlay:after{content:'';position:absolute;background-image:url(data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMCAzMCI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiNmZmY7fTwvc3R5bGU+PC9kZWZzPjx0aXRsZT5BcnRib2FyZCAxPC90aXRsZT48cGF0aCBpZD0iUGF0aF8xMjIyMSIgZGF0YS1uYW1lPSJQYXRoIDEyMjIxIiBjbGFzcz0iY2xzLTEiIGQ9Ik0yOCw5Ljc2YTEuNjYsMS42NiwwLDAsMC0uNDYtMS4xNEwyNS4yMyw2LjM1YTEuNjIsMS42MiwwLDAsMC0yLjI4LDBsLTExLDExTDcuMDUsMTIuNDFhMS42MiwxLjYyLDAsMCwwLTIuMjgsMEwyLjQ5LDE0LjY4QTEuNjcsMS42NywwLDAsMCwyLDE1LjgyLDEuNjYsMS42NiwwLDAsMCwyLjQ5LDE3TDguNTUsMjNsMi4yOCwyLjI4YTEuNjEsMS42MSwwLDAsMCwxLjE0LjQ3LDEuNjMsMS42MywwLDAsMCwxLjE0LS40N0wxNS4zOSwyMywyNy41MSwxMC45QTEuNiwxLjYsMCwwLDAsMjgsOS43NloiLz48L3N2Zz4=);top:1px;left:1.5px;width:15.5px;height:15.5px;opacity:0}.hc-checkbox-tight .hc-checkbox-overlay{width:18px;height:18px;min-width:18px}.hc-checkbox-tight .hc-checkbox-overlay:after{top:.5px;left:.5px;width:12.5px;height:12.5px}.hc-checkbox-content:hover .hc-checkbox-overlay{border:2px solid #00aeff}.hc-checkbox-indeterminate .hc-checkbox-overlay:after{opacity:1;top:3.5px;left:3px;width:12px;height:7px;border-bottom:3px solid #ccc;background-image:none}.hc-checkbox-indeterminate .hc-checkbox-tight .hc-checkbox-overlay:after{top:1.5px;width:8px}input[type=checkbox]:checked+.hc-checkbox-overlay{background-color:#00aeff;border-color:#00aeff}input[type=checkbox]:checked+.hc-checkbox-overlay:after{opacity:1}.hc-checkbox-disabled input[type=checkbox]+.hc-checkbox-overlay{background-color:#e0e0e0;border:2px solid #ccc}.hc-form-field-invalid .hc-checkbox-overlay{border-color:#cc2027!important}.hc-checkbox-stub .hc-checkbox-label,.hc-checkbox-stub .hc-checkbox-overlay{pointer-events:none}"]
                }] }
    ];
    /** @nocollapse */
    CheckboxComponent.ctorParameters = function () { return [
        { type: String, decorators: [{ type: Attribute, args: ['tabindex',] }] },
        { type: Renderer2 },
        { type: ElementRef },
        { type: NgForm, decorators: [{ type: Optional }] },
        { type: FormGroupDirective, decorators: [{ type: Optional }] },
        { type: NgControl, decorators: [{ type: Optional }, { type: Self }] }
    ]; };
    CheckboxComponent.propDecorators = {
        value: [{ type: Input }],
        indeterminate: [{ type: Input }],
        isStub: [{ type: Input }],
        id: [{ type: Input }],
        tight: [{ type: Input }],
        align: [{ type: Input }],
        name: [{ type: Input }],
        change: [{ type: Output }],
        _checkboxInput: [{ type: ViewChild, args: ['checkboxInput', { static: true },] }],
        _getHostId: [{ type: HostBinding, args: ['attr.id',] }],
        _getCheckboxCheckedClass: [{ type: HostBinding, args: ['class.hc-checkbox-checked',] }],
        _getCheckboxDisabledClass: [{ type: HostBinding, args: ['class.hc-checkbox-disabled',] }],
        _getCheckboxIndeterminateClass: [{ type: HostBinding, args: ['class.hc-checkbox-indeterminate',] }],
        required: [{ type: Input }],
        disabled: [{ type: Input }],
        checked: [{ type: Input }]
    };
    return CheckboxComponent;
}(HcFormControlComponent));
export { CheckboxComponent };
if (false) {
    /**
     * @type {?}
     * @private
     */
    CheckboxComponent.prototype._uniqueId;
    /**
     * @type {?}
     * @private
     */
    CheckboxComponent.prototype._form;
    /**
     * @type {?}
     * @private
     */
    CheckboxComponent.prototype._checked;
    /**
     * @type {?}
     * @private
     */
    CheckboxComponent.prototype._tabIndex;
    /**
     * @type {?}
     * @private
     */
    CheckboxComponent.prototype._tight;
    /** @type {?} */
    CheckboxComponent.prototype._componentId;
    /**
     * Value attribute of the native checkbox
     * @type {?}
     */
    CheckboxComponent.prototype.value;
    /**
     * Whether the checkbox is indeterminate. It can represent a checkbox with three states.
     * @type {?}
     */
    CheckboxComponent.prototype.indeterminate;
    /**
     * If true, the checkbox is for display purposes (not user interaction). As such its checked/unchecked state
     * can only be controlled programatically. Useful for embedding in an ng-select typeahead
     * @type {?}
     */
    CheckboxComponent.prototype.isStub;
    /**
     * Sets the position of the checkbox relative to its associated label. *Defaults to `center`.*
     * @type {?}
     */
    CheckboxComponent.prototype.align;
    /**
     * Sets unique name used in a form
     * @type {?}
     */
    CheckboxComponent.prototype.name;
    /**
     * Event emitted whenever the state changes
     * @type {?}
     */
    CheckboxComponent.prototype.change;
    /** @type {?} */
    CheckboxComponent.prototype._checkboxInput;
    /**
     * @type {?}
     * @private
     */
    CheckboxComponent.prototype._onChangeFunc;
    /**
     * @type {?}
     * @private
     */
    CheckboxComponent.prototype._onTouchFunc;
    /**
     * @type {?}
     * @private
     */
    CheckboxComponent.prototype._renderer;
    /**
     * @type {?}
     * @private
     */
    CheckboxComponent.prototype._elementRef;
    /** @type {?} */
    CheckboxComponent.prototype._ngControl;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2hlY2tib3guY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGhlYWx0aGNhdGFseXN0L2Nhc2htZXJlLyIsInNvdXJjZXMiOlsibGliL2NoZWNrYm94L2NoZWNrYm94LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxPQUFPLEVBQ0gsU0FBUyxFQUNULFNBQVMsRUFDVCxVQUFVLEVBQ1YsWUFBWSxFQUNaLFVBQVUsRUFDVixXQUFXLEVBQ1gsS0FBSyxFQUNMLE1BQU0sRUFDTixTQUFTLEVBQ1QsU0FBUyxFQUNULGlCQUFpQixFQUNqQixJQUFJLEVBQ0osUUFBUSxFQUVYLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBdUIsTUFBTSxFQUFFLGtCQUFrQixFQUFFLFNBQVMsRUFBQyxNQUFNLGdCQUFnQixDQUFDO0FBQzNGLE9BQU8sRUFBQyxzQkFBc0IsRUFBQyxNQUFNLHlDQUF5QyxDQUFDO0FBQy9FLE9BQU8sRUFBQyxxQkFBcUIsRUFBQyxNQUFNLFNBQVMsQ0FBQzs7SUFFMUMsY0FBYyxHQUFHLENBQUM7QUFFdEI7SUFDSSw2QkFBbUIsTUFBeUIsRUFBUyxPQUFnQjtRQUFsRCxXQUFNLEdBQU4sTUFBTSxDQUFtQjtRQUFTLFlBQU8sR0FBUCxPQUFPLENBQVM7SUFBRyxDQUFDO0lBQzdFLDBCQUFDO0FBQUQsQ0FBQyxBQUZELElBRUM7Ozs7SUFEZSxxQ0FBZ0M7O0lBQUUsc0NBQXVCOztBQUd6RTtJQVF1Qyw2Q0FBc0I7SUFvSXpELDJCQUMyQixRQUFnQixFQUMvQixTQUFvQixFQUNwQixXQUF1QixFQUNuQixXQUFtQixFQUNuQixnQkFBb0MsRUFHekMsVUFBcUI7UUFSaEMsWUFVSSxpQkFBTyxTQVFWO1FBaEJXLGVBQVMsR0FBVCxTQUFTLENBQVc7UUFDcEIsaUJBQVcsR0FBWCxXQUFXLENBQVk7UUFLeEIsZ0JBQVUsR0FBVixVQUFVLENBQVc7UUEzSXhCLGVBQVMsR0FBRyxpQkFBZSxjQUFjLEVBQUks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QXNCLEdBeU41RDtTQXpOWSxpQkFBaUI7Ozs7OztJQUMxQixzQ0FBc0Q7Ozs7O0lBQ3RELGtDQUFrRDs7Ozs7SUFDbEQscUNBQWtDOzs7OztJQUNsQyxzQ0FBMEI7Ozs7O0lBQzFCLG1DQUFnQzs7SUFFaEMseUNBQThCOzs7OztJQUc5QixrQ0FDYzs7Ozs7SUFHZCwwQ0FDdUI7Ozs7OztJQUl2QixtQ0FDZTs7Ozs7SUFzQmYsa0NBQzhDOzs7OztJQUc5QyxpQ0FDMkI7Ozs7O0lBRzNCLG1DQUNpRDs7SUFFakQsMkNBQzJCOzs7OztJQTBFM0IsMENBQXVEOzs7OztJQUV2RCx5Q0FBMkM7Ozs7O0lBSXZDLHNDQUE0Qjs7Ozs7SUFDNUIsd0NBQStCOztJQUcvQix1Q0FFNEIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICAgIEF0dHJpYnV0ZSxcbiAgICBDb21wb25lbnQsXG4gICAgRWxlbWVudFJlZixcbiAgICBFdmVudEVtaXR0ZXIsXG4gICAgZm9yd2FyZFJlZixcbiAgICBIb3N0QmluZGluZyxcbiAgICBJbnB1dCxcbiAgICBPdXRwdXQsXG4gICAgUmVuZGVyZXIyLFxuICAgIFZpZXdDaGlsZCxcbiAgICBWaWV3RW5jYXBzdWxhdGlvbixcbiAgICBTZWxmLFxuICAgIE9wdGlvbmFsLFxuICAgIERvQ2hlY2tcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge0NvbnRyb2xWYWx1ZUFjY2Vzc29yLCBOZ0Zvcm0sIEZvcm1Hcm91cERpcmVjdGl2ZSwgTmdDb250cm9sfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQge0hjRm9ybUNvbnRyb2xDb21wb25lbnR9IGZyb20gJy4uL2Zvcm0tZmllbGQvaGMtZm9ybS1jb250cm9sLmNvbXBvbmVudCc7XG5pbXBvcnQge3BhcnNlQm9vbGVhbkF0dHJpYnV0ZX0gZnJvbSAnLi4vdXRpbCc7XG5cbmxldCBuZXh0Q2hlY2tib3hJZCA9IDE7XG5cbmV4cG9ydCBjbGFzcyBDaGVja2JveENoYW5nZUV2ZW50IHtcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgc291cmNlOiBDaGVja2JveENvbXBvbmVudCwgcHVibGljIGNoZWNrZWQ6IGJvb2xlYW4pIHt9XG59XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnaGMtY2hlY2tib3gnLFxuICAgIHRlbXBsYXRlVXJsOiAnLi9jaGVja2JveC5jb21wb25lbnQuaHRtbCcsXG4gICAgc3R5bGVVcmxzOiBbJy4vY2hlY2tib3guY29tcG9uZW50LnNjc3MnXSxcbiAgICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lLFxuICAgIHByb3ZpZGVyczogW3twcm92aWRlOiBIY0Zvcm1Db250cm9sQ29tcG9uZW50LCB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBDaGVja2JveENvbXBvbmVudCl9XSxcbiAgICBleHBvcnRBczogJ2hjQ2hlY2tib3gnXG59KVxuZXhwb3J0IGNsYXNzIENoZWNrYm94Q29tcG9uZW50IGV4dGVuZHMgSGNGb3JtQ29udHJvbENvbXBvbmVudCBpbXBsZW1lbnRzIENvbnRyb2xWYWx1ZUFjY2Vzc29yLCBEb0NoZWNrIHtcbiAgICBwcml2YXRlIF91bmlxdWVJZCA9IGBoYy1jaGVja2JveC0ke25leHRDaGVja2JveElkKyt9YDtcbiAgICBwcml2YXRlIF9mb3JtOiBOZ0Zvcm0gfCBGb3JtR3JvdXBEaXJlY3RpdmUgfCBudWxsO1xuICAgIHByaXZhdGUgX2NoZWNrZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBwcml2YXRlIF90YWJJbmRleDogbnVtYmVyO1xuICAgIHByaXZhdGUgX3RpZ2h0OiBib29sZWFuID0gZmFsc2U7XG5cbiAgICBfY29tcG9uZW50SWQgPSB0aGlzLl91bmlxdWVJZDtcblxuICAgIC8qKiBWYWx1ZSBhdHRyaWJ1dGUgb2YgdGhlIG5hdGl2ZSBjaGVja2JveCAqL1xuICAgIEBJbnB1dCgpXG4gICAgdmFsdWU6IHN0cmluZztcblxuICAgIC8qKiBXaGV0aGVyIHRoZSBjaGVja2JveCBpcyBpbmRldGVybWluYXRlLiBJdCBjYW4gcmVwcmVzZW50IGEgY2hlY2tib3ggd2l0aCB0aHJlZSBzdGF0ZXMuICovXG4gICAgQElucHV0KClcbiAgICBpbmRldGVybWluYXRlOiBib29sZWFuO1xuXG4gICAgLyoqIElmIHRydWUsIHRoZSBjaGVja2JveCBpcyBmb3IgZGlzcGxheSBwdXJwb3NlcyAobm90IHVzZXIgaW50ZXJhY3Rpb24pLiBBcyBzdWNoIGl0cyBjaGVja2VkL3VuY2hlY2tlZCBzdGF0ZVxuICAgICAqIGNhbiBvbmx5IGJlIGNvbnRyb2xsZWQgcHJvZ3JhbWF0aWNhbGx5LiBVc2VmdWwgZm9yIGVtYmVkZGluZyBpbiBhbiBuZy1zZWxlY3QgdHlwZWFoZWFkICovXG4gICAgQElucHV0KClcbiAgICBpc1N0dWIgPSBmYWxzZTtcblxuICAgIC8qKiBVbmlxdWUgaWQgZm9yIHRoZSBjaGVja2JveCBlbGVtZW50LiBJZiBub25lIGlzIHN1cHBsaWVkLCBvbmUgd2lsbCBiZSBhdXRvLWdlbmVyYXRlZC4gKi9cbiAgICBASW5wdXQoKVxuICAgIGdldCBpZCgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5fY29tcG9uZW50SWQgfHwgdGhpcy5fdW5pcXVlSWQ7XG4gICAgfVxuXG4gICAgc2V0IGlkKGlkVmFsOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5fY29tcG9uZW50SWQgPSBpZFZhbCA/IGlkVmFsIDogdGhpcy5fdW5pcXVlSWQ7XG4gICAgfVxuXG4gICAgLyoqIElmIHRydWUsIGNvbmRlbnNlIHRoZSBkZWZhdWx0IG1hcmdpbiBhbmQgcmVkdWNlIHRoZSBmb250IHNpemUuICpEZWZhdWx0cyB0byBgZmFsc2VgLiogICovXG4gICAgQElucHV0KClcbiAgICBnZXQgdGlnaHQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl90aWdodDtcbiAgICB9XG4gICAgc2V0IHRpZ2h0KHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX3RpZ2h0ID0gcGFyc2VCb29sZWFuQXR0cmlidXRlKHZhbHVlKTtcbiAgICB9XG5cbiAgICAvKiogU2V0cyB0aGUgcG9zaXRpb24gb2YgdGhlIGNoZWNrYm94IHJlbGF0aXZlIHRvIGl0cyBhc3NvY2lhdGVkIGxhYmVsLiAqRGVmYXVsdHMgdG8gYGNlbnRlcmAuKiAgKi9cbiAgICBASW5wdXQoKVxuICAgIGFsaWduOiAnY2VudGVyJyB8ICd0b3AnIHwgJ2JvdHRvbScgPSAnY2VudGVyJztcblxuICAgIC8qKiBTZXRzIHVuaXF1ZSBuYW1lIHVzZWQgaW4gYSBmb3JtICovXG4gICAgQElucHV0KClcbiAgICBuYW1lOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcblxuICAgIC8qKiBFdmVudCBlbWl0dGVkIHdoZW5ldmVyIHRoZSBzdGF0ZSBjaGFuZ2VzICovXG4gICAgQE91dHB1dCgpXG4gICAgY2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxDaGVja2JveENoYW5nZUV2ZW50PigpO1xuXG4gICAgQFZpZXdDaGlsZCgnY2hlY2tib3hJbnB1dCcsIHtzdGF0aWM6IHRydWV9KVxuICAgIF9jaGVja2JveElucHV0OiBFbGVtZW50UmVmO1xuXG4gICAgQEhvc3RCaW5kaW5nKCdhdHRyLmlkJylcbiAgICBnZXQgX2dldEhvc3RJZCgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5pZDtcbiAgICB9XG5cbiAgICBASG9zdEJpbmRpbmcoJ2NsYXNzLmhjLWNoZWNrYm94LWNoZWNrZWQnKVxuICAgIGdldCBfZ2V0Q2hlY2tib3hDaGVja2VkQ2xhc3MoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmNoZWNrZWQ7XG4gICAgfVxuXG4gICAgQEhvc3RCaW5kaW5nKCdjbGFzcy5oYy1jaGVja2JveC1kaXNhYmxlZCcpXG4gICAgZ2V0IF9nZXRDaGVja2JveERpc2FibGVkQ2xhc3MoKTogYm9vbGVhbiB7XG4gICAgICAgIGlmICh0aGlzLl9uZ0NvbnRyb2wgJiYgdGhpcy5fbmdDb250cm9sLmRpc2FibGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbmdDb250cm9sLmRpc2FibGVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9pc0Rpc2FibGVkO1xuICAgIH1cblxuICAgIEBIb3N0QmluZGluZygnY2xhc3MuaGMtY2hlY2tib3gtaW5kZXRlcm1pbmF0ZScpXG4gICAgZ2V0IF9nZXRDaGVja2JveEluZGV0ZXJtaW5hdGVDbGFzcygpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5kZXRlcm1pbmF0ZTtcbiAgICB9XG5cbiAgICAvKiogV2hldGhlciB0aGUgY2hlY2tib3ggaXMgcmVxdWlyZWQuICovXG4gICAgQElucHV0KClcbiAgICBnZXQgcmVxdWlyZWQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pc1JlcXVpcmVkO1xuICAgIH1cblxuICAgIHNldCByZXF1aXJlZChyZXF1aXJlZFZhbCkge1xuICAgICAgICB0aGlzLl9pc1JlcXVpcmVkID0gcGFyc2VCb29sZWFuQXR0cmlidXRlKHJlcXVpcmVkVmFsKTtcbiAgICB9XG5cbiAgICAvKiogV2hldGhlciB0aGUgY2hlY2tib3ggaXMgZGlzYWJsZWQuICovXG4gICAgQElucHV0KClcbiAgICBnZXQgZGlzYWJsZWQoKTogYm9vbGVhbiB7XG4gICAgICAgIGlmICh0aGlzLl9uZ0NvbnRyb2wgJiYgdGhpcy5fbmdDb250cm9sLmRpc2FibGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbmdDb250cm9sLmRpc2FibGVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9pc0Rpc2FibGVkO1xuICAgIH1cblxuICAgIHNldCBkaXNhYmxlZChkaXNhYmxlZFZhbCkge1xuICAgICAgICB0aGlzLl9pc0Rpc2FibGVkID0gcGFyc2VCb29sZWFuQXR0cmlidXRlKGRpc2FibGVkVmFsKTtcbiAgICB9XG5cbiAgICAvKiogV2hldGhlciB0aGUgY2hlY2tib3ggaXMgY2hlY2tlZC4gKi9cbiAgICBASW5wdXQoKVxuICAgIGdldCBjaGVja2VkKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2hlY2tlZDtcbiAgICB9XG5cbiAgICBzZXQgY2hlY2tlZChjaGVja2VkOiBib29sZWFuKSB7XG4gICAgICAgIGlmICh0aGlzLl9jaGVja2VkID09PSBjaGVja2VkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fY2hlY2tlZCA9IGNoZWNrZWQ7XG4gICAgfVxuXG4gICAgLyoqIFRhYkluZGV4IGF0dHJpYnV0ZSBvZiBuYXRpdmUgY2hlY2tib3ggKi9cbiAgICBnZXQgdGFiSW5kZXgoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzRGlzYWJsZWQgPyAtMSA6IHRoaXMuX3RhYkluZGV4O1xuICAgIH1cblxuICAgIHNldCB0YWJJbmRleCh2YWx1ZTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuX3RhYkluZGV4ID0gdmFsdWUgPT0gbnVsbCA/IDAgOiB2YWx1ZTtcbiAgICB9XG5cbiAgICBnZXQgX2lucHV0SWQoKSB7XG4gICAgICAgIHJldHVybiBgJHt0aGlzLmlkIHx8IHRoaXMuX3VuaXF1ZUlkfS1pbnB1dGA7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfb25DaGFuZ2VGdW5jOiAodmFsdWU6IGFueSkgPT4gdm9pZCA9ICgpID0+IHt9O1xuXG4gICAgcHJpdmF0ZSBfb25Ub3VjaEZ1bmM6ICgpID0+IGFueSA9ICgpID0+IHt9O1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIEBBdHRyaWJ1dGUoJ3RhYmluZGV4JykgdGFiaW5kZXg6IHN0cmluZyxcbiAgICAgICAgcHJpdmF0ZSBfcmVuZGVyZXI6IFJlbmRlcmVyMixcbiAgICAgICAgcHJpdmF0ZSBfZWxlbWVudFJlZjogRWxlbWVudFJlZixcbiAgICAgICAgQE9wdGlvbmFsKCkgX3BhcmVudEZvcm06IE5nRm9ybSxcbiAgICAgICAgQE9wdGlvbmFsKCkgX3BhcmVudEZvcm1Hcm91cDogRm9ybUdyb3VwRGlyZWN0aXZlLFxuICAgICAgICBAT3B0aW9uYWwoKVxuICAgICAgICBAU2VsZigpXG4gICAgICAgIHB1YmxpYyBfbmdDb250cm9sOiBOZ0NvbnRyb2xcbiAgICApIHtcbiAgICAgICAgc3VwZXIoKTtcblxuICAgICAgICB0aGlzLnRhYkluZGV4ID0gcGFyc2VJbnQodGFiaW5kZXgsIDEwKSB8fCAwO1xuXG4gICAgICAgIHRoaXMuX2Zvcm0gPSBfcGFyZW50Rm9ybSB8fCBfcGFyZW50Rm9ybUdyb3VwO1xuICAgICAgICBpZiAodGhpcy5fbmdDb250cm9sICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuX25nQ29udHJvbC52YWx1ZUFjY2Vzc29yID0gdGhpcztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHdyaXRlVmFsdWUodmFsdWU6IGFueSk6IHZvaWQge1xuICAgICAgICB0aGlzLmNoZWNrZWQgPSAhIXZhbHVlO1xuICAgIH1cblxuICAgIHJlZ2lzdGVyT25DaGFuZ2UoZm46ICh2YWx1ZTogYW55KSA9PiB2b2lkKTogdm9pZCB7XG4gICAgICAgIHRoaXMuX29uQ2hhbmdlRnVuYyA9IGZuO1xuICAgIH1cblxuICAgIHJlZ2lzdGVyT25Ub3VjaGVkKGZuOiAoKSA9PiBhbnkpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5fb25Ub3VjaEZ1bmMgPSBmbjtcbiAgICB9XG5cbiAgICBzZXREaXNhYmxlZFN0YXRlKGRpc2FibGVkVmFsOiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZGlzYWJsZWQgPSBkaXNhYmxlZFZhbDtcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIuc2V0UHJvcGVydHkodGhpcy5fY2hlY2tib3hJbnB1dC5uYXRpdmVFbGVtZW50LCAnZGlzYWJsZWQnLCBkaXNhYmxlZFZhbCk7XG4gICAgfVxuXG4gICAgLyoqIFRvZ2dsZXMgdGhlIGN1cnJlbnQgY2hlY2tlZCBzdGF0ZSBvZiB0aGUgY2hlY2tib3ggKi9cbiAgICB0b2dnbGUoKSB7XG4gICAgICAgIHRoaXMuY2hlY2tlZCA9ICF0aGlzLmNoZWNrZWQ7XG4gICAgfVxuXG4gICAgX2NsaWNrRXZlbnQoZXZlbnQ6IEV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOyAvLyBwcmV2ZW50IG5hdGl2ZSBjbGljayBldmVudCBmcm9tIGJlaW5nIGRpc3BhdGNoZWRcblxuICAgICAgICBpZiAoIXRoaXMuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlKCk7XG4gICAgICAgICAgICB0aGlzLl9lbWl0Q2hhbmdlRXZlbnQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9zdG9wQ2hhbmdlRXZlbnQoZXZlbnQ6IEV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOyAvLyBwcmV2ZW50IG5hdGl2ZSBjaGFuZ2UgZXZlbnQgZnJvbSBlbWl0dGluZyBpdHMgb3duIG9iamVjdCB0aHJvdWdoIG91dHB1dCAnY2hhbmdlJ1xuICAgIH1cblxuICAgIHByaXZhdGUgX2VtaXRDaGFuZ2VFdmVudCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5fb25DaGFuZ2VGdW5jKHRoaXMuY2hlY2tlZCk7XG4gICAgICAgIHRoaXMuY2hhbmdlLmVtaXQobmV3IENoZWNrYm94Q2hhbmdlRXZlbnQodGhpcywgdGhpcy5jaGVja2VkKSk7XG4gICAgfVxuXG4gICAgX29uQmx1cigpIHtcbiAgICAgICAgdGhpcy5fb25Ub3VjaEZ1bmMoKTtcbiAgICB9XG5cbiAgICBuZ0RvQ2hlY2soKTogdm9pZCB7XG4gICAgICAgIC8vIFRoaXMgbmVlZHMgdG8gYmUgY2hlY2tlZCBldmVyeSBjeWNsZSBiZWNhdXNlIHdlIGNhbid0IHN1YnNjcmliZSB0byBmb3JtIHN1Ym1pc3Npb25zXG4gICAgICAgIGlmICh0aGlzLl9uZ0NvbnRyb2wpIHtcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZUVycm9yU3RhdGUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgX3VwZGF0ZUVycm9yU3RhdGUoKSB7XG4gICAgICAgIGNvbnN0IG9sZFN0YXRlID0gdGhpcy5fZXJyb3JTdGF0ZTtcblxuICAgICAgICAvLyBUT0RPOiB0aGlzIGNvdWxkIGJlIGFic3RyYWN0ZWQgb3V0IGFzIGFuIEBJbnB1dCgpIGlmIHdlIG5lZWQgdGhpcyB0byBiZSBjb25maWd1cmFibGVcbiAgICAgICAgY29uc3QgbmV3U3RhdGUgPSAhIShcbiAgICAgICAgICAgIHRoaXMuX25nQ29udHJvbCAmJlxuICAgICAgICAgICAgdGhpcy5fbmdDb250cm9sLmludmFsaWQgJiZcbiAgICAgICAgICAgICh0aGlzLl9uZ0NvbnRyb2wudG91Y2hlZCB8fCAodGhpcy5fZm9ybSAmJiB0aGlzLl9mb3JtLnN1Ym1pdHRlZCkpXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKG9sZFN0YXRlICE9PSBuZXdTdGF0ZSkge1xuICAgICAgICAgICAgdGhpcy5fZXJyb3JTdGF0ZSA9IG5ld1N0YXRlO1xuICAgICAgICB9XG4gICAgfVxufVxuIl19