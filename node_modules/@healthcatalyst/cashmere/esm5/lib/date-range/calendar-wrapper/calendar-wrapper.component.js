/**
 * @fileoverview added by tsickle
 * Generated from: lib/date-range/calendar-wrapper/calendar-wrapper.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ViewChild, Input, ChangeDetectionStrategy, ViewEncapsulation, Output, EventEmitter, HostBinding } from '@angular/core';
import { ConfigStoreService } from '../services/config-store.service';
import { CalendarComponent } from '../../datepicker/calendar/calendar.component';
import { DatepickerInputDirective } from '../../datepicker/datepicker-input/datepicker-input.directive';
/**
 * Component combining a calendar and input as a representation of a date
 */
var CalendarWrapperComponent = /** @class */ (function () {
    function CalendarWrapperComponent(configStore) {
        this.configStore = configStore;
        this._hostClass = true;
        /**
         * Emits when selected date has changed.
         */
        this.selectedDateChange = new EventEmitter();
        /**
         * Whether the pickers include the calendar, time selector, or both. Defaults to `date`.
         */
        this.mode = 'date';
        /**
         * Whether the time picker should use a 12 or 24 hour clock. Defaults to 12.
         */
        this.hourCycle = 12;
        this.weekendFilter = (/**
         * @return {?}
         */
        function () { return true; });
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    CalendarWrapperComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        // Necessary to force view refresh
        if (changes.selectedDate) {
            /** @type {?} */
            var date = changes.selectedDate.currentValue;
            if (date) {
                this.hcCalendar.activeDate = date;
                this.datePickerInput.setDate(date);
                this.selectedDateChange.emit(date);
            }
        }
    };
    /**
     * @param {?} date
     * @return {?}
     */
    CalendarWrapperComponent.prototype._onCalendarChange = /**
     * @param {?} date
     * @return {?}
     */
    function (date) {
        this.selectedDateChange.emit(date);
    };
    /**
     * @param {?} event
     * @return {?}
     */
    CalendarWrapperComponent.prototype._onInputChange = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        if (this.mode === 'time') {
            /** @type {?} */
            var tempVal = event.value ? new Date(1900, 1, 1, event.value.getHours(), event.value.getMinutes()) : new Date(1900, 1, 1);
            /** @type {?} */
            var minVal = this.minDate ? new Date(1900, 1, 1, this.minDate.getHours(), this.minDate.getMinutes()) : new Date(1900, 1, 1);
            /** @type {?} */
            var maxVal = this.maxDate ? new Date(1900, 1, 1, this.maxDate.getHours(), this.maxDate.getMinutes()) : new Date(1900, 1, 2);
            if (tempVal < minVal || tempVal > maxVal) {
                this.selectedDate = undefined;
                this.selectedDateChange.emit(undefined);
            }
            else {
                this.selectedDateChange.emit(event.value || undefined);
            }
        }
        else {
            if (event.value && ((this.minDate && event.value < this.minDate) || (this.maxDate && event.value > this.maxDate))) {
                this.selectedDate = undefined;
                this.selectedDateChange.emit(undefined);
            }
            else {
                this.selectedDateChange.emit(event.value || undefined);
            }
        }
    };
    /** Focus inner input */
    /**
     * Focus inner input
     * @return {?}
     */
    CalendarWrapperComponent.prototype.focusInput = /**
     * Focus inner input
     * @return {?}
     */
    function () {
        this.datePickerInput.focus();
    };
    CalendarWrapperComponent.decorators = [
        { type: Component, args: [{
                    selector: 'hc-calendar-wrapper',
                    template: "<div class=\"form-container\">\n    <hc-form-field class=\"hc-calendar-wrapper-form-field\">\n        <hc-label [innerText]=\"prefixLabel\"></hc-label>\n        <input\n            hcInput\n            hcDatepicker\n            [(ngModel)]=\"selectedDate\"\n            required\n            (dateChange)=\"_onInputChange($event)\"\n            [min]=\"minDate\"\n            [max]=\"maxDate\"\n            [_mode]=\"mode\"\n            [_hourCycle]=\"hourCycle\"\n        />\n        <hc-error [innerText]=\"invalidDateLabel\"></hc-error>\n    </hc-form-field>\n</div>\n<hc-calendar\n    [mode]=\"mode\"\n    [hourCycle]=\"hourCycle\"\n    [startAt]=\"selectedDate\"\n    [selected]=\"selectedDate\"\n    [minDate]=\"minDate\"\n    [maxDate]=\"maxDate\"\n    (selectedChange)=\"_onCalendarChange($event)\"\n    [dateFilter]=\"configStore.weekendFilter\"\n>\n</hc-calendar>\n",
                    changeDetection: ChangeDetectionStrategy.OnPush,
                    encapsulation: ViewEncapsulation.None,
                    styles: [".hc-calendar-wrapper-form-field>.hc-form-field-wrapper{height:70px;padding-bottom:0}.hc-calendar-wrapper>.form-container{padding-left:13px}"]
                }] }
    ];
    /** @nocollapse */
    CalendarWrapperComponent.ctorParameters = function () { return [
        { type: ConfigStoreService }
    ]; };
    CalendarWrapperComponent.propDecorators = {
        _hostClass: [{ type: HostBinding, args: ['class.hc-calendar-wrapper',] }],
        hcCalendar: [{ type: ViewChild, args: [CalendarComponent, { static: true },] }],
        datePickerInput: [{ type: ViewChild, args: [DatepickerInputDirective, { static: true },] }],
        selectedDateChange: [{ type: Output }],
        selectedDate: [{ type: Input }],
        dateFormat: [{ type: Input }],
        mode: [{ type: Input }],
        hourCycle: [{ type: Input }],
        prefixLabel: [{ type: Input }],
        excludeWeekends: [{ type: Input }],
        minDate: [{ type: Input }],
        maxDate: [{ type: Input }],
        invalidDateLabel: [{ type: Input }]
    };
    return CalendarWrapperComponent;
}());
export { CalendarWrapperComponent };
if (false) {
    /** @type {?} */
    CalendarWrapperComponent.prototype._hostClass;
    /** @type {?} */
    CalendarWrapperComponent.prototype.hcCalendar;
    /** @type {?} */
    CalendarWrapperComponent.prototype.datePickerInput;
    /**
     * Emits when selected date has changed.
     * @type {?}
     */
    CalendarWrapperComponent.prototype.selectedDateChange;
    /**
     * Current selected date.
     * @type {?}
     */
    CalendarWrapperComponent.prototype.selectedDate;
    /** @type {?} */
    CalendarWrapperComponent.prototype.dateFormat;
    /**
     * Whether the pickers include the calendar, time selector, or both. Defaults to `date`.
     * @type {?}
     */
    CalendarWrapperComponent.prototype.mode;
    /**
     * Whether the time picker should use a 12 or 24 hour clock. Defaults to 12.
     * @type {?}
     */
    CalendarWrapperComponent.prototype.hourCycle;
    /**
     * Prefix label on top of component.
     * @type {?}
     */
    CalendarWrapperComponent.prototype.prefixLabel;
    /**
     * Flag to filter out weekends.
     * @type {?}
     */
    CalendarWrapperComponent.prototype.excludeWeekends;
    /**
     * The minimum selectable date.
     * @type {?}
     */
    CalendarWrapperComponent.prototype.minDate;
    /**
     * The maximum selectable date.
     * @type {?}
     */
    CalendarWrapperComponent.prototype.maxDate;
    /**
     * Message displayed when a date is invalid.
     * @type {?}
     */
    CalendarWrapperComponent.prototype.invalidDateLabel;
    /** @type {?} */
    CalendarWrapperComponent.prototype.weekendFilter;
    /** @type {?} */
    CalendarWrapperComponent.prototype.configStore;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FsZW5kYXItd3JhcHBlci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AaGVhbHRoY2F0YWx5c3QvY2FzaG1lcmUvIiwic291cmNlcyI6WyJsaWIvZGF0ZS1yYW5nZS9jYWxlbmRhci13cmFwcGVyL2NhbGVuZGFyLXdyYXBwZXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUNILFNBQVMsRUFDVCxTQUFTLEVBQ1QsS0FBSyxFQUNMLHVCQUF1QixFQUN2QixpQkFBaUIsRUFDakIsTUFBTSxFQUNOLFlBQVksRUFHWixXQUFXLEVBQ2QsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFDLGtCQUFrQixFQUFDLE1BQU0sa0NBQWtDLENBQUM7QUFDcEUsT0FBTyxFQUFDLGlCQUFpQixFQUFDLE1BQU0sOENBQThDLENBQUM7QUFDL0UsT0FBTyxFQUFDLHdCQUF3QixFQUF5QixNQUFNLDhEQUE4RCxDQUFDOzs7O0FBSTlIO0lBMERJLGtDQUFtQixXQUErQjtRQUEvQixnQkFBVyxHQUFYLFdBQVcsQ0FBb0I7UUFqRGxELGVBQVUsR0FBRyxJQUFJLENBQUM7Ozs7UUFVVCx1QkFBa0IsR0FBb0IsSUFBSSxZQUFZLEVBQUssQ0FBQzs7OztRQVdyRSxTQUFJLEdBQWtDLE1BQU0sQ0FBQzs7OztRQUk3QyxjQUFTLEdBQVcsRUFBRSxDQUFDO1FBc0J2QixrQkFBYTs7O1FBQUcsY0FBTSxPQUFBLElBQUksRUFBSixDQUFJLEVBQUM7SUFFMEIsQ0FBQzs7Ozs7SUFFdEQsOENBQVc7Ozs7SUFBWCxVQUFZLE9BQXNCO1FBQzlCLGtDQUFrQztRQUNsQyxJQUFJLE9BQU8sQ0FBQyxZQUFZLEVBQUU7O2dCQUNoQixJQUFJLEdBQU0sT0FBTyxDQUFDLFlBQVksQ0FBQyxZQUFZO1lBQ2pELElBQUksSUFBSSxFQUFFO2dCQUNOLElBQUksQ0FBQyxVQUFVLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztnQkFDbEMsSUFBSSxD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Z0JBWk8sa0JBQWtCOzs7NkJBY3JCLFdBQVcsU0FBQywyQkFBMkI7NkJBR3ZDLFNBQVMsU0FBQyxpQkFBaUIsRUFBRSxFQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUM7a0NBRzNDLFNBQVMsU0FBQyx3QkFBd0IsRUFBRSxFQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUM7cUNBSWxELE1BQU07K0JBSU4sS0FBSzs2QkFHTCxLQUFLO3VCQUlMLEtBQUs7NEJBSUwsS0FBSzs4QkFJTCxLQUFLO2tDQUlMLEtBQUs7MEJBSUwsS0FBSzswQkFJTCxLQUFLO21DQUlMLEtBQUs7O0lBaURWLCtCQUFDO0NBQUEsQUF0R0QsSUFzR0M7U0EvRlksd0JBQXdCOzs7SUFDakMsOENBQ2tCOztJQUVsQiw4Q0FDOEI7O0lBRTlCLG1EQUMwQzs7Ozs7SUFHMUMsc0RBQ3FFOzs7OztJQUdyRSxnREFDNEI7O0lBRTVCLDhDQUNtQjs7Ozs7SUFHbkIsd0NBQzZDOzs7OztJQUc3Qyw2Q0FDdUI7Ozs7O0lBR3ZCLCtDQUNvQjs7Ozs7SUFHcEIsbURBQ3lCOzs7OztJQUd6QiwyQ0FDdUI7Ozs7O0lBR3ZCLDJDQUN1Qjs7Ozs7SUFHdkIsb0RBQ3lCOztJQUV6QixpREFBMkI7O0lBRWYsK0NBQXNDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgICBDb21wb25lbnQsXG4gICAgVmlld0NoaWxkLFxuICAgIElucHV0LFxuICAgIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LFxuICAgIFZpZXdFbmNhcHN1bGF0aW9uLFxuICAgIE91dHB1dCxcbiAgICBFdmVudEVtaXR0ZXIsXG4gICAgT25DaGFuZ2VzLFxuICAgIFNpbXBsZUNoYW5nZXMsXG4gICAgSG9zdEJpbmRpbmdcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge0NvbmZpZ1N0b3JlU2VydmljZX0gZnJvbSAnLi4vc2VydmljZXMvY29uZmlnLXN0b3JlLnNlcnZpY2UnO1xuaW1wb3J0IHtDYWxlbmRhckNvbXBvbmVudH0gZnJvbSAnLi4vLi4vZGF0ZXBpY2tlci9jYWxlbmRhci9jYWxlbmRhci5jb21wb25lbnQnO1xuaW1wb3J0IHtEYXRlcGlja2VySW5wdXREaXJlY3RpdmUsIEhjRGF0ZXBpY2tlcklucHV0RXZlbnR9IGZyb20gJy4uLy4uL2RhdGVwaWNrZXIvZGF0ZXBpY2tlci1pbnB1dC9kYXRlcGlja2VyLWlucHV0LmRpcmVjdGl2ZSc7XG5pbXBvcnQge0R9IGZyb20gJy4uLy4uL2RhdGVwaWNrZXIvZGF0ZXRpbWUvZGF0ZS1mb3JtYXRzJztcblxuLyoqIENvbXBvbmVudCBjb21iaW5pbmcgYSBjYWxlbmRhciBhbmQgaW5wdXQgYXMgYSByZXByZXNlbnRhdGlvbiBvZiBhIGRhdGUgICovXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogJ2hjLWNhbGVuZGFyLXdyYXBwZXInLFxuICAgIHRlbXBsYXRlVXJsOiAnLi9jYWxlbmRhci13cmFwcGVyLmNvbXBvbmVudC5odG1sJyxcbiAgICBzdHlsZVVybHM6IFsnLi9jYWxlbmRhci13cmFwcGVyLmNvbXBvbmVudC5zY3NzJ10sXG4gICAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG4gICAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZVxufSlcbmV4cG9ydCBjbGFzcyBDYWxlbmRhcldyYXBwZXJDb21wb25lbnQgaW1wbGVtZW50cyBPbkNoYW5nZXMge1xuICAgIEBIb3N0QmluZGluZygnY2xhc3MuaGMtY2FsZW5kYXItd3JhcHBlcicpXG4gICAgX2hvc3RDbGFzcyA9IHRydWU7XG5cbiAgICBAVmlld0NoaWxkKENhbGVuZGFyQ29tcG9uZW50LCB7c3RhdGljOiB0cnVlfSlcbiAgICBoY0NhbGVuZGFyOiBDYWxlbmRhckNvbXBvbmVudDtcblxuICAgIEBWaWV3Q2hpbGQoRGF0ZXBpY2tlcklucHV0RGlyZWN0aXZlLCB7c3RhdGljOiB0cnVlfSlcbiAgICBkYXRlUGlja2VySW5wdXQ6IERhdGVwaWNrZXJJbnB1dERpcmVjdGl2ZTtcblxuICAgIC8qKiBFbWl0cyB3aGVuIHNlbGVjdGVkIGRhdGUgaGFzIGNoYW5nZWQuICovXG4gICAgQE91dHB1dCgpXG4gICAgcmVhZG9ubHkgc2VsZWN0ZWREYXRlQ2hhbmdlOiBFdmVudEVtaXR0ZXI8RD4gPSBuZXcgRXZlbnRFbWl0dGVyPEQ+KCk7XG5cbiAgICAvKiogQ3VycmVudCBzZWxlY3RlZCBkYXRlLiAqL1xuICAgIEBJbnB1dCgpXG4gICAgc2VsZWN0ZWREYXRlOiBEIHwgdW5kZWZpbmVkO1xuXG4gICAgQElucHV0KClcbiAgICBkYXRlRm9ybWF0OiBzdHJpbmc7XG5cbiAgICAvKiogV2hldGhlciB0aGUgcGlja2VycyBpbmNsdWRlIHRoZSBjYWxlbmRhciwgdGltZSBzZWxlY3Rvciwgb3IgYm90aC4gRGVmYXVsdHMgdG8gYGRhdGVgLiAqL1xuICAgIEBJbnB1dCgpXG4gICAgbW9kZTogJ2RhdGUnIHwgJ3RpbWUnIHwgJ2RhdGUtdGltZScgPSAnZGF0ZSc7XG5cbiAgICAvKiogV2hldGhlciB0aGUgdGltZSBwaWNrZXIgc2hvdWxkIHVzZSBhIDEyIG9yIDI0IGhvdXIgY2xvY2suIERlZmF1bHRzIHRvIDEyLiAqL1xuICAgIEBJbnB1dCgpXG4gICAgaG91ckN5Y2xlOiBudW1iZXIgPSAxMjtcblxuICAgIC8qKiBQcmVmaXggbGFiZWwgb24gdG9wIG9mIGNvbXBvbmVudC4gKi9cbiAgICBASW5wdXQoKVxuICAgIHByZWZpeExhYmVsOiBzdHJpbmc7XG5cbiAgICAvKiogRmxhZyB0byBmaWx0ZXIgb3V0IHdlZWtlbmRzLiAqL1xuICAgIEBJbnB1dCgpXG4gICAgZXhjbHVkZVdlZWtlbmRzOiBib29sZWFuO1xuXG4gICAgLyoqIFRoZSBtaW5pbXVtIHNlbGVjdGFibGUgZGF0ZS4gKi9cbiAgICBASW5wdXQoKVxuICAgIG1pbkRhdGU6IEQgfCB1bmRlZmluZWQ7XG5cbiAgICAvKiogVGhlIG1heGltdW0gc2VsZWN0YWJsZSBkYXRlLiAqL1xuICAgIEBJbnB1dCgpXG4gICAgbWF4RGF0ZTogRCB8IHVuZGVmaW5lZDtcblxuICAgIC8qKiBNZXNzYWdlIGRpc3BsYXllZCB3aGVuIGEgZGF0ZSBpcyBpbnZhbGlkLiAqL1xuICAgIEBJbnB1dCgpXG4gICAgaW52YWxpZERhdGVMYWJlbDogc3RyaW5nO1xuXG4gICAgd2Vla2VuZEZpbHRlciA9ICgpID0+IHRydWU7XG5cbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgY29uZmlnU3RvcmU6IENvbmZpZ1N0b3JlU2VydmljZSkge31cblxuICAgIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpIHtcbiAgICAgICAgLy8gTmVjZXNzYXJ5IHRvIGZvcmNlIHZpZXcgcmVmcmVzaFxuICAgICAgICBpZiAoY2hhbmdlcy5zZWxlY3RlZERhdGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGU6IEQgPSBjaGFuZ2VzLnNlbGVjdGVkRGF0ZS5jdXJyZW50VmFsdWU7XG4gICAgICAgICAgICBpZiAoZGF0ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGNDYWxlbmRhci5hY3RpdmVEYXRlID0gZGF0ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGVQaWNrZXJJbnB1dC5zZXREYXRlKGRhdGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlQ2hhbmdlLmVtaXQoZGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfb25DYWxlbmRhckNoYW5nZShkYXRlOiBEKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlQ2hhbmdlLmVtaXQoZGF0ZSk7XG4gICAgfVxuXG4gICAgX29uSW5wdXRDaGFuZ2UoZXZlbnQ6IEhjRGF0ZXBpY2tlcklucHV0RXZlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMubW9kZSA9PT0gJ3RpbWUnKSB7XG4gICAgICAgICAgICBsZXQgdGVtcFZhbCA9IGV2ZW50LnZhbHVlID8gbmV3IERhdGUoMTkwMCwgMSwgMSwgZXZlbnQudmFsdWUuZ2V0SG91cnMoKSwgZXZlbnQudmFsdWUuZ2V0TWludXRlcygpKSA6IG5ldyBEYXRlKDE5MDAsIDEsIDEpO1xuICAgICAgICAgICAgbGV0IG1pblZhbCA9IHRoaXMubWluRGF0ZSA/IG5ldyBEYXRlKDE5MDAsIDEsIDEsIHRoaXMubWluRGF0ZS5nZXRIb3VycygpLCB0aGlzLm1pbkRhdGUuZ2V0TWludXRlcygpKSA6IG5ldyBEYXRlKDE5MDAsIDEsIDEpO1xuICAgICAgICAgICAgbGV0IG1heFZhbCA9IHRoaXMubWF4RGF0ZSA/IG5ldyBEYXRlKDE5MDAsIDEsIDEsIHRoaXMubWF4RGF0ZS5nZXRIb3VycygpLCB0aGlzLm1heERhdGUuZ2V0TWludXRlcygpKSA6IG5ldyBEYXRlKDE5MDAsIDEsIDIpO1xuXG4gICAgICAgICAgICBpZiAodGVtcFZhbCA8IG1pblZhbCB8fCB0ZW1wVmFsID4gbWF4VmFsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVDaGFuZ2UuZW1pdCh1bmRlZmluZWQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZUNoYW5nZS5lbWl0KGV2ZW50LnZhbHVlIHx8IHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQudmFsdWUgJiYgKCh0aGlzLm1pbkRhdGUgJiYgZXZlbnQudmFsdWUgPCB0aGlzLm1pbkRhdGUpIHx8ICh0aGlzLm1heERhdGUgJiYgZXZlbnQudmFsdWUgPiB0aGlzLm1heERhdGUpKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlQ2hhbmdlLmVtaXQodW5kZWZpbmVkKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVDaGFuZ2UuZW1pdChldmVudC52YWx1ZSB8fCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqIEZvY3VzIGlubmVyIGlucHV0ICovXG4gICAgZm9jdXNJbnB1dCgpIHtcbiAgICAgICAgdGhpcy5kYXRlUGlja2VySW5wdXQuZm9jdXMoKTtcbiAgICB9XG59XG4iXX0=