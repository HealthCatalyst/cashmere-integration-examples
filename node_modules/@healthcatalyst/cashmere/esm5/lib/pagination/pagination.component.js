/**
 * @fileoverview added by tsickle
 * Generated from: lib/pagination/pagination.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, Input, ViewEncapsulation } from '@angular/core';
import { coerceNumberProperty } from '@angular/cdk/coercion';
import { BasePaginationComponent } from './base-pagination';
/**
 * The pagination control enables the user to navigate across paged content.
 * Although commonly used with tables and data grids, this control may be used any place where paged data is used.
 * \@inheritdoc
 *
 */
var PaginationComponent = /** @class */ (function (_super) {
    tslib_1.__extends(PaginationComponent, _super);
    function PaginationComponent() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._pageSizeOptions = [10, 20, 50];
        _this.isFocused = false;
        /**
         * Displayed set of page size options. Will be sorted and include current page size.
         */
        _this._displayedPageSizeOptions = [];
        _this._hidePageSize = false;
        return _this;
    }
    Object.defineProperty(PaginationComponent.prototype, "pageSizeOptions", {
        /** The set of provided page size options to display to the user. *Defaults to [10, 20, 50].* */
        get: /**
         * The set of provided page size options to display to the user. *Defaults to [10, 20, 50].*
         * @return {?}
         */
        function () {
            return this._pageSizeOptions;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._pageSizeOptions = (value || []).map((/**
             * @param {?} p
             * @return {?}
             */
            function (p) { return coerceNumberProperty(p); }));
            this._updateDisplayedPageSizeOptions();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PaginationComponent.prototype, "hidePageSize", {
        /** Whether to hide the page size selection UI from the user. *Defaults to false.* */
        get: /**
         * Whether to hide the page size selection UI from the user. *Defaults to false.*
         * @return {?}
         */
        function () {
            return this._hidePageSize;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._hidePageSize = !!value;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    PaginationComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this._updateDisplayedPageSizeOptions();
        _super.prototype.ngOnInit.call(this);
    };
    Object.defineProperty(PaginationComponent.prototype, "_visiblePages", {
        get: /**
         * @return {?}
         */
        function () {
            /*
             * if there aren't any pages, don't display any
             */
            if (!this.totalPages) {
                return [];
            }
            /*
             * if there are less than nine pages, display them all
             */
            if (this.totalPages <= 9) {
                /** @type {?} */
                var visiblePages = [];
                for (var i = 1; i <= this.totalPages; i++) {
                    visiblePages.push(i);
                }
                return visiblePages;
            }
            /*
                     * There should always be exactly nine elements in the paging control.
                     * Let n = total pages, p = current page, ... are non-clickable ellipses
                     * If the current page number is less than 6, display 1, 2, 3, 4, 5, 6, ..., n-1, n
                     * If the current page number within is within 4 of the max, display 1, 2, ..., n-5, n-4, n-3, n-2, n-1, n
                     * Otherwise, display 1, 2, ..., p-1, p, p+1, ..., n-1, n
                     */
            /** @type {?} */
            var n = this.totalPages;
            /** @type {?} */
            var p = this.pageNumber || 1;
            if (p < 6) {
                return [1, 2, 3, 4, 5, 6, null, n - 1, n];
            }
            else if (p >= n - 4) {
                return [1, 2, null, n - 5, n - 4, n - 3, n - 2, n - 1, n];
            }
            else {
                return [1, 2, null, p - 1, p, p + 1, null, n - 1, n];
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PaginationComponent.prototype, "_collapsedVisiblePages", {
        get: /**
         * @return {?}
         */
        function () {
            /*
             * if there aren't any pages, don't display any
             */
            if (!this.totalPages) {
                return [];
            }
            /*
             * if there are less than five pages, display them all
             */
            if (this.totalPages <= 5) {
                /** @type {?} */
                var visiblePages = [];
                for (var i = 1; i <= this.totalPages; i++) {
                    visiblePages.push(i);
                }
                return visiblePages;
            }
            /*
                     * There should always be exactly five elements in the paging control when collapsed.
                     * Let n = total pages, p = current page, ... are non-clickable ellipses
                     * If the current page number is less than 4, display 1, 2, 3, ..., n
                     * If the current page number within is within 2 of the max, display 1, ..., n-2, n-1, n
                     * Otherwise, display 1, ..., p, ..., n
                     */
            /** @type {?} */
            var n = this.totalPages;
            /** @type {?} */
            var p = this.pageNumber || 1;
            if (p < 4) {
                return [1, 2, 3, null, n];
            }
            else if (p >= n - 2) {
                return [1, null, n - 2, n - 1, n];
            }
            else {
                return [1, null, p, null, n];
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    PaginationComponent.prototype._pageSizeUpdated = /**
     * @return {?}
     */
    function () {
        this._updateDisplayedPageSizeOptions();
    };
    /**
     * @return {?}
     */
    PaginationComponent.prototype._previousPage = /**
     * @return {?}
     */
    function () {
        if (this._isFirstPage) {
            return;
        }
        this._goToPage((this.pageNumber || 1) - 1);
    };
    /**
     * @param {?} pageNum
     * @return {?}
     */
    PaginationComponent.prototype._goToPage = /**
     * @param {?} pageNum
     * @return {?}
     */
    function (pageNum) {
        this.pageNumber = pageNum;
    };
    /**
     * @return {?}
     */
    PaginationComponent.prototype._nextPage = /**
     * @return {?}
     */
    function () {
        if (this._isLastPage) {
            return;
        }
        this._goToPage((this.pageNumber || 1) + 1);
    };
    /**
     * Changes the page size so that the first item displayed on the page will still be
     * displayed using the new page size.
     *
     * For example, if the page size is 10 and on the second page (items indexed 11-20) then
     * switching so that the page size is 5 will set the third page as the current page so
     * that the 11th item will still be displayed.
     */
    /**
     * Changes the page size so that the first item displayed on the page will still be
     * displayed using the new page size.
     *
     * For example, if the page size is 10 and on the second page (items indexed 11-20) then
     * switching so that the page size is 5 will set the third page as the current page so
     * that the 11th item will still be displayed.
     * @param {?} pageSize
     * @return {?}
     */
    PaginationComponent.prototype._changePageSize = /**
     * Changes the page size so that the first item displayed on the page will still be
     * displayed using the new page size.
     *
     * For example, if the page size is 10 and on the second page (items indexed 11-20) then
     * switching so that the page size is 5 will set the third page as the current page so
     * that the 11th item will still be displayed.
     * @param {?} pageSize
     * @return {?}
     */
    function (pageSize) {
        // Current page needs to be updated to reflect the new page size. Navigate to the page
        // containing the previous page's first item.
        /** @type {?} */
        var startIndex = (this.pageNumber - 1) * this.pageSize + 1;
        this.pageSize = pageSize;
        this.pageNumber = Math.ceil(startIndex / pageSize) || 1;
    };
    /**
     * Updates the list of page size options to display to the user. Includes making sure that
     * the page size is an option and that the list is sorted.
     */
    /**
     * Updates the list of page size options to display to the user. Includes making sure that
     * the page size is an option and that the list is sorted.
     * @private
     * @return {?}
     */
    PaginationComponent.prototype._updateDisplayedPageSizeOptions = /**
     * Updates the list of page size options to display to the user. Includes making sure that
     * the page size is an option and that the list is sorted.
     * @private
     * @return {?}
     */
    function () {
        // If no page size is provided, use the first page size option or the default page size.
        if (!this.pageSize) {
            this.pageSize = this.pageSizeOptions.length !== 0 ? this.pageSizeOptions[0] : BasePaginationComponent._DEFAULT_PAGE_SIZE;
        }
        this._displayedPageSizeOptions = this.pageSizeOptions.slice();
        if (this._displayedPageSizeOptions.indexOf(this.pageSize) === -1) {
            this._displayedPageSizeOptions.push(this.pageSize);
        }
        // Sort the numbers using a number-specific sort function.
        this._displayedPageSizeOptions.sort((/**
         * @param {?} a
         * @param {?} b
         * @return {?}
         */
        function (a, b) { return a - b; }));
    };
    PaginationComponent.decorators = [
        { type: Component, args: [{
                    selector: 'hc-pagination',
                    template: "<div class=\"hc-pagination-container\">\n    <div *ngIf=\"!hidePageSize\" class=\"hc-font-sm hc-page-detail-container\">\n        <label class=\"hc-page-detail-label\">Showing:</label>\n        <hc-select class=\"hc-page-detail-select\" [value]=\"pageSize\" (change)=\"_changePageSize($event.value)\" (focus)=\"isFocused = true\" (blur)=\"isFocused = false\">\n            <option *ngFor=\"let pageSizeOption of _displayedPageSizeOptions\" [value]=\"pageSizeOption\">\n                {{ isFocused ? pageSizeOption : pageSize === pageSizeOption && pageSizeOption > length ? 'all' : pageSizeOption }}\n            </option>\n        </hc-select>\n        <label class=\"hc-page-detail-entries\">of <strong>{{ length }}</strong> entries</label\n        >\n    </div>\n\n    <div class=\"hc-page-btns-container\">\n        <button\n            hc-button\n            color=\"secondary\"\n            class=\"hc-page-button hc-page-left-button\"\n            (click)=\"_previousPage()\"\n            [disabled]=\"!totalPages || _isFirstPage\"\n        >\n            <span class=\"hc-page-button-chevron hc-page-button-chevron-left\"></span>\n            <span>PREV</span>\n        </button>\n        <!-- page navigation buttons to appear normally -->\n        <button\n            hc-button\n            color=\"secondary\"\n            class=\"hc-page-button hc-page-inner-button expanded-page-button\"\n            *ngFor=\"let page of _visiblePages\"\n            [disabled]=\"!page\"\n            [class.hc-page-button-current]=\"page === pageNumber\"\n            (click)=\"_goToPage(page)\"\n        >\n            <span *ngIf=\"!!page\">{{ page }}</span>\n            <span *ngIf=\"!page\" class=\"hc-page-button-ellipsis\"></span>\n        </button>\n        <!-- page navigation buttons to appear when space is limited -->\n        <button\n            hc-button\n            color=\"secondary\"\n            class=\"hc-page-button hc-page-inner-button collapsed-page-button\"\n            *ngFor=\"let page of _collapsedVisiblePages\"\n            [disabled]=\"!page\"\n            [class.hc-page-button-current]=\"page === pageNumber\"\n            (click)=\"_goToPage(page)\"\n        >\n            <span *ngIf=\"!!page\">{{ page }}</span>\n            <span *ngIf=\"!page\" class=\"hc-page-button-ellipsis\"></span>\n        </button>\n        <button\n            hc-button\n            color=\"secondary\"\n            class=\"hc-page-button hc-page-right-button\"\n            (click)=\"_nextPage()\"\n            [disabled]=\"!totalPages || _isLastPage\"\n        >\n            <span>NEXT</span>\n            <span class=\"hc-page-button-chevron\"></span>\n        </button>\n    </div>\n</div>\n",
                    encapsulation: ViewEncapsulation.None,
                    styles: [".hc-pagination-container{-webkit-box-align:center;align-items:center;display:-webkit-box;display:flex;flex-wrap:wrap;-webkit-box-pack:justify;justify-content:space-between;margin-top:15px;width:100%}.hc-page-detail-container{-webkit-box-align:center;align-items:center;display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 0 auto;margin-right:10px;padding:5px 0}.hc-page-detail-label{color:#6d6e70;-webkit-box-flex:0;flex:0 0 auto}.hc-page-detail-select{-webkit-box-flex:1;flex:1 0 65px;margin:0 7px}.hc-page-detail-entries{white-space:nowrap}.hc-range-label{-webkit-box-flex:0;flex:0 0 auto;margin-right:10px;padding:12px 0}.hc-page-btns-container{display:-webkit-inline-box;display:inline-flex;padding:5px 0}.hc-pagination-container .hc-page-btns-container .hc-page-button{background-color:#fff;border:2px solid #e0e0e0;color:#00aeff;font-weight:700;margin-right:0;min-width:40px}.hc-pagination-container .hc-page-btns-container .hc-page-button:hover{color:#008bcc}.hc-pagination-container .hc-page-btns-container .hc-page-button:focus{outline:0}.hc-pagination-container .hc-page-btns-container .hc-page-button.hc-page-button-current{background-color:#00aeff;color:#fff}.hc-pagination-container .hc-page-btns-container .hc-page-left-button{border-bottom-right-radius:0;border-top-right-radius:0;padding:0 15px}.hc-pagination-container .hc-page-btns-container .hc-page-right-button{border-bottom-left-radius:0;border-left-width:0;border-top-left-radius:0;padding:0 15px}.hc-pagination-container .hc-page-btns-container .hc-page-inner-button{border-left-width:0;padding:0 5px;border-radius:0}.hc-pagination-container .hc-page-btns-container .hc-page-inner-button[disabled]{border-bottom-color:rgba(204,204,204,.35);border-top-color:rgba(204,204,204,.35);color:rgba(0,174,255,.35);opacity:1}.hc-pagination-container .hc-page-btns-container .hc-page-inner-button[disabled]:hover{background-color:#fff}.hc-pagination-container .hc-page-btns-container .hc-page-button-chevron{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3LjM4NSIgaGVpZ2h0PSIxMiIgdmlld0JveD0iMCAwIDcuMzg1IDEyIj4KICA8ZGVmcz4KICAgIDxzdHlsZT4KICAgICAgLmNscy0xIHsKICAgICAgICBmaWxsOiAjMDBhZWZmOwogICAgICB9CiAgICA8L3N0eWxlPgogIDwvZGVmcz4KICA8cGF0aCBpZD0iUGF0aF81IiBkYXRhLW5hbWU9IlBhdGggNSIgY2xhc3M9ImNscy0xIiBkPSJNMTMuMzcxLTE0LjgyNmEuNDQ4LjQ0OCwwLDAsMCwwLS42NWwtMS4yMzYtMS4xNzhhLjQ4Ni40ODYsMCwwLDAtLjY3LDBsLTMuOTU0LDMuNzktMy45NTQtMy43OWEuNDg2LjQ4NiwwLDAsMC0uNjcsMEwxLjY1MS0xNS40NzVhLjQ0OC40NDgsMCwwLDAsMCwuNjVsNS41MjUsNS4yOWEuNDg2LjQ4NiwwLDAsMCwuNjcsMFoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE2Ljc4NyAxMy41MTEpIHJvdGF0ZSgtOTApIi8+Cjwvc3ZnPgo=);background-repeat:no-repeat;background-size:contain;display:inline-block;height:12px;margin:1px 3px 0 7px;width:7px}.hc-pagination-container .hc-page-btns-container .hc-page-button-chevron-left{margin:1px 7px 0 3px;-webkit-transform:rotate(180deg);transform:rotate(180deg)}.hc-pagination-container .hc-page-btns-container .hc-page-button-ellipsis{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSI1IiB2aWV3Qm94PSIwIDAgMjAgNSI+CiAgPGRlZnM+CiAgICA8c3R5bGU+CiAgICAgIC5jbHMtMSB7CiAgICAgICAgZmlsbDogIzAwYWVmZjsKICAgICAgfQogICAgPC9zdHlsZT4KICA8L2RlZnM+CiAgPHBhdGggaWQ9IlBhdGhfNiIgZGF0YS1uYW1lPSJQYXRoIDYiIGNsYXNzPSJjbHMtMSIgZD0iTTUuNDU1LTEzLjc1QTEuMzExLDEuMzExLDAsMCwwLDQuMDkxLTE1SDEuMzY0QTEuMzExLDEuMzExLDAsMCwwLDAtMTMuNzV2Mi41QTEuMzExLDEuMzExLDAsMCwwLDEuMzY0LTEwSDQuMDkxYTEuMzExLDEuMzExLDAsMCwwLDEuMzY0LTEuMjVabTcuMjczLDBBMS4zMTEsMS4zMTEsMCwwLDAsMTEuMzY0LTE1SDguNjM2YTEuMzExLDEuMzExLDAsMCwwLTEuMzY0LDEuMjV2Mi41QTEuMzExLDEuMzExLDAsMCwwLDguNjM2LTEwaDIuNzI3YTEuMzExLDEuMzExLDAsMCwwLDEuMzY0LTEuMjVabTcuMjczLDBBMS4zMTEsMS4zMTEsMCwwLDAsMTguNjM2LTE1SDE1LjkwOWExLjMxMSwxLjMxMSwwLDAsMC0xLjM2NCwxLjI1djIuNUExLjMxMSwxLjMxMSwwLDAsMCwxNS45MDktMTBoMi43MjdBMS4zMTEsMS4zMTEsMCwwLDAsMjAtMTEuMjVaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIDE1KSIvPgo8L3N2Zz4K);background-repeat:no-repeat;background-size:contain;display:inline-block;height:3px;margin-bottom:1px;opacity:.4;width:11px}.hc-pagination-container .hc-page-btns-container .expanded-page-button{display:block}.hc-pagination-container .hc-page-btns-container .collapsed-page-button{display:none}@media (max-width:768px){.hc-pagination-container .hc-page-btns-container .expanded-page-button{display:none}.hc-pagination-container .hc-page-btns-container .collapsed-page-button{display:block}}"]
                }] }
    ];
    PaginationComponent.propDecorators = {
        pageSizeOptions: [{ type: Input }],
        hidePageSize: [{ type: Input }]
    };
    return PaginationComponent;
}(BasePaginationComponent));
export { PaginationComponent };
if (false) {
    /**
     * @type {?}
     * @private
     */
    PaginationComponent.prototype._pageSizeOptions;
    /** @type {?} */
    PaginationComponent.prototype.isFocused;
    /**
     * Displayed set of page size options. Will be sorted and include current page size.
     * @type {?}
     */
    PaginationComponent.prototype._displayedPageSizeOptions;
    /**
     * @type {?}
     * @private
     */
    PaginationComponent.prototype._hidePageSize;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFnaW5hdGlvbi5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AaGVhbHRoY2F0YWx5c3QvY2FzaG1lcmUvIiwic291cmNlcyI6WyJsaWIvcGFnaW5hdGlvbi9wYWdpbmF0aW9uLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxPQUFPLEVBQUMsU0FBUyxFQUFFLEtBQUssRUFBVSxpQkFBaUIsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUMxRSxPQUFPLEVBQUMsb0JBQW9CLEVBQUMsTUFBTSx1QkFBdUIsQ0FBQztBQUMzRCxPQUFPLEVBQUMsdUJBQXVCLEVBQUMsTUFBTSxtQkFBbUIsQ0FBQzs7Ozs7OztBQU0xRDtJQU15QywrQ0FBdUI7SUFOaEU7UUFBQSxxRUEwS0M7UUExSlcsc0JBQWdCLEdBQWEsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBRWxELGVBQVMsR0FBWSxLQUFLLENBQUM7Ozs7UUFHM0IsK0JBQXlCLEdBQWEsRUFBRSxDQUFDO1FBVWpDLG1CQUFhLEdBQUcsS0FBSyxDQUFDOztJQTJJbEMsQ0FBQztJQWxLRyxzQkFDSSxnREFBZTtRQUZuQixnR0FBZ0c7Ozs7O1FBQ2hHO1lBRUksT0FBTyxJQUFJLENBQUMsZ0JBQWdCLENBQUM7UUFDakMsQ0FBQzs7Ozs7UUFDRCxVQUFvQixLQUFlO1lBQy9CLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxDQUFDLEtBQUssSUFBSSxFQUFFLENBQUMsQ0FBQyxHQUFHOzs7O1lBQUMsVUFBQSxDQUFDLElBQUksT0FBQSxvQkFBb0IsQ0FBQyxDQUFDLENBQUMsRUFBdkIsQ0FBdUIsRUFBQyxDQUFDO1lBQ3hFLElBQUksQ0FBQywrQkFBK0IsRUFBRSxDQUFDO1FBQzNDLENBQUM7OztPQUpBO0lBYUQsc0JBQ0ksNkNBQVk7UUFGaEIscUZBQXFGOzs7OztRQUNyRjtZQUVJLE9BQU8sSUFBSSxDQUFDLGFBQWEsQ0FBQztRQUM5QixDQUFDOzs7OztR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USxFQUFFO1lBQ2hCLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQyxNQUFNLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyx1QkFBdUIsQ0FBQyxrQkFBa0IsQ0FBQztTQUM1SDtRQUVELElBQUksQ0FBQyx5QkFBeUIsR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDLEtBQUssRUFBRSxDQUFDO1FBQzlELElBQUksSUFBSSxDQUFDLHlCQUF5QixDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUU7WUFDOUQsSUFBSSxDQUFDLHlCQUF5QixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7U0FDdEQ7UUFFRCwwREFBMEQ7UUFDMUQsSUFBSSxDQUFDLHlCQUF5QixDQUFDLElBQUk7Ozs7O1FBQUMsVUFBQyxDQUFDLEVBQUUsQ0FBQyxJQUFLLE9BQUEsQ0FBQyxHQUFHLENBQUMsRUFBTCxDQUFLLEVBQUMsQ0FBQztJQUN6RCxDQUFDOztnQkF6S0osU0FBUyxTQUFDO29CQUNQLFFBQVEsRUFBRSxlQUFlO29CQUN6QixxcUZBQTBDO29CQUUxQyxhQUFhLEVBQUUsaUJBQWlCLENBQUMsSUFBSTs7aUJBQ3hDOzs7a0NBR0ksS0FBSzsrQkFnQkwsS0FBSzs7SUFrSlYsMEJBQUM7Q0FBQSxBQTFLRCxDQU15Qyx1QkFBdUIsR0FvSy9EO1NBcEtZLG1CQUFtQjs7Ozs7O0lBVTVCLCtDQUFrRDs7SUFFbEQsd0NBQTJCOzs7OztJQUczQix3REFBeUM7Ozs7O0lBVXpDLDRDQUE4QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7Q29tcG9uZW50LCBJbnB1dCwgT25Jbml0LCBWaWV3RW5jYXBzdWxhdGlvbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge2NvZXJjZU51bWJlclByb3BlcnR5fSBmcm9tICdAYW5ndWxhci9jZGsvY29lcmNpb24nO1xuaW1wb3J0IHtCYXNlUGFnaW5hdGlvbkNvbXBvbmVudH0gZnJvbSAnLi9iYXNlLXBhZ2luYXRpb24nO1xuXG4vKiogVGhlIHBhZ2luYXRpb24gY29udHJvbCBlbmFibGVzIHRoZSB1c2VyIHRvIG5hdmlnYXRlIGFjcm9zcyBwYWdlZCBjb250ZW50LlxuICogQWx0aG91Z2ggY29tbW9ubHkgdXNlZCB3aXRoIHRhYmxlcyBhbmQgZGF0YSBncmlkcywgdGhpcyBjb250cm9sIG1heSBiZSB1c2VkIGFueSBwbGFjZSB3aGVyZSBwYWdlZCBkYXRhIGlzIHVzZWQuXG4gKiBAaW5oZXJpdGRvY1xuICogKi9cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnaGMtcGFnaW5hdGlvbicsXG4gICAgdGVtcGxhdGVVcmw6ICcuL3BhZ2luYXRpb24uY29tcG9uZW50Lmh0bWwnLFxuICAgIHN0eWxlVXJsczogWycuL3BhZ2luYXRpb24uY29tcG9uZW50LnNjc3MnXSxcbiAgICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lXG59KVxuZXhwb3J0IGNsYXNzIFBhZ2luYXRpb25Db21wb25lbnQgZXh0ZW5kcyBCYXNlUGFnaW5hdGlvbkNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG4gICAgLyoqIFRoZSBzZXQgb2YgcHJvdmlkZWQgcGFnZSBzaXplIG9wdGlvbnMgdG8gZGlzcGxheSB0byB0aGUgdXNlci4gKkRlZmF1bHRzIHRvIFsxMCwgMjAsIDUwXS4qICovXG4gICAgQElucHV0KClcbiAgICBnZXQgcGFnZVNpemVPcHRpb25zKCk6IG51bWJlcltdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BhZ2VTaXplT3B0aW9ucztcbiAgICB9XG4gICAgc2V0IHBhZ2VTaXplT3B0aW9ucyh2YWx1ZTogbnVtYmVyW10pIHtcbiAgICAgICAgdGhpcy5fcGFnZVNpemVPcHRpb25zID0gKHZhbHVlIHx8IFtdKS5tYXAocCA9PiBjb2VyY2VOdW1iZXJQcm9wZXJ0eShwKSk7XG4gICAgICAgIHRoaXMuX3VwZGF0ZURpc3BsYXllZFBhZ2VTaXplT3B0aW9ucygpO1xuICAgIH1cbiAgICBwcml2YXRlIF9wYWdlU2l6ZU9wdGlvbnM6IG51bWJlcltdID0gWzEwLCAyMCwgNTBdO1xuXG4gICAgaXNGb2N1c2VkOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICAvKiogRGlzcGxheWVkIHNldCBvZiBwYWdlIHNpemUgb3B0aW9ucy4gV2lsbCBiZSBzb3J0ZWQgYW5kIGluY2x1ZGUgY3VycmVudCBwYWdlIHNpemUuICovXG4gICAgX2Rpc3BsYXllZFBhZ2VTaXplT3B0aW9uczogbnVtYmVyW10gPSBbXTtcblxuICAgIC8qKiBXaGV0aGVyIHRvIGhpZGUgdGhlIHBhZ2Ugc2l6ZSBzZWxlY3Rpb24gVUkgZnJvbSB0aGUgdXNlci4gKkRlZmF1bHRzIHRvIGZhbHNlLiogKi9cbiAgICBASW5wdXQoKVxuICAgIGdldCBoaWRlUGFnZVNpemUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9oaWRlUGFnZVNpemU7XG4gICAgfVxuICAgIHNldCBoaWRlUGFnZVNpemUodmFsdWU6IGJvb2xlYW4pIHtcbiAgICAgICAgdGhpcy5faGlkZVBhZ2VTaXplID0gISF2YWx1ZTtcbiAgICB9XG4gICAgcHJpdmF0ZSBfaGlkZVBhZ2VTaXplID0gZmFsc2U7XG5cbiAgICBuZ09uSW5pdCgpIHtcbiAgICAgICAgdGhpcy5fdXBkYXRlRGlzcGxheWVkUGFnZVNpemVPcHRpb25zKCk7XG4gICAgICAgIHN1cGVyLm5nT25Jbml0KCk7XG4gICAgfVxuXG4gICAgZ2V0IF92aXNpYmxlUGFnZXMoKTogQXJyYXk8bnVtYmVyIHwgbnVsbD4ge1xuICAgICAgICAvKlxuICAgICAgICAgKiBpZiB0aGVyZSBhcmVuJ3QgYW55IHBhZ2VzLCBkb24ndCBkaXNwbGF5IGFueVxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKCF0aGlzLnRvdGFsUGFnZXMpIHtcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qXG4gICAgICAgICAqIGlmIHRoZXJlIGFyZSBsZXNzIHRoYW4gbmluZSBwYWdlcywgZGlzcGxheSB0aGVtIGFsbFxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKHRoaXMudG90YWxQYWdlcyA8PSA5KSB7XG4gICAgICAgICAgICBjb25zdCB2aXNpYmxlUGFnZXM6IG51bWJlcltdID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSB0aGlzLnRvdGFsUGFnZXM7IGkrKykge1xuICAgICAgICAgICAgICAgIHZpc2libGVQYWdlcy5wdXNoKGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHZpc2libGVQYWdlcztcbiAgICAgICAgfVxuXG4gICAgICAgIC8qXG4gICAgICAgICAqIFRoZXJlIHNob3VsZCBhbHdheXMgYmUgZXhhY3RseSBuaW5lIGVsZW1lbnRzIGluIHRoZSBwYWdpbmcgY29udHJvbC5cbiAgICAgICAgICogTGV0IG4gPSB0b3RhbCBwYWdlcywgcCA9IGN1cnJlbnQgcGFnZSwgLi4uIGFyZSBub24tY2xpY2thYmxlIGVsbGlwc2VzXG4gICAgICAgICAqIElmIHRoZSBjdXJyZW50IHBhZ2UgbnVtYmVyIGlzIGxlc3MgdGhhbiA2LCBkaXNwbGF5IDEsIDIsIDMsIDQsIDUsIDYsIC4uLiwgbi0xLCBuXG4gICAgICAgICAqIElmIHRoZSBjdXJyZW50IHBhZ2UgbnVtYmVyIHdpdGhpbiBpcyB3aXRoaW4gNCBvZiB0aGUgbWF4LCBkaXNwbGF5IDEsIDIsIC4uLiwgbi01LCBuLTQsIG4tMywgbi0yLCBuLTEsIG5cbiAgICAgICAgICogT3RoZXJ3aXNlLCBkaXNwbGF5IDEsIDIsIC4uLiwgcC0xLCBwLCBwKzEsIC4uLiwgbi0xLCBuXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdCBuID0gdGhpcy50b3RhbFBhZ2VzO1xuICAgICAgICBjb25zdCBwID0gdGhpcy5wYWdlTnVtYmVyIHx8IDE7XG5cbiAgICAgICAgaWYgKHAgPCA2KSB7XG4gICAgICAgICAgICByZXR1cm4gWzEsIDIsIDMsIDQsIDUsIDYsIG51bGwsIG4gLSAxLCBuXTtcbiAgICAgICAgfSBlbHNlIGlmIChwID49IG4gLSA0KSB7XG4gICAgICAgICAgICByZXR1cm4gWzEsIDIsIG51bGwsIG4gLSA1LCBuIC0gNCwgbiAtIDMsIG4gLSAyLCBuIC0gMSwgbl07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gWzEsIDIsIG51bGwsIHAgLSAxLCBwLCBwICsgMSwgbnVsbCwgbiAtIDEsIG5dO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0IF9jb2xsYXBzZWRWaXNpYmxlUGFnZXMoKTogQXJyYXk8bnVtYmVyIHwgbnVsbD4ge1xuICAgICAgICAvKlxuICAgICAgICAgKiBpZiB0aGVyZSBhcmVuJ3QgYW55IHBhZ2VzLCBkb24ndCBkaXNwbGF5IGFueVxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKCF0aGlzLnRvdGFsUGFnZXMpIHtcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qXG4gICAgICAgICAqIGlmIHRoZXJlIGFyZSBsZXNzIHRoYW4gZml2ZSBwYWdlcywgZGlzcGxheSB0aGVtIGFsbFxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKHRoaXMudG90YWxQYWdlcyA8PSA1KSB7XG4gICAgICAgICAgICBjb25zdCB2aXNpYmxlUGFnZXM6IG51bWJlcltdID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSB0aGlzLnRvdGFsUGFnZXM7IGkrKykge1xuICAgICAgICAgICAgICAgIHZpc2libGVQYWdlcy5wdXNoKGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHZpc2libGVQYWdlcztcbiAgICAgICAgfVxuXG4gICAgICAgIC8qXG4gICAgICAgICAqIFRoZXJlIHNob3VsZCBhbHdheXMgYmUgZXhhY3RseSBmaXZlIGVsZW1lbnRzIGluIHRoZSBwYWdpbmcgY29udHJvbCB3aGVuIGNvbGxhcHNlZC5cbiAgICAgICAgICogTGV0IG4gPSB0b3RhbCBwYWdlcywgcCA9IGN1cnJlbnQgcGFnZSwgLi4uIGFyZSBub24tY2xpY2thYmxlIGVsbGlwc2VzXG4gICAgICAgICAqIElmIHRoZSBjdXJyZW50IHBhZ2UgbnVtYmVyIGlzIGxlc3MgdGhhbiA0LCBkaXNwbGF5IDEsIDIsIDMsIC4uLiwgblxuICAgICAgICAgKiBJZiB0aGUgY3VycmVudCBwYWdlIG51bWJlciB3aXRoaW4gaXMgd2l0aGluIDIgb2YgdGhlIG1heCwgZGlzcGxheSAxLCAuLi4sIG4tMiwgbi0xLCBuXG4gICAgICAgICAqIE90aGVyd2lzZSwgZGlzcGxheSAxLCAuLi4sIHAsIC4uLiwgblxuICAgICAgICAgKi9cbiAgICAgICAgY29uc3QgbiA9IHRoaXMudG90YWxQYWdlcztcbiAgICAgICAgY29uc3QgcCA9IHRoaXMucGFnZU51bWJlciB8fCAxO1xuXG4gICAgICAgIGlmIChwIDwgNCkge1xuICAgICAgICAgICAgcmV0dXJuIFsxLCAyLCAzLCBudWxsLCBuXTtcbiAgICAgICAgfSBlbHNlIGlmIChwID49IG4gLSAyKSB7XG4gICAgICAgICAgICByZXR1cm4gWzEsIG51bGwsIG4gLSAyLCBuIC0gMSwgbl07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gWzEsIG51bGwsIHAsIG51bGwsIG5dO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgX3BhZ2VTaXplVXBkYXRlZCgpIHtcbiAgICAgICAgdGhpcy5fdXBkYXRlRGlzcGxheWVkUGFnZVNpemVPcHRpb25zKCk7XG4gICAgfVxuXG4gICAgX3ByZXZpb3VzUGFnZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2lzRmlyc3RQYWdlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZ29Ub1BhZ2UoKHRoaXMucGFnZU51bWJlciB8fCAxKSAtIDEpO1xuICAgIH1cblxuICAgIF9nb1RvUGFnZShwYWdlTnVtOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5wYWdlTnVtYmVyID0gcGFnZU51bTtcbiAgICB9XG5cbiAgICBfbmV4dFBhZ2UoKSB7XG4gICAgICAgIGlmICh0aGlzLl9pc0xhc3RQYWdlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZ29Ub1BhZ2UoKHRoaXMucGFnZU51bWJlciB8fCAxKSArIDEpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoYW5nZXMgdGhlIHBhZ2Ugc2l6ZSBzbyB0aGF0IHRoZSBmaXJzdCBpdGVtIGRpc3BsYXllZCBvbiB0aGUgcGFnZSB3aWxsIHN0aWxsIGJlXG4gICAgICogZGlzcGxheWVkIHVzaW5nIHRoZSBuZXcgcGFnZSBzaXplLlxuICAgICAqXG4gICAgICogRm9yIGV4YW1wbGUsIGlmIHRoZSBwYWdlIHNpemUgaXMgMTAgYW5kIG9uIHRoZSBzZWNvbmQgcGFnZSAoaXRlbXMgaW5kZXhlZCAxMS0yMCkgdGhlblxuICAgICAqIHN3aXRjaGluZyBzbyB0aGF0IHRoZSBwYWdlIHNpemUgaXMgNSB3aWxsIHNldCB0aGUgdGhpcmQgcGFnZSBhcyB0aGUgY3VycmVudCBwYWdlIHNvXG4gICAgICogdGhhdCB0aGUgMTF0aCBpdGVtIHdpbGwgc3RpbGwgYmUgZGlzcGxheWVkLlxuICAgICAqL1xuICAgIF9jaGFuZ2VQYWdlU2l6ZShwYWdlU2l6ZTogbnVtYmVyKSB7XG4gICAgICAgIC8vIEN1cnJlbnQgcGFnZSBuZWVkcyB0byBiZSB1cGRhdGVkIHRvIHJlZmxlY3QgdGhlIG5ldyBwYWdlIHNpemUuIE5hdmlnYXRlIHRvIHRoZSBwYWdlXG4gICAgICAgIC8vIGNvbnRhaW5pbmcgdGhlIHByZXZpb3VzIHBhZ2UncyBmaXJzdCBpdGVtLlxuICAgICAgICBjb25zdCBzdGFydEluZGV4ID0gKHRoaXMucGFnZU51bWJlciAtIDEpICogdGhpcy5wYWdlU2l6ZSArIDE7XG4gICAgICAgIHRoaXMucGFnZVNpemUgPSBwYWdlU2l6ZTtcbiAgICAgICAgdGhpcy5wYWdlTnVtYmVyID0gTWF0aC5jZWlsKHN0YXJ0SW5kZXggLyBwYWdlU2l6ZSkgfHwgMTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBsaXN0IG9mIHBhZ2Ugc2l6ZSBvcHRpb25zIHRvIGRpc3BsYXkgdG8gdGhlIHVzZXIuIEluY2x1ZGVzIG1ha2luZyBzdXJlIHRoYXRcbiAgICAgKiB0aGUgcGFnZSBzaXplIGlzIGFuIG9wdGlvbiBhbmQgdGhhdCB0aGUgbGlzdCBpcyBzb3J0ZWQuXG4gICAgICovXG4gICAgcHJpdmF0ZSBfdXBkYXRlRGlzcGxheWVkUGFnZVNpemVPcHRpb25zKCkge1xuICAgICAgICAvLyBJZiBubyBwYWdlIHNpemUgaXMgcHJvdmlkZWQsIHVzZSB0aGUgZmlyc3QgcGFnZSBzaXplIG9wdGlvbiBvciB0aGUgZGVmYXVsdCBwYWdlIHNpemUuXG4gICAgICAgIGlmICghdGhpcy5wYWdlU2l6ZSkge1xuICAgICAgICAgICAgdGhpcy5wYWdlU2l6ZSA9IHRoaXMucGFnZVNpemVPcHRpb25zLmxlbmd0aCAhPT0gMCA/IHRoaXMucGFnZVNpemVPcHRpb25zWzBdIDogQmFzZVBhZ2luYXRpb25Db21wb25lbnQuX0RFRkFVTFRfUEFHRV9TSVpFO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fZGlzcGxheWVkUGFnZVNpemVPcHRpb25zID0gdGhpcy5wYWdlU2l6ZU9wdGlvbnMuc2xpY2UoKTtcbiAgICAgICAgaWYgKHRoaXMuX2Rpc3BsYXllZFBhZ2VTaXplT3B0aW9ucy5pbmRleE9mKHRoaXMucGFnZVNpemUpID09PSAtMSkge1xuICAgICAgICAgICAgdGhpcy5fZGlzcGxheWVkUGFnZVNpemVPcHRpb25zLnB1c2godGhpcy5wYWdlU2l6ZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTb3J0IHRoZSBudW1iZXJzIHVzaW5nIGEgbnVtYmVyLXNwZWNpZmljIHNvcnQgZnVuY3Rpb24uXG4gICAgICAgIHRoaXMuX2Rpc3BsYXllZFBhZ2VTaXplT3B0aW9ucy5zb3J0KChhLCBiKSA9PiBhIC0gYik7XG4gICAgfVxufVxuIl19